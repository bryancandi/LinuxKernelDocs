<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="1485pt" height="2032pt"
 viewBox="0.00 0.00 1485.06 2031.74" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 2027.74)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-2027.74 1481.06,-2027.74 1481.06,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_key</title>
<polygon fill="none" stroke="black" points="889.47,-1374 889.47,-1960 1112.47,-1960 1112.47,-1374 889.47,-1374"/>
<text text-anchor="middle" x="1000.97" y="-1944.8" font-family="Times,serif" font-size="14.00">Key</text>
<text text-anchor="middle" x="1000.97" y="-1929.8" font-family="Times,serif" font-size="14.00">(locks held during operation)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_remote_lock</title>
<polygon fill="none" stroke="black" stroke-dasharray="5,2" points="953.47,-210 953.47,-757 1379.47,-757 1379.47,-210 953.47,-210"/>
<text text-anchor="middle" x="1166.47" y="-741.8" font-family="Times,serif" font-size="14.00">Iterate through CPUs</text>
<text text-anchor="middle" x="1166.47" y="-726.8" font-family="Times,serif" font-size="14.00">(start from current)</text>
</g>
<!-- remote_lock -->
<g id="node1" class="node">
<title>remote_lock</title>
<polygon fill="#ffff99" stroke="black" points="1086.97,-1418 913.97,-1418 913.97,-1382 1086.97,-1382 1086.97,-1418"/>
<text text-anchor="middle" x="1000.47" y="-1396.3" font-family="Times,serif" font-size="14.00">remote CPU LRU lock</text>
</g>
<!-- fn___bpf_lru_list_shrink -->
<g id="node13" class="node">
<title>fn___bpf_lru_list_shrink</title>
<polygon fill="#beaed4" stroke="black" points="744.47,-1330 627.47,-1292 744.47,-1254 861.47,-1292 744.47,-1330"/>
<text text-anchor="middle" x="744.47" y="-1295.8" font-family="Times,serif" font-size="14.00">&gt; 0 entries in</text>
<text text-anchor="middle" x="744.47" y="-1280.8" font-family="Times,serif" font-size="14.00">local free list?</text>
</g>
<!-- remote_lock&#45;&gt;fn___bpf_lru_list_shrink -->
<!-- local_freelist_check5 -->
<g id="node18" class="node">
<title>local_freelist_check5</title>
<polygon fill="#ffff99" stroke="black" points="1228.47,-711 1085.47,-673 1228.47,-635 1371.47,-673 1228.47,-711"/>
<text text-anchor="middle" x="1228.47" y="-676.8" font-family="Times,serif" font-size="14.00">Steal a node from</text>
<text text-anchor="middle" x="1228.47" y="-661.8" font-family="Times,serif" font-size="14.00">per&#45;cpu freelist?</text>
</g>
<!-- remote_lock&#45;&gt;local_freelist_check5 -->
<!-- hash_lock -->
<g id="node2" class="node">
<title>hash_lock</title>
<polygon fill="#fdc086" stroke="black" points="1053.97,-1541 946.97,-1541 946.97,-1505 1053.97,-1505 1053.97,-1541"/>
<text text-anchor="middle" x="1000.47" y="-1519.3" font-family="Times,serif" font-size="14.00">hashtab lock</text>
</g>
<!-- hash_lock&#45;&gt;remote_lock -->
<!-- lru_lock -->
<g id="node3" class="node">
<title>lru_lock</title>
<polygon fill="#beaed4" stroke="black" points="1040.97,-1664 959.97,-1664 959.97,-1628 1040.97,-1628 1040.97,-1664"/>
<text text-anchor="middle" x="1000.47" y="-1642.3" font-family="Times,serif" font-size="14.00">LRU lock</text>
</g>
<!-- lru_lock&#45;&gt;hash_lock -->
<!-- local_lock -->
<g id="node4" class="node">
<title>local_lock</title>
<polygon fill="#7fc97f" stroke="black" points="1077.97,-1787 922.97,-1787 922.97,-1751 1077.97,-1751 1077.97,-1787"/>
<text text-anchor="middle" x="1000.47" y="-1765.3" font-family="Times,serif" font-size="14.00">local CPU LRU lock</text>
</g>
<!-- local_lock&#45;&gt;lru_lock -->
<!-- no_lock -->
<g id="node5" class="node">
<title>no_lock</title>
<polygon fill="lightgrey" stroke="black" points="1055.47,-1914 945.47,-1914 945.47,-1878 1055.47,-1878 1055.47,-1914"/>
<text text-anchor="middle" x="1000.47" y="-1892.3" font-family="Times,serif" font-size="14.00">no locks held</text>
</g>
<!-- no_lock&#45;&gt;local_lock -->
<!-- begin -->
<g id="node6" class="node">
<title>begin</title>
<ellipse fill="lightgrey" stroke="black" cx="387.47" cy="-1996.87" rx="101.65" ry="26.74"/>
<text text-anchor="middle" x="387.47" y="-2000.67" font-family="Times,serif" font-size="14.00">begin</text>
<text text-anchor="middle" x="387.47" y="-1985.67" font-family="Times,serif" font-size="14.00">bpf_map_update()</text>
</g>
<!-- local_freelist_check -->
<g id="node7" class="node">
<title>local_freelist_check</title>
<polygon fill="#7fc97f" stroke="black" points="387.47,-1934 260.47,-1896 387.47,-1858 514.47,-1896 387.47,-1934"/>
<text text-anchor="middle" x="387.47" y="-1899.8" font-family="Times,serif" font-size="14.00">Local freelist</text>
<text text-anchor="middle" x="387.47" y="-1884.8" font-family="Times,serif" font-size="14.00">node available?</text>
</g>
<!-- begin&#45;&gt;local_freelist_check -->
<g id="edge1" class="edge">
<title>begin&#45;&gt;local_freelist_check</title>
<path fill="none" stroke="black" d="M387.47,-1969.84C387.47,-1969.84 387.47,-1944.1 387.47,-1944.1"/>
<polygon fill="black" stroke="black" points="390.97,-1944.1 387.47,-1934.1 383.97,-1944.1 390.97,-1944.1"/>
</g>
<!-- use_local_node -->
<g id="node8" class="node">
<title>use_local_node</title>
<polygon fill="lightgrey" stroke="black" points="271.47,-1788 137.47,-1788 137.47,-1750 271.47,-1750 271.47,-1788"/>
<text text-anchor="middle" x="204.47" y="-1772.8" font-family="Times,serif" font-size="14.00">Use node owned</text>
<text text-anchor="middle" x="204.47" y="-1757.8" font-family="Times,serif" font-size="14.00">by this CPU</text>
</g>
<!-- local_freelist_check&#45;&gt;use_local_node -->
<g id="edge2" class="edge">
<title>local_freelist_check&#45;&gt;use_local_node</title>
<path fill="none" stroke="black" d="M265.97,-1894.2C265.97,-1894.2 265.97,-1798.15 265.97,-1798.15"/>
<polygon fill="black" stroke="black" points="269.47,-1798.15 265.97,-1788.15 262.47,-1798.15 269.47,-1798.15"/>
<text text-anchor="middle" x="260.97" y="-1834.98" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- common_lru_check -->
<g id="node9" class="node">
<title>common_lru_check</title>
<polygon fill="lightgrey" stroke="black" points="571.47,-1822 343.47,-1769 571.47,-1716 799.47,-1769 571.47,-1822"/>
<text text-anchor="middle" x="571.47" y="-1780.3" font-family="Times,serif" font-size="14.00">Map created with</text>
<text text-anchor="middle" x="571.47" y="-1765.3" font-family="Times,serif" font-size="14.00">common LRU?</text>
<text text-anchor="middle" x="571.47" y="-1750.3" font-family="Times,serif" font-size="14.00">(!BPF_F_NO_COMMON_LRU)</text>
</g>
<!-- local_freelist_check&#45;&gt;common_lru_check -->
<g id="edge3" class="edge">
<title>local_freelist_check&#45;&gt;common_lru_check</title>
<path fill="none" stroke="black" d="M428.97,-1870.3C428.97,-1870.3 428.97,-1799.23 428.97,-1799.23"/>
<polygon fill="black" stroke="black" points="432.47,-1799.23 428.97,-1789.23 425.47,-1799.23 432.47,-1799.23"/>
<text text-anchor="middle" x="422.47" y="-1838.57" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- fn_htab_lru_map_update_elem4 -->
<g id="node27" class="node">
<title>fn_htab_lru_map_update_elem4</title>
<polygon fill="#fdc086" stroke="black" points="462.47,-182 318.47,-182 318.47,-144 462.47,-144 462.47,-182"/>
<text text-anchor="middle" x="390.47" y="-166.8" font-family="Times,serif" font-size="14.00">Update hashmap</text>
<text text-anchor="middle" x="390.47" y="-151.8" font-family="Times,serif" font-size="14.00">with new element</text>
</g>
<!-- use_local_node&#45;&gt;fn_htab_lru_map_update_elem4 -->
<g id="edge27" class="edge">
<title>use_local_node&#45;&gt;fn_htab_lru_map_update_elem4</title>
<path fill="none" stroke="black" d="M271.79,-1769C302,-1769 330.97,-1769 330.97,-1769 330.97,-1769 330.97,-192.15 330.97,-192.15"/>
<polygon fill="black" stroke="black" points="334.47,-192.15 330.97,-182.15 327.47,-192.15 334.47,-192.15"/>
</g>
<!-- fn_bpf_lru_list_pop_free_to_local -->
<g id="node10" class="node">
<title>fn_bpf_lru_list_pop_free_to_local</title>
<polygon fill="#beaed4" stroke="black" points="623.47,-1680 417.47,-1680 417.47,-1612 623.47,-1612 623.47,-1680"/>
<text text-anchor="middle" x="520.47" y="-1664.8" font-family="Times,serif" font-size="14.00">Flush local pending,</text>
<text text-anchor="middle" x="520.47" y="-1649.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;Rotate Global list, move</text>
<text text-anchor="middle" x="520.47" y="-1634.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;target_free</text>
<text text-anchor="middle" x="520.47" y="-1619.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;from global &#45;&gt; local</text>
</g>
<!-- common_lru_check&#45;&gt;fn_bpf_lru_list_pop_free_to_local -->
<g id="edge4" class="edge">
<title>common_lru_check&#45;&gt;fn_bpf_lru_list_pop_free_to_local</title>
<path fill="none" stroke="black" d="M520.47,-1727.7C520.47,-1727.7 520.47,-1690.03 520.47,-1690.03"/>
<polygon fill="black" stroke="black" points="523.97,-1690.03 520.47,-1680.03 516.97,-1690.03 523.97,-1690.03"/>
<text text-anchor="middle" x="515.47" y="-1697.66" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- fn___bpf_lru_list_shrink_inactive -->
<g id="node12" class="node">
<title>fn___bpf_lru_list_shrink_inactive</title>
<polygon fill="#fdc086" stroke="black" points="828.47,-1434 636.47,-1434 636.47,-1366 828.47,-1366 828.47,-1434"/>
<text text-anchor="middle" x="732.47" y="-1418.8" font-family="Times,serif" font-size="14.00">Shrink inactive list</text>
<text text-anchor="middle" x="732.47" y="-1403.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;&#160;up to remaining</text>
<text text-anchor="middle" x="732.47" y="-1388.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;&#160;target_free</text>
<text text-anchor="middle" x="732.47" y="-1373.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;&#160;(global LRU &#45;&gt; local)</text>
</g>
<!-- common_lru_check&#45;&gt;fn___bpf_lru_list_shrink_inactive -->
<g id="edge5" class="edge">
<title>common_lru_check&#45;&gt;fn___bpf_lru_list_shrink_inactive</title>
<path fill="none" stroke="black" d="M717.97,-1749.94C717.97,-1749.94 717.97,-1444.15 717.97,-1444.15"/>
<polygon fill="black" stroke="black" points="721.47,-1444.15 717.97,-1434.15 714.47,-1444.15 721.47,-1444.15"/>
<text text-anchor="middle" x="711.47" y="-1600.84" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- fn___bpf_lru_node_move_to_free -->
<g id="node11" class="node">
<title>fn___bpf_lru_node_move_to_free</title>
<polygon fill="#beaed4" stroke="black" points="520.47,-1576 420.47,-1523 520.47,-1470 620.47,-1523 520.47,-1576"/>
<text text-anchor="middle" x="520.47" y="-1534.3" font-family="Times,serif" font-size="14.00">Able to free</text>
<text text-anchor="middle" x="520.47" y="-1519.3" font-family="Times,serif" font-size="14.00">target_free</text>
<text text-anchor="middle" x="520.47" y="-1504.3" font-family="Times,serif" font-size="14.00">nodes?</text>
</g>
<!-- fn_bpf_lru_list_pop_free_to_local&#45;&gt;fn___bpf_lru_node_move_to_free -->
<g id="edge6" class="edge">
<title>fn_bpf_lru_list_pop_free_to_local&#45;&gt;fn___bpf_lru_node_move_to_free</title>
<path fill="none" stroke="black" d="M520.47,-1611.74C520.47,-1611.74 520.47,-1586.43 520.47,-1586.43"/>
<polygon fill="black" stroke="black" points="523.97,-1586.43 520.47,-1576.43 516.97,-1586.43 523.97,-1586.43"/>
</g>
<!-- fn___bpf_lru_node_move_to_free&#45;&gt;fn___bpf_lru_list_shrink_inactive -->
<g id="edge8" class="edge">
<title>fn___bpf_lru_node_move_to_free&#45;&gt;fn___bpf_lru_list_shrink_inactive</title>
<path fill="none" stroke="black" d="M612.97,-1518.91C612.97,-1497.57 612.97,-1400 612.97,-1400 612.97,-1400 626.29,-1400 626.29,-1400"/>
<polygon fill="black" stroke="black" points="626.29,-1403.5 636.29,-1400 626.29,-1396.5 626.29,-1403.5"/>
<text text-anchor="middle" x="606.47" y="-1456.59" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- fn_bpf_lru_list_pop_free_to_local2 -->
<g id="node23" class="node">
<title>fn_bpf_lru_list_pop_free_to_local2</title>
<polygon fill="lightgrey" stroke="black" points="590.97,-1210.5 405.97,-1210.5 405.97,-1172.5 590.97,-1172.5 590.97,-1210.5"/>
<text text-anchor="middle" x="498.47" y="-1195.3" font-family="Times,serif" font-size="14.00">Use node that was</text>
<text text-anchor="middle" x="498.47" y="-1180.3" font-family="Times,serif" font-size="14.00">not recently referenced</text>
</g>
<!-- fn___bpf_lru_node_move_to_free&#45;&gt;fn_bpf_lru_list_pop_free_to_local2 -->
<g id="edge7" class="edge">
<title>fn___bpf_lru_node_move_to_free&#45;&gt;fn_bpf_lru_list_pop_free_to_local2</title>
<path fill="none" stroke="black" d="M505.72,-1477.6C505.72,-1477.6 505.72,-1220.86 505.72,-1220.86"/>
<polygon fill="black" stroke="black" points="509.22,-1220.86 505.72,-1210.86 502.22,-1220.86 509.22,-1220.86"/>
<text text-anchor="middle" x="500.72" y="-1353.03" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- fn___bpf_lru_list_shrink_inactive&#45;&gt;fn___bpf_lru_list_shrink -->
<g id="edge9" class="edge">
<title>fn___bpf_lru_list_shrink_inactive&#45;&gt;fn___bpf_lru_list_shrink</title>
<path fill="none" stroke="black" d="M732.47,-1365.83C732.47,-1365.83 732.47,-1336.32 732.47,-1336.32"/>
<polygon fill="black" stroke="black" points="735.97,-1336.32 732.47,-1326.32 728.97,-1336.32 735.97,-1336.32"/>
</g>
<!-- fn___bpf_lru_list_shrink2 -->
<g id="node14" class="node">
<title>fn___bpf_lru_list_shrink2</title>
<polygon fill="#beaed4" stroke="black" points="863.47,-1218 663.47,-1218 663.47,-1165 863.47,-1165 863.47,-1218"/>
<text text-anchor="middle" x="763.47" y="-1202.8" font-family="Times,serif" font-size="14.00">Steal one node from</text>
<text text-anchor="middle" x="763.47" y="-1187.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;&#160;inactive, or if empty,</text>
<text text-anchor="middle" x="763.47" y="-1172.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;&#160;from active global list</text>
</g>
<!-- fn___bpf_lru_list_shrink&#45;&gt;fn___bpf_lru_list_shrink2 -->
<g id="edge11" class="edge">
<title>fn___bpf_lru_list_shrink&#45;&gt;fn___bpf_lru_list_shrink2</title>
<path fill="none" stroke="black" d="M762.47,-1259.65C762.47,-1259.65 762.47,-1228.08 762.47,-1228.08"/>
<polygon fill="black" stroke="black" points="765.97,-1228.08 762.47,-1218.08 758.97,-1228.08 765.97,-1228.08"/>
<text text-anchor="middle" x="755.97" y="-1232.66" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- fn___bpf_lru_list_shrink&#45;&gt;fn_bpf_lru_list_pop_free_to_local2 -->
<g id="edge10" class="edge">
<title>fn___bpf_lru_list_shrink&#45;&gt;fn_bpf_lru_list_pop_free_to_local2</title>
<path fill="none" stroke="black" d="M638.97,-1288.16C638.97,-1269.72 638.97,-1191 638.97,-1191 638.97,-1191 601.01,-1191 601.01,-1191"/>
<polygon fill="black" stroke="black" points="601.01,-1187.5 591.01,-1191 601.01,-1194.5 601.01,-1187.5"/>
<text text-anchor="middle" x="633.97" y="-1224.4" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- fn___bpf_lru_list_shrink3 -->
<g id="node15" class="node">
<title>fn___bpf_lru_list_shrink3</title>
<polygon fill="#fdc086" stroke="black" points="838.97,-1129 687.97,-1129 687.97,-1091 838.97,-1091 838.97,-1129"/>
<text text-anchor="middle" x="763.47" y="-1113.8" font-family="Times,serif" font-size="14.00">Try to remove</text>
<text text-anchor="middle" x="763.47" y="-1098.8" font-family="Times,serif" font-size="14.00">node from hashtab</text>
</g>
<!-- fn___bpf_lru_list_shrink2&#45;&gt;fn___bpf_lru_list_shrink3 -->
<g id="edge12" class="edge">
<title>fn___bpf_lru_list_shrink2&#45;&gt;fn___bpf_lru_list_shrink3</title>
<path fill="none" stroke="black" d="M763.47,-1164.81C763.47,-1164.81 763.47,-1139.25 763.47,-1139.25"/>
<polygon fill="black" stroke="black" points="766.97,-1139.25 763.47,-1129.25 759.97,-1139.25 766.97,-1139.25"/>
</g>
<!-- local_freelist_check2 -->
<g id="node16" class="node">
<title>local_freelist_check2</title>
<polygon fill="lightgrey" stroke="black" points="763.47,-1055 649.47,-1017 763.47,-979 877.47,-1017 763.47,-1055"/>
<text text-anchor="middle" x="763.47" y="-1020.8" font-family="Times,serif" font-size="14.00">Htab removal</text>
<text text-anchor="middle" x="763.47" y="-1005.8" font-family="Times,serif" font-size="14.00">successful?</text>
</g>
<!-- fn___bpf_lru_list_shrink3&#45;&gt;local_freelist_check2 -->
<g id="edge13" class="edge">
<title>fn___bpf_lru_list_shrink3&#45;&gt;local_freelist_check2</title>
<path fill="none" stroke="black" d="M763.47,-1090.73C763.47,-1090.73 763.47,-1065.05 763.47,-1065.05"/>
<polygon fill="black" stroke="black" points="766.97,-1065.05 763.47,-1055.05 759.97,-1065.05 766.97,-1065.05"/>
</g>
<!-- common_lru_check2 -->
<g id="node17" class="node">
<title>common_lru_check2</title>
<polygon fill="lightgrey" stroke="black" points="1209.47,-943 981.47,-890 1209.47,-837 1437.47,-890 1209.47,-943"/>
<text text-anchor="middle" x="1209.47" y="-901.3" font-family="Times,serif" font-size="14.00">Map created with</text>
<text text-anchor="middle" x="1209.47" y="-886.3" font-family="Times,serif" font-size="14.00">common LRU?</text>
<text text-anchor="middle" x="1209.47" y="-871.3" font-family="Times,serif" font-size="14.00">(!BPF_F_NO_COMMON_LRU)</text>
</g>
<!-- local_freelist_check2&#45;&gt;common_lru_check2 -->
<g id="edge15" class="edge">
<title>local_freelist_check2&#45;&gt;common_lru_check2</title>
<path fill="none" stroke="black" d="M859.49,-1010.87C859.49,-985.51 859.49,-890 859.49,-890 859.49,-890 971.4,-890 971.4,-890"/>
<polygon fill="black" stroke="black" points="971.4,-893.5 981.4,-890 971.4,-886.5 971.4,-893.5"/>
<text text-anchor="middle" x="852.99" y="-898.28" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- local_freelist_check4 -->
<g id="node24" class="node">
<title>local_freelist_check4</title>
<polygon fill="lightgrey" stroke="black" points="782.47,-409.5 628.47,-409.5 628.47,-356.5 782.47,-356.5 782.47,-409.5"/>
<text text-anchor="middle" x="705.47" y="-394.3" font-family="Times,serif" font-size="14.00">Use node that was</text>
<text text-anchor="middle" x="705.47" y="-379.3" font-family="Times,serif" font-size="14.00">actively referenced</text>
<text text-anchor="middle" x="705.47" y="-364.3" font-family="Times,serif" font-size="14.00">in global list</text>
</g>
<!-- local_freelist_check2&#45;&gt;local_freelist_check4 -->
<g id="edge14" class="edge">
<title>local_freelist_check2&#45;&gt;local_freelist_check4</title>
<path fill="none" stroke="black" d="M715.97,-994.81C715.97,-994.81 715.97,-419.81 715.97,-419.81"/>
<polygon fill="black" stroke="black" points="719.47,-419.81 715.97,-409.81 712.47,-419.81 719.47,-419.81"/>
<text text-anchor="middle" x="710.97" y="-711.11" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- common_lru_check2&#45;&gt;local_freelist_check5 -->
<g id="edge16" class="edge">
<title>common_lru_check2&#45;&gt;local_freelist_check5</title>
<path fill="none" stroke="black" d="M1271.86,-851.2C1271.86,-851.2 1271.86,-709.5 1271.86,-709.5"/>
<polygon fill="black" stroke="black" points="1275.36,-709.5 1271.86,-699.5 1268.36,-709.51 1275.36,-709.5"/>
<text text-anchor="middle" x="1266.86" y="-784.15" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- fn_htab_lru_map_update_elem_ENOMEM -->
<g id="node25" class="node">
<title>fn_htab_lru_map_update_elem_ENOMEM</title>
<ellipse fill="lightgrey" stroke="black" cx="1383.47" cy="-163" rx="93.68" ry="18"/>
<text text-anchor="middle" x="1383.47" y="-159.3" font-family="Times,serif" font-size="14.00">return &#45;ENOMEM</text>
</g>
<!-- common_lru_check2&#45;&gt;fn_htab_lru_map_update_elem_ENOMEM -->
<g id="edge17" class="edge">
<title>common_lru_check2&#45;&gt;fn_htab_lru_map_update_elem_ENOMEM</title>
<path fill="none" stroke="black" d="M1404.47,-882.33C1404.47,-882.33 1404.47,-190.57 1404.47,-190.57"/>
<polygon fill="black" stroke="black" points="1407.97,-190.57 1404.47,-180.57 1400.97,-190.57 1407.97,-190.57"/>
<text text-anchor="middle" x="1397.97" y="-540.25" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- pad4 -->
<!-- common_lru_check2&#45;&gt;pad4 -->
<!-- local_freelist_check6 -->
<g id="node19" class="node">
<title>local_freelist_check6</title>
<polygon fill="#ffff99" stroke="black" points="1222.97,-599 961.97,-599 961.97,-546 1222.97,-546 1222.97,-599"/>
<text text-anchor="middle" x="1092.47" y="-583.8" font-family="Times,serif" font-size="14.00">Steal a node from</text>
<text text-anchor="middle" x="1092.47" y="-568.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;(1) Unreferenced pending, or</text>
<text text-anchor="middle" x="1092.47" y="-553.8" font-family="Times,serif" font-size="14.00"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;(2) Any pending node</text>
</g>
<!-- local_freelist_check5&#45;&gt;local_freelist_check6 -->
<g id="edge19" class="edge">
<title>local_freelist_check5&#45;&gt;local_freelist_check6</title>
<path fill="none" stroke="black" d="M1154.22,-654.57C1154.22,-654.57 1154.22,-609.15 1154.22,-609.15"/>
<polygon fill="black" stroke="black" points="1157.72,-609.15 1154.22,-599.15 1150.72,-609.15 1157.72,-609.15"/>
<text text-anchor="middle" x="1147.72" y="-620.66" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- fn_htab_lru_map_update_elem -->
<g id="node21" class="node">
<title>fn_htab_lru_map_update_elem</title>
<polygon fill="lightgrey" stroke="black" points="1092.47,-436 986.47,-383 1092.47,-330 1198.47,-383 1092.47,-436"/>
<text text-anchor="middle" x="1092.47" y="-394.3" font-family="Times,serif" font-size="14.00">Stole node</text>
<text text-anchor="middle" x="1092.47" y="-379.3" font-family="Times,serif" font-size="14.00">from remote</text>
<text text-anchor="middle" x="1092.47" y="-364.3" font-family="Times,serif" font-size="14.00">CPU?</text>
</g>
<!-- local_freelist_check5&#45;&gt;fn_htab_lru_map_update_elem -->
<g id="edge18" class="edge">
<title>local_freelist_check5&#45;&gt;fn_htab_lru_map_update_elem</title>
<path fill="none" stroke="black" d="M1272.47,-646.33C1272.47,-577.63 1272.47,-400 1272.47,-400 1272.47,-400 1174.64,-400 1174.64,-400"/>
<polygon fill="black" stroke="black" points="1174.64,-396.5 1164.64,-400 1174.64,-403.5 1174.64,-396.5"/>
<text text-anchor="middle" x="1267.47" y="-478.05" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- local_freelist_check7 -->
<g id="node20" class="node">
<title>local_freelist_check7</title>
<polygon fill="#fdc086" stroke="black" points="1167.97,-510 1016.97,-510 1016.97,-472 1167.97,-472 1167.97,-510"/>
<text text-anchor="middle" x="1092.47" y="-494.8" font-family="Times,serif" font-size="14.00">Try to remove</text>
<text text-anchor="middle" x="1092.47" y="-479.8" font-family="Times,serif" font-size="14.00">node from hashtab</text>
</g>
<!-- local_freelist_check6&#45;&gt;local_freelist_check7 -->
<g id="edge20" class="edge">
<title>local_freelist_check6&#45;&gt;local_freelist_check7</title>
<path fill="none" stroke="black" d="M1092.47,-545.81C1092.47,-545.81 1092.47,-520.25 1092.47,-520.25"/>
<polygon fill="black" stroke="black" points="1095.97,-520.25 1092.47,-510.25 1088.97,-520.25 1095.97,-520.25"/>
</g>
<!-- local_freelist_check7&#45;&gt;fn_htab_lru_map_update_elem -->
<g id="edge21" class="edge">
<title>local_freelist_check7&#45;&gt;fn_htab_lru_map_update_elem</title>
<path fill="none" stroke="black" d="M1092.47,-471.94C1092.47,-471.94 1092.47,-446.18 1092.47,-446.18"/>
<polygon fill="black" stroke="black" points="1095.97,-446.18 1092.47,-436.18 1088.97,-446.18 1095.97,-446.18"/>
</g>
<!-- fn_htab_lru_map_update_elem2 -->
<g id="node22" class="node">
<title>fn_htab_lru_map_update_elem2</title>
<polygon fill="lightgrey" stroke="black" points="1286.47,-294 1201.47,-256 1286.47,-218 1371.47,-256 1286.47,-294"/>
<text text-anchor="middle" x="1286.47" y="-259.8" font-family="Times,serif" font-size="14.00">Iterated</text>
<text text-anchor="middle" x="1286.47" y="-244.8" font-family="Times,serif" font-size="14.00">all CPUs?</text>
</g>
<!-- fn_htab_lru_map_update_elem&#45;&gt;fn_htab_lru_map_update_elem2 -->
<g id="edge23" class="edge">
<title>fn_htab_lru_map_update_elem&#45;&gt;fn_htab_lru_map_update_elem2</title>
<path fill="none" stroke="black" d="M1162.47,-365C1188.68,-365 1212.22,-365 1212.22,-365 1212.22,-365 1212.22,-270.97 1212.22,-270.97"/>
<polygon fill="black" stroke="black" points="1215.72,-270.97 1212.22,-260.97 1208.72,-270.97 1215.72,-270.97"/>
<text text-anchor="middle" x="1205.72" y="-346.66" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- fn_htab_lru_map_update_elem3 -->
<g id="node26" class="node">
<title>fn_htab_lru_map_update_elem3</title>
<polygon fill="lightgrey" stroke="black" points="805.47,-282.5 605.47,-282.5 605.47,-229.5 805.47,-229.5 805.47,-282.5"/>
<text text-anchor="middle" x="705.47" y="-267.3" font-family="Times,serif" font-size="14.00">Use node that was</text>
<text text-anchor="middle" x="705.47" y="-252.3" font-family="Times,serif" font-size="14.00">actively referenced</text>
<text text-anchor="middle" x="705.47" y="-237.3" font-family="Times,serif" font-size="14.00">in (another?) CPU&#39;s cache</text>
</g>
<!-- fn_htab_lru_map_update_elem&#45;&gt;fn_htab_lru_map_update_elem3 -->
<g id="edge22" class="edge">
<title>fn_htab_lru_map_update_elem&#45;&gt;fn_htab_lru_map_update_elem3</title>
<path fill="none" stroke="black" d="M1058.22,-347C979.82,-347 793.97,-347 793.97,-347 793.97,-347 793.97,-292.81 793.97,-292.81"/>
<polygon fill="black" stroke="black" points="797.47,-292.81 793.97,-282.81 790.47,-292.81 797.47,-292.81"/>
<text text-anchor="middle" x="894" y="-350.8" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- pad0 -->
<!-- fn_htab_lru_map_update_elem&#45;&gt;pad0 -->
<!-- fn_htab_lru_map_update_elem2&#45;&gt;local_freelist_check5 -->
<g id="edge25" class="edge">
<title>fn_htab_lru_map_update_elem2&#45;&gt;local_freelist_check5</title>
<path fill="none" stroke="black" d="M1321.97,-278.42C1321.97,-278.42 1321.97,-649.6 1321.97,-649.6"/>
<polygon fill="black" stroke="black" points="1318.47,-649.6 1321.97,-659.6 1325.47,-649.6 1318.47,-649.6"/>
<text text-anchor="middle" x="1315.47" y="-467.81" font-family="Times,serif" font-size="14.00">N</text>
</g>
<!-- fn_htab_lru_map_update_elem2&#45;&gt;fn_htab_lru_map_update_elem_ENOMEM -->
<g id="edge24" class="edge">
<title>fn_htab_lru_map_update_elem2&#45;&gt;fn_htab_lru_map_update_elem_ENOMEM</title>
<path fill="none" stroke="black" d="M1330.67,-237.63C1330.67,-237.63 1330.67,-187.96 1330.67,-187.96"/>
<polygon fill="black" stroke="black" points="1334.17,-187.96 1330.67,-177.96 1327.17,-187.96 1334.17,-187.96"/>
<text text-anchor="middle" x="1325.67" y="-201.59" font-family="Times,serif" font-size="14.00">Y</text>
</g>
<!-- fn_bpf_lru_list_pop_free_to_local2&#45;&gt;fn_htab_lru_map_update_elem4 -->
<g id="edge28" class="edge">
<title>fn_bpf_lru_list_pop_free_to_local2&#45;&gt;fn_htab_lru_map_update_elem4</title>
<path fill="none" stroke="black" d="M424.8,-1172.32C424.8,-1172.32 424.8,-192.04 424.8,-192.04"/>
<polygon fill="black" stroke="black" points="428.3,-192.04 424.8,-182.04 421.3,-192.04 428.3,-192.04"/>
</g>
<!-- local_freelist_check4&#45;&gt;fn_htab_lru_map_update_elem3 -->
<!-- local_freelist_check4&#45;&gt;fn_htab_lru_map_update_elem4 -->
<g id="edge29" class="edge">
<title>local_freelist_check4&#45;&gt;fn_htab_lru_map_update_elem4</title>
<path fill="none" stroke="black" d="M628.32,-383C551.09,-383 443.63,-383 443.63,-383 443.63,-383 443.63,-192.14 443.63,-192.14"/>
<polygon fill="black" stroke="black" points="447.13,-192.14 443.63,-182.14 440.13,-192.14 447.13,-192.14"/>
</g>
<!-- fn_htab_lru_map_update_elem3&#45;&gt;fn_htab_lru_map_update_elem4 -->
<g id="edge26" class="edge">
<title>fn_htab_lru_map_update_elem3&#45;&gt;fn_htab_lru_map_update_elem4</title>
<path fill="none" stroke="black" d="M634.44,-229.42C634.44,-203.84 634.44,-169 634.44,-169 634.44,-169 472.68,-169 472.68,-169"/>
<polygon fill="black" stroke="black" points="472.68,-165.5 462.68,-169 472.68,-172.5 472.68,-165.5"/>
</g>
<!-- fn_htab_lru_map_update_elem5 -->
<g id="node28" class="node">
<title>fn_htab_lru_map_update_elem5</title>
<ellipse fill="lightgrey" stroke="black" cx="74.47" cy="-18" rx="49.29" ry="18"/>
<text text-anchor="middle" x="74.47" y="-14.3" font-family="Times,serif" font-size="14.00">return 0</text>
</g>
<!-- fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem5 -->
<g id="edge30" class="edge">
<title>fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem5</title>
<path fill="none" stroke="black" d="M318.33,-163C220.54,-163 58,-163 58,-163 58,-163 58,-45.2 58,-45.2"/>
<polygon fill="black" stroke="black" points="61.5,-45.2 58,-35.2 54.5,-45.2 61.5,-45.2"/>
<text text-anchor="middle" x="29" y="-39" font-family="Times,serif" font-size="14.00">Success</text>
</g>
<!-- fn_htab_lru_map_update_elem_EBUSY -->
<g id="node29" class="node">
<title>fn_htab_lru_map_update_elem_EBUSY</title>
<ellipse fill="lightgrey" stroke="black" cx="275.47" cy="-18" rx="79.89" ry="18"/>
<text text-anchor="middle" x="275.47" y="-14.3" font-family="Times,serif" font-size="14.00">return &#45;EBUSY</text>
</g>
<!-- fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem_EBUSY -->
<g id="edge31" class="edge">
<title>fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem_EBUSY</title>
<path fill="none" stroke="black" d="M330.78,-143.75C330.78,-143.75 330.78,-41.29 330.78,-41.29"/>
<polygon fill="black" stroke="black" points="334.28,-41.29 330.78,-31.29 327.28,-41.29 334.28,-41.29"/>
<text text-anchor="middle" x="261.78" y="-96.32" font-family="Times,serif" font-size="14.00">Hashtab lock failed</text>
</g>
<!-- fn_htab_lru_map_update_elem_EEXIST -->
<g id="node30" class="node">
<title>fn_htab_lru_map_update_elem_EEXIST</title>
<ellipse fill="lightgrey" stroke="black" cx="509.47" cy="-18" rx="81.79" ry="18"/>
<text text-anchor="middle" x="509.47" y="-14.3" font-family="Times,serif" font-size="14.00">return &#45;EEXIST</text>
</g>
<!-- fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem_EEXIST -->
<g id="edge32" class="edge">
<title>fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem_EEXIST</title>
<path fill="none" stroke="black" d="M450.83,-143.75C450.83,-143.75 450.83,-40.9 450.83,-40.9"/>
<polygon fill="black" stroke="black" points="454.33,-40.9 450.83,-30.9 447.33,-40.9 454.33,-40.9"/>
<text text-anchor="middle" x="520.33" y="-111.12" font-family="Times,serif" font-size="14.00">BPF_EXIST set and</text>
<text text-anchor="middle" x="520.33" y="-96.12" font-family="Times,serif" font-size="14.00">key already exists</text>
</g>
<!-- fn_htab_lru_map_update_elem_ENOENT -->
<g id="node31" class="node">
<title>fn_htab_lru_map_update_elem_ENOENT</title>
<ellipse fill="lightgrey" stroke="black" cx="752.47" cy="-18" rx="89.08" ry="18"/>
<text text-anchor="middle" x="752.47" y="-14.3" font-family="Times,serif" font-size="14.00">return &#45;ENOENT</text>
</g>
<!-- fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem_ENOENT -->
<g id="edge33" class="edge">
<title>fn_htab_lru_map_update_elem4&#45;&gt;fn_htab_lru_map_update_elem_ENOENT</title>
<path fill="none" stroke="black" d="M462.66,-157C569.73,-157 758.12,-157 758.12,-157 758.12,-157 758.12,-46.17 758.12,-46.17"/>
<polygon fill="black" stroke="black" points="761.62,-46.17 758.12,-36.17 754.62,-46.17 761.62,-46.17"/>
<text text-anchor="middle" x="692.62" y="-54.97" font-family="Times,serif" font-size="14.00">BPF_NOEXIST set</text>
<text text-anchor="middle" x="692.62" y="-39.97" font-family="Times,serif" font-size="14.00">and no such entry</text>
</g>
<!-- pad3 -->
<!-- fn_htab_lru_map_update_elem4&#45;&gt;pad3 -->
<!-- pad1 -->
<!-- pad0&#45;&gt;pad1 -->
<!-- pad2 -->
<!-- pad1&#45;&gt;pad2 -->
<!-- pad3&#45;&gt;fn_htab_lru_map_update_elem5 -->
<!-- pad3&#45;&gt;fn_htab_lru_map_update_elem_EBUSY -->
<!-- pad3&#45;&gt;fn_htab_lru_map_update_elem_EEXIST -->
<!-- pad3&#45;&gt;fn_htab_lru_map_update_elem_ENOENT -->
<!-- pad4&#45;&gt;local_freelist_check5 -->
</g>
</svg>
