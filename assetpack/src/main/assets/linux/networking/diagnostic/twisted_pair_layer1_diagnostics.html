<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Diagnostic Concept for Investigating Twisted Pair Ethernet Variants at OSI Layer 1 &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Distributed Switch Architecture" href="../dsa/index.html" />
    <link rel="prev" title="Networking Diagnostics" href="index.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.15.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#human-interfaces">Human interfaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../subsystem-apis.html#networking-interfaces">Networking interfaces</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/networking/diagnostic/twisted_pair_layer1_diagnostics.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="diagnostic-concept-for-investigating-twisted-pair-ethernet-variants-at-osi-layer-1">
<h1>Diagnostic Concept for Investigating Twisted Pair Ethernet Variants at OSI Layer 1<a class="headerlink" href="#diagnostic-concept-for-investigating-twisted-pair-ethernet-variants-at-osi-layer-1" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This documentation is designed for two primary audiences:</p>
<ol class="arabic simple">
<li><p><strong>Users and System Administrators</strong>: For those dealing with real-world
Ethernet issues, this guide provides a practical, step-by-step
troubleshooting flow to help identify and resolve common problems in Twisted
Pair Ethernet at OSI Layer 1. If you’re facing unstable links, speed drops,
or mysterious network issues, jump right into the step-by-step guide and
follow it through to find your solution.</p></li>
<li><p><strong>Kernel Developers</strong>: For developers working with network drivers and PHY
support, this documentation outlines the diagnostic process and highlights
areas where the Linux kernel’s diagnostic interfaces could be extended or
improved. By understanding the diagnostic flow, developers can better
prioritize future enhancements.</p></li>
</ol>
</section>
<section id="step-by-step-diagnostic-guide-from-linux-general-ethernet">
<h2>Step-by-Step Diagnostic Guide from Linux (General Ethernet)<a class="headerlink" href="#step-by-step-diagnostic-guide-from-linux-general-ethernet" title="Link to this heading">¶</a></h2>
<p>This diagnostic guide covers common Ethernet troubleshooting scenarios,
focusing on <strong>link stability and detection</strong> across different Ethernet
environments, including <strong>Single-Pair Ethernet (SPE)</strong> and <strong>Multi-Pair
Ethernet (MPE)</strong>, as well as power delivery technologies like <strong>PoDL</strong> (Power
over Data Line) and <strong>PoE</strong> (Clause 33 PSE).</p>
<p>The guide is designed to help users diagnose physical layer (Layer 1) issues on
systems running <strong>Linux kernel version 6.11 or newer</strong>, utilizing <strong>ethtool
version 6.10 or later</strong> and <strong>iproute2 version 6.4.0 or later</strong>.</p>
<p>In this guide, we assume that users may have <strong>limited or no access to the link
partner</strong> and will focus on diagnosing issues locally.</p>
<section id="diagnostic-scenarios">
<h3>Diagnostic Scenarios<a class="headerlink" href="#diagnostic-scenarios" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><strong>Link is up and stable, but no data transfer</strong>: If the link is stable but
there are issues with data transmission, refer to the <strong>OSI Layer 2
Troubleshooting Guide</strong>.</p></li>
<li><p><strong>Link is unstable</strong>: Link resets, speed drops, or other fluctuations
indicate potential issues at the hardware or physical layer.</p></li>
<li><p><strong>No link detected</strong>: The interface is up, but no link is established.</p></li>
</ul>
</section>
<section id="verify-interface-status">
<h3>Verify Interface Status<a class="headerlink" href="#verify-interface-status" title="Link to this heading">¶</a></h3>
<p>Begin by verifying the status of the Ethernet interface to check if it is
administratively up. Unlike <cite>ethtool</cite>, which provides information on the link
and PHY status, it does not show the <strong>administrative state</strong> of the interface.
To check this, you should use the <cite>ip</cite> command, which describes the interface
state within the angle brackets <cite>“&lt;&gt;”</cite> in its output.</p>
<p>For example, in the output <cite>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;</cite>, the important
keywords are:</p>
<ul class="simple">
<li><p><strong>UP</strong>: The interface is in the administrative “UP” state.</p></li>
<li><p><strong>NO-CARRIER</strong>: The interface is administratively up, but no physical link is
detected.</p></li>
</ul>
<p>If the output shows <cite>&lt;BROADCAST,MULTICAST&gt;</cite>, this indicates the interface is in
the administrative “DOWN” state.</p>
<ul>
<li><p><strong>Command:</strong> <cite>ip link show dev &lt;interface&gt;</cite></p></li>
<li><p><strong>Expected Output:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="m">4</span>:<span class="w"> </span>eth0:<span class="w"> </span>&lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt;<span class="w"> </span>mtu<span class="w"> </span><span class="m">1500</span><span class="w"> </span>...
<span class="w">   </span>link/ether<span class="w"> </span><span class="m">88</span>:14:2b:00:96:f2<span class="w"> </span>brd<span class="w"> </span>ff:ff:ff:ff:ff:ff
</pre></div>
</div>
</li>
<li><p><strong>Interpreting the Output:</strong></p>
<ul>
<li><p><strong>Administrative UP State</strong>:</p>
<ul class="simple">
<li><p>If the output contains <strong>“UP”</strong>, the interface is administratively up,
and the system is trying to establish a physical link.</p></li>
<li><p>If you also see <strong>“NO-CARRIER”</strong>, it means the physical link has not been
detected, indicating potential Layer 1 issues like a cable fault,
misconfiguration, or no connection at the link partner. In this case,
proceed to the <strong>Inspect Link Status and PHY Configuration</strong> section.</p></li>
</ul>
</li>
<li><p><strong>Administrative DOWN State</strong>:</p>
<ul>
<li><p>If the output lacks <strong>“UP”</strong> and shows only states like
<strong>“&lt;BROADCAST,MULTICAST&gt;”</strong>, it means the interface is administratively
down. In this case, bring the interface up using the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>dev<span class="w"> </span>&lt;interface&gt;<span class="w"> </span>up
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Next Steps</strong>:</p>
<ul class="simple">
<li><p>If the interface is <strong>administratively up</strong> but shows <strong>NO-CARRIER</strong>,
proceed to the <strong>Inspect Link Status and PHY Configuration</strong> section to
troubleshoot potential physical layer issues.</p></li>
<li><p>If the interface was <strong>administratively down</strong> and you have brought it up,
ensure to <strong>repeat this verification step</strong> to confirm the new state of the
interface before proceeding</p></li>
<li><p><strong>If the interface is up and the link is detected</strong>:</p>
<ul>
<li><p>If the output shows <strong>“UP”</strong> and there is <strong>no `NO-CARRIER`</strong>, the
interface is administratively up, and the physical link has been
successfully established. If everything is working as expected, the Layer
1 diagnostics are complete, and no further action is needed.</p></li>
<li><p>If the interface is up and the link is detected but <strong>no data is being
transferred</strong>, the issue is likely beyond Layer 1, and you should proceed
with diagnosing the higher layers of the OSI model. This may involve
checking Layer 2 configurations (such as VLANs or MAC address issues),
Layer 3 settings (like IP addresses, routing, or ARP), or Layer 4 and
above (firewalls, services, etc.).</p></li>
<li><p>If the <strong>link is unstable</strong> or <strong>frequently resetting or dropping</strong>, this
may indicate a physical layer issue such as a faulty cable, interference,
or power delivery problems. In this case, proceed with the next step in
this guide.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="inspect-link-status-and-phy-configuration">
<h3>Inspect Link Status and PHY Configuration<a class="headerlink" href="#inspect-link-status-and-phy-configuration" title="Link to this heading">¶</a></h3>
<p>Use <cite>ethtool -I</cite> to check the link status, PHY configuration, supported link
modes, and additional statistics such as the <strong>Link Down Events</strong> counter. This
step is essential for diagnosing Layer 1 problems such as speed mismatches,
duplex issues, and link instability.</p>
<p>For both <strong>Single-Pair Ethernet (SPE)</strong> and <strong>Multi-Pair Ethernet (MPE)</strong>
devices, you will use this step to gather key details about the link. <strong>SPE</strong>
links generally support a single speed and mode without autonegotiation (with
the exception of <strong>10BaseT1L</strong>), while <strong>MPE</strong> devices typically support
multiple link modes and autonegotiation.</p>
<ul>
<li><p><strong>Command:</strong> <cite>ethtool -I &lt;interface&gt;</cite></p></li>
<li><p><strong>Example Output for SPE Interface (Non-autonegotiation)</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Settings<span class="w"> </span><span class="k">for</span><span class="w"> </span>spe4:
<span class="w">    </span>Supported<span class="w"> </span>ports:<span class="w"> </span><span class="o">[</span><span class="w"> </span>TP<span class="w"> </span><span class="o">]</span>
<span class="w">    </span>Supported<span class="w"> </span>link<span class="w"> </span>modes:<span class="w">   </span>100baseT1/Full
<span class="w">    </span>Supported<span class="w"> </span>pause<span class="w"> </span>frame<span class="w"> </span>use:<span class="w"> </span>No
<span class="w">    </span>Supports<span class="w"> </span>auto-negotiation:<span class="w"> </span>No
<span class="w">    </span>Supported<span class="w"> </span>FEC<span class="w"> </span>modes:<span class="w"> </span>Not<span class="w"> </span>reported
<span class="w">    </span>Advertised<span class="w"> </span>link<span class="w"> </span>modes:<span class="w"> </span>Not<span class="w"> </span>applicable
<span class="w">    </span>Advertised<span class="w"> </span>pause<span class="w"> </span>frame<span class="w"> </span>use:<span class="w"> </span>No
<span class="w">    </span>Advertised<span class="w"> </span>auto-negotiation:<span class="w"> </span>No
<span class="w">    </span>Advertised<span class="w"> </span>FEC<span class="w"> </span>modes:<span class="w"> </span>Not<span class="w"> </span>reported
<span class="w">    </span>Speed:<span class="w"> </span>100Mb/s
<span class="w">    </span>Duplex:<span class="w"> </span>Full
<span class="w">    </span>Auto-negotiation:<span class="w"> </span>off
<span class="w">    </span>master-slave<span class="w"> </span>cfg:<span class="w"> </span>forced<span class="w"> </span>slave
<span class="w">    </span>master-slave<span class="w"> </span>status:<span class="w"> </span>slave
<span class="w">    </span>Port:<span class="w"> </span>Twisted<span class="w"> </span>Pair
<span class="w">    </span>PHYAD:<span class="w"> </span><span class="m">6</span>
<span class="w">    </span>Transceiver:<span class="w"> </span>external
<span class="w">    </span>MDI-X:<span class="w"> </span>Unknown
<span class="w">    </span>Supports<span class="w"> </span>Wake-on:<span class="w"> </span>d
<span class="w">    </span>Wake-on:<span class="w"> </span>d
<span class="w">    </span>Link<span class="w"> </span>detected:<span class="w"> </span>yes
<span class="w">    </span>SQI:<span class="w"> </span><span class="m">7</span>/7
<span class="w">    </span>Link<span class="w"> </span>Down<span class="w"> </span>Events:<span class="w"> </span><span class="m">2</span>
</pre></div>
</div>
</li>
<li><p><strong>Example Output for MPE Interface (Autonegotiation)</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Settings<span class="w"> </span><span class="k">for</span><span class="w"> </span>eth1:
<span class="w">    </span>Supported<span class="w"> </span>ports:<span class="w"> </span><span class="o">[</span><span class="w"> </span>TP<span class="w">    </span>MII<span class="w"> </span><span class="o">]</span>
<span class="w">    </span>Supported<span class="w"> </span>link<span class="w"> </span>modes:<span class="w">   </span>10baseT/Half<span class="w"> </span>10baseT/Full
<span class="w">                            </span>100baseT/Half<span class="w"> </span>100baseT/Full
<span class="w">    </span>Supported<span class="w"> </span>pause<span class="w"> </span>frame<span class="w"> </span>use:<span class="w"> </span>Symmetric<span class="w"> </span>Receive-only
<span class="w">    </span>Supports<span class="w"> </span>auto-negotiation:<span class="w"> </span>Yes
<span class="w">    </span>Supported<span class="w"> </span>FEC<span class="w"> </span>modes:<span class="w"> </span>Not<span class="w"> </span>reported
<span class="w">    </span>Advertised<span class="w"> </span>link<span class="w"> </span>modes:<span class="w">  </span>10baseT/Half<span class="w"> </span>10baseT/Full
<span class="w">                            </span>100baseT/Half<span class="w"> </span>100baseT/Full
<span class="w">    </span>Advertised<span class="w"> </span>pause<span class="w"> </span>frame<span class="w"> </span>use:<span class="w"> </span>Symmetric<span class="w"> </span>Receive-only
<span class="w">    </span>Advertised<span class="w"> </span>auto-negotiation:<span class="w"> </span>Yes
<span class="w">    </span>Advertised<span class="w"> </span>FEC<span class="w"> </span>modes:<span class="w"> </span>Not<span class="w"> </span>reported
<span class="w">    </span>Link<span class="w"> </span>partner<span class="w"> </span>advertised<span class="w"> </span>link<span class="w"> </span>modes:<span class="w">  </span>10baseT/Half<span class="w"> </span>10baseT/Full
<span class="w">                                         </span>100baseT/Half<span class="w"> </span>100baseT/Full
<span class="w">    </span>Link<span class="w"> </span>partner<span class="w"> </span>advertised<span class="w"> </span>pause<span class="w"> </span>frame<span class="w"> </span>use:<span class="w"> </span>Symmetric<span class="w"> </span>Receive-only
<span class="w">    </span>Link<span class="w"> </span>partner<span class="w"> </span>advertised<span class="w"> </span>auto-negotiation:<span class="w"> </span>Yes
<span class="w">    </span>Link<span class="w"> </span>partner<span class="w"> </span>advertised<span class="w"> </span>FEC<span class="w"> </span>modes:<span class="w"> </span>Not<span class="w"> </span>reported
<span class="w">    </span>Speed:<span class="w"> </span>100Mb/s
<span class="w">    </span>Duplex:<span class="w"> </span>Full
<span class="w">    </span>Auto-negotiation:<span class="w"> </span>on
<span class="w">    </span>Port:<span class="w"> </span>Twisted<span class="w"> </span>Pair
<span class="w">    </span>PHYAD:<span class="w"> </span><span class="m">10</span>
<span class="w">    </span>Transceiver:<span class="w"> </span>internal
<span class="w">    </span>MDI-X:<span class="w"> </span>Unknown
<span class="w">    </span>Supports<span class="w"> </span>Wake-on:<span class="w"> </span>pg
<span class="w">    </span>Wake-on:<span class="w"> </span>p
<span class="w">    </span>Link<span class="w"> </span>detected:<span class="w"> </span>yes
<span class="w">    </span>Link<span class="w"> </span>Down<span class="w"> </span>Events:<span class="w"> </span><span class="m">1</span>
</pre></div>
</div>
</li>
<li><p><strong>Next Steps</strong>:</p>
<ul class="simple">
<li><p>Record the output provided by <cite>ethtool</cite>, particularly noting the
<strong>master-slave status</strong>, <strong>speed</strong>, <strong>duplex</strong>, and other relevant fields.
This information will be useful for further analysis or troubleshooting.
Once the <strong>ethtool</strong> output has been collected and stored, move on to the
next diagnostic step.</p></li>
</ul>
</li>
</ul>
</section>
<section id="check-power-delivery-podl-or-poe">
<h3>Check Power Delivery (PoDL or PoE)<a class="headerlink" href="#check-power-delivery-podl-or-poe" title="Link to this heading">¶</a></h3>
<p>If it is known that <strong>PoDL</strong> or <strong>PoE</strong> is <strong>not implemented</strong> on the system,
or the <strong>PSE</strong> (Power Sourcing Equipment) is managed by proprietary user-space
software or external tools, you can skip this step. In such cases, verify power
delivery through alternative methods, such as checking hardware indicators
(LEDs), using multimeters, or consulting vendor-specific software for
monitoring power status.</p>
<p>If <strong>PoDL</strong> or <strong>PoE</strong> is implemented and managed directly by Linux, follow
these steps to ensure power is being delivered correctly:</p>
<ul>
<li><p><strong>Command:</strong> <cite>ethtool --show-pse &lt;interface&gt;</cite></p></li>
<li><p><strong>Expected Output Examples</strong>:</p>
<ol class="arabic">
<li><p><strong>PSE Not Supported</strong>:</p>
<p>If no PSE is attached or the interface does not support PSE, the following
output is expected:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>netlink<span class="w"> </span>error:<span class="w"> </span>No<span class="w"> </span>PSE<span class="w"> </span>is<span class="w"> </span>attached
netlink<span class="w"> </span>error:<span class="w"> </span>Operation<span class="w"> </span>not<span class="w"> </span>supported
</pre></div>
</div>
</li>
<li><p><strong>PoDL (Single-Pair Ethernet)</strong>:</p>
<p>When PoDL is implemented, you might see the following attributes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>PSE<span class="w"> </span>attributes<span class="w"> </span><span class="k">for</span><span class="w"> </span>eth1:
PoDL<span class="w"> </span>PSE<span class="w"> </span>Admin<span class="w"> </span>State:<span class="w"> </span>enabled
PoDL<span class="w"> </span>PSE<span class="w"> </span>Power<span class="w"> </span>Detection<span class="w"> </span>Status:<span class="w"> </span>delivering<span class="w"> </span>power
</pre></div>
</div>
</li>
<li><p><strong>PoE (Clause 33 PSE)</strong>:</p>
<p>For standard PoE, the output may look like this:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>PSE<span class="w"> </span>attributes<span class="w"> </span><span class="k">for</span><span class="w"> </span>eth1:
Clause<span class="w"> </span><span class="m">33</span><span class="w"> </span>PSE<span class="w"> </span>Admin<span class="w"> </span>State:<span class="w"> </span>enabled
Clause<span class="w"> </span><span class="m">33</span><span class="w"> </span>PSE<span class="w"> </span>Power<span class="w"> </span>Detection<span class="w"> </span>Status:<span class="w"> </span>delivering<span class="w"> </span>power
Clause<span class="w"> </span><span class="m">33</span><span class="w"> </span>PSE<span class="w"> </span>Available<span class="w"> </span>Power<span class="w"> </span>Limit:<span class="w"> </span><span class="m">18000</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p><strong>Adjust Power Limit (if needed)</strong>:</p>
<ul>
<li><p>Sometimes, the available power limit may not be sufficient for the link
partner. You can increase the power limit as needed.</p></li>
<li><p><strong>Command:</strong> <cite>ethtool --set-pse &lt;interface&gt; c33-pse-avail-pw-limit &lt;limit&gt;</cite></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>--set-pse<span class="w"> </span>eth1<span class="w"> </span>c33-pse-avail-pw-limit<span class="w"> </span><span class="m">18000</span>
ethtool<span class="w"> </span>--show-pse<span class="w"> </span>eth1
</pre></div>
</div>
<p><strong>Expected Output</strong> after adjusting the power limit:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Clause<span class="w"> </span><span class="m">33</span><span class="w"> </span>PSE<span class="w"> </span>Available<span class="w"> </span>Power<span class="w"> </span>Limit:<span class="w"> </span><span class="m">18000</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p><strong>Next Steps</strong>:</p>
<ul>
<li><p><strong>PoE or PoDL Not Used</strong>: If <strong>PoE</strong> or <strong>PoDL</strong> is not implemented or used
on the system, proceed to the next diagnostic step, as power delivery is
not relevant for this setup.</p></li>
<li><p><strong>PoE or PoDL Controlled Externally</strong>: If <strong>PoE</strong> or <strong>PoDL</strong> is used but
is not managed by the Linux kernel’s <strong>PSE-PD</strong> framework (i.e., it is
controlled by proprietary user-space software or external tools), this part
is out of scope for this documentation. Please consult vendor-specific
documentation or external tools for monitoring and managing power delivery.</p></li>
<li><p><strong>PSE Admin State Disabled</strong>:</p>
<ul>
<li><p>If the <cite>PSE Admin State:</cite> is <strong>disabled</strong>, enable it by running one of
the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>--set-pse<span class="w"> </span>&lt;devname&gt;<span class="w"> </span>podl-pse-admin-control<span class="w"> </span><span class="nb">enable</span>
</pre></div>
</div>
<p>or, for Clause 33 PSE (PoE):</p>
<blockquote>
<div><p>ethtool --set-pse &lt;devname&gt; c33-pse-admin-control enable</p>
</div></blockquote>
</li>
<li><p>After enabling the PSE Admin State, return to the start of the <strong>Check
Power Delivery (PoDL or PoE)</strong> step to recheck the power delivery status.</p></li>
</ul>
</li>
<li><p><strong>Power Not Delivered</strong>: If the <cite>Power Detection Status</cite> shows something
other than “delivering power” (e.g., <cite>over current</cite>), troubleshoot the
<strong>PSE</strong>. Check for potential issues such as a short circuit in the cable,
insufficient power delivery, or a fault in the PSE itself.</p></li>
<li><p><strong>Power Delivered but No Link</strong>: If power is being delivered but no link is
established, proceed with further diagnostics by performing <strong>Cable
Diagnostics</strong> or reviewing the <strong>Inspect Link Status and PHY
Configuration</strong> steps to identify any underlying issues with the physical
link or settings.</p></li>
</ul>
</li>
</ul>
</section>
<section id="cable-diagnostics">
<h3>Cable Diagnostics<a class="headerlink" href="#cable-diagnostics" title="Link to this heading">¶</a></h3>
<p>Use <cite>ethtool</cite> to test for physical layer issues such as cable faults. The test
results can vary depending on the cable’s condition, the technology in use, and
the state of the link partner. The results from the cable test will help in
diagnosing issues like open circuits, shorts, impedance mismatches, and
noise-related problems.</p>
<ul class="simple">
<li><p><strong>Command:</strong> <cite>ethtool --cable-test &lt;interface&gt;</cite></p></li>
</ul>
<p>The following are the typical outputs for <strong>Single-Pair Ethernet (SPE)</strong> and
<strong>Multi-Pair Ethernet (MPE)</strong>:</p>
<ul>
<li><p><strong>For Single-Pair Ethernet (SPE)</strong>:
- <strong>Expected Output (SPE)</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Cable<span class="w"> </span><span class="nb">test</span><span class="w"> </span>completed<span class="w"> </span><span class="k">for</span><span class="w"> </span>device<span class="w"> </span>eth1.
Pair<span class="w"> </span>A,<span class="w"> </span>fault<span class="w"> </span>length:<span class="w"> </span><span class="m">25</span>.00m
Pair<span class="w"> </span>A<span class="w"> </span>code<span class="w"> </span>Open<span class="w"> </span>Circuit
</pre></div>
</div>
<p>This indicates an open circuit or cable fault at the reported distance, but
results can be influenced by the link partner’s state. Refer to the
<strong>“Troubleshooting Based on Cable Test Results”</strong> section for further
interpretation of these results.</p>
</li>
<li><p><strong>For Multi-Pair Ethernet (MPE)</strong>:
- <strong>Expected Output (MPE)</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Cable<span class="w"> </span><span class="nb">test</span><span class="w"> </span>completed<span class="w"> </span><span class="k">for</span><span class="w"> </span>device<span class="w"> </span>eth0.
Pair<span class="w"> </span>A<span class="w"> </span>code<span class="w"> </span>OK
Pair<span class="w"> </span>B<span class="w"> </span>code<span class="w"> </span>OK
Pair<span class="w"> </span>C<span class="w"> </span>code<span class="w"> </span>Open<span class="w"> </span>Circuit
</pre></div>
</div>
<p>Here, Pair C is reported as having an open circuit, while Pairs A and B are
functioning correctly. However, if autonegotiation is in use on Pairs A and
B, the cable test may be disrupted. Refer to the <strong>“Troubleshooting Based on
Cable Test Results”</strong> section for a detailed explanation of these issues and
how to resolve them.</p>
</li>
</ul>
<p>For detailed descriptions of the different possible cable test results, please
refer to the <strong>“Troubleshooting Based on Cable Test Results”</strong> section.</p>
<section id="troubleshooting-based-on-cable-test-results">
<h4>Troubleshooting Based on Cable Test Results<a class="headerlink" href="#troubleshooting-based-on-cable-test-results" title="Link to this heading">¶</a></h4>
<p>After running the cable test, the results can help identify specific issues in
the physical connection. However, it is important to note that <strong>cable testing
results heavily depend on the capabilities and characteristics of both the
local hardware and the link partner</strong>. The accuracy and reliability of the
results can vary significantly between different hardware implementations.</p>
<p>In some cases, this can introduce <strong>blind spots</strong> in the current cable testing
implementation, where certain results may not accurately reflect the actual
physical state of the cable. For example:</p>
<ul class="simple">
<li><p>An <strong>Open Circuit</strong> result might not only indicate a damaged or disconnected
cable but also occur if the cable is properly attached to a powered-down link
partner.</p></li>
<li><p>Some PHYs may report a <strong>Short within Pair</strong> if the link partner is in
<strong>forced slave mode</strong>, even though there is no actual short in the cable.</p></li>
</ul>
<p>To help users interpret the results more effectively, it could be beneficial to
extend the <strong>kernel UAPI</strong> (User API) to provide additional context or
<strong>possible variants</strong> of issues based on the hardware’s characteristics. Since
these quirks are often hardware-specific, the <strong>kernel driver</strong> would be an
ideal source of such information. By providing flags or hints related to
potential false positives for each test result, users would have a better
understanding of what to verify and where to investigate further.</p>
<p>Until such improvements are made, users should be aware of these limitations
and manually verify cable issues as needed. Physical inspections may help
resolve uncertainties related to false positive results.</p>
<p>The results can be one of the following:</p>
<ul class="simple">
<li><p><strong>OK</strong>:</p>
<ul>
<li><p>The cable is functioning correctly, and no issues were detected.</p></li>
<li><p><strong>Next Steps</strong>: If you are still experiencing issues, it might be related
to higher-layer problems, such as duplex mismatches or speed negotiation,
which are not physical-layer issues.</p></li>
<li><p><strong>Special Case for `BaseT1` (1000/100/10BaseT1)</strong>: In <cite>BaseT1</cite> systems, an
“OK” result typically also means that the link is up and likely in <strong>slave
mode</strong>, since cable tests usually only pass in this mode. For some
<strong>10BaseT1L</strong> PHYs, an “OK” result may occur even if the cable is too long
for the PHY’s configured range (for example, when the range is configured
for short-distance mode).</p></li>
</ul>
</li>
<li><p><strong>Open Circuit</strong>:</p>
<ul>
<li><p>An <strong>Open Circuit</strong> result typically indicates that the cable is damaged or
disconnected at the reported fault length. Consider these possibilities:</p>
<ul>
<li><p>If the link partner is in <strong>admin down</strong> state or powered off, you might
still get an “Open Circuit” result even if the cable is functional.</p></li>
<li><p><strong>Next Steps</strong>: Inspect the cable at the fault length for visible damage
or loose connections. Verify the link partner is powered on and in the
correct mode.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Short within Pair</strong>:</p>
<ul>
<li><p>A <strong>Short within Pair</strong> indicates an unintended connection within the same
pair of wires, typically caused by physical damage to the cable.</p>
<ul>
<li><p><strong>Next Steps</strong>: Replace or repair the cable and check for any physical
damage or improperly crimped connectors.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Short to Another Pair</strong>:</p>
<ul>
<li><p>A <strong>Short to Another Pair</strong> means the wires from different pairs are
shorted, which could occur due to physical damage or incorrect wiring.</p>
<ul>
<li><p><strong>Next Steps</strong>: Replace or repair the damaged cable. Inspect the cable for
incorrect terminations or pinched wiring.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Impedance Mismatch</strong>:</p>
<ul>
<li><p><strong>Impedance Mismatch</strong> indicates a reflection caused by an impedance
discontinuity in the cable. This can happen when a part of the cable has
abnormal impedance (e.g., when different cable types are spliced together
or when there is a defect in the cable).</p>
<ul>
<li><p><strong>Next Steps</strong>: Check the cable quality and ensure consistent impedance
throughout its length. Replace any sections of the cable that do not meet
specifications.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Noise</strong>:</p>
<ul>
<li><p><strong>Noise</strong> means that the Time Domain Reflectometry (TDR) test could not
complete due to excessive noise on the cable, which can be caused by
interference from electromagnetic sources.</p>
<ul>
<li><p><strong>Next Steps</strong>: Identify and eliminate sources of electromagnetic
interference (EMI) near the cable. Consider using shielded cables or
rerouting the cable away from noise sources.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Resolution Not Possible</strong>:</p>
<ul>
<li><p><strong>Resolution Not Possible</strong> means that the TDR test could not detect the
issue due to the resolution limitations of the test or because the fault is
beyond the distance that the test can measure.</p>
<ul>
<li><p><strong>Next Steps</strong>: Inspect the cable manually if possible, or use alternative
diagnostic tools that can handle greater distances or higher resolution.</p></li>
</ul>
</li>
</ul>
</li>
<li><p><strong>Unknown</strong>:</p>
<ul>
<li><p>An <strong>Unknown</strong> result may occur when the test cannot classify the fault or
when a specific issue is outside the scope of the tool’s detection
capabilities.</p>
<ul>
<li><p><strong>Next Steps</strong>: Re-run the test, verify the link partner’s state, and inspect
the cable manually if necessary.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
</section>
<section id="verify-link-partner-phy-configuration">
<h3>Verify Link Partner PHY Configuration<a class="headerlink" href="#verify-link-partner-phy-configuration" title="Link to this heading">¶</a></h3>
<p>If the cable test passes but the link is still not functioning correctly, it’s
essential to verify the configuration of the link partner’s PHY. Mismatches in
speed, duplex settings, or master-slave roles can cause connection issues.</p>
<section id="autonegotiation-mismatch">
<h4>Autonegotiation Mismatch<a class="headerlink" href="#autonegotiation-mismatch" title="Link to this heading">¶</a></h4>
<ul>
<li><p>If both link partners support autonegotiation, ensure that autonegotiation is
enabled on both sides and that all supported link modes are advertised. A
mismatch can lead to connectivity problems or sub optimal performance.</p></li>
<li><p><strong>Quick Fix:</strong> Reset autonegotiation to the default settings, which will
advertise all default link modes:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>-s<span class="w"> </span>&lt;interface&gt;<span class="w"> </span>autoneg<span class="w"> </span>on
</pre></div>
</div>
</li>
<li><p><strong>Command to check configuration:</strong> <cite>ethtool &lt;interface&gt;</cite></p></li>
<li><p><strong>Expected Output:</strong> Ensure that both sides advertise compatible link modes.
If autonegotiation is off, verify that both link partners are configured for
the same speed and duplex.</p>
<p>The following example shows a case where the local PHY advertises fewer link
modes than it supports. This will reduce the number of overlapping link modes
with the link partner. In the worst case, there will be no common link modes,
and the link will not be created:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Settings<span class="w"> </span><span class="k">for</span><span class="w"> </span>eth0:
<span class="w">   </span>Supported<span class="w"> </span>link<span class="w"> </span>modes:<span class="w">  </span>1000baseT/Full,<span class="w"> </span>100baseT/Full
<span class="w">   </span>Advertised<span class="w"> </span>link<span class="w"> </span>modes:<span class="w"> </span>1000baseT/Full
<span class="w">   </span>Speed:<span class="w"> </span>1000Mb/s
<span class="w">   </span>Duplex:<span class="w"> </span>Full
<span class="w">   </span>Auto-negotiation:<span class="w"> </span>on
</pre></div>
</div>
</li>
</ul>
</section>
<section id="combined-mode-mismatch-autonegotiation-on-one-side-forced-on-the-other">
<h4>Combined Mode Mismatch (Autonegotiation on One Side, Forced on the Other)<a class="headerlink" href="#combined-mode-mismatch-autonegotiation-on-one-side-forced-on-the-other" title="Link to this heading">¶</a></h4>
<ul>
<li><p>One possible issue occurs when one side is using <strong>autonegotiation</strong> (as in
most modern systems), and the other side is set to a <strong>forced link mode</strong>
(e.g., older hardware with single-speed hubs). In such cases, modern PHYs
will attempt to detect the forced mode on the other side. If the link is
established, you may notice:</p>
<ul class="simple">
<li><p><strong>No or empty “Link partner advertised link modes”</strong>.</p></li>
<li><p><strong>“Link partner advertised auto-negotiation:”</strong> will be <strong>“no”</strong> or not
present.</p></li>
</ul>
</li>
<li><p>This type of detection does not always work reliably:</p>
<ul class="simple">
<li><p>Typically, the modern PHY will default to <strong>Half Duplex</strong>, even if the link
partner is actually configured for <strong>Full Duplex</strong>.</p></li>
<li><p>Some PHYs may not work reliably if the link partner switches from one
forced mode to another. In this case, only a down/up cycle may help.</p></li>
</ul>
</li>
<li><p><strong>Next Steps</strong>: Set both sides to the same fixed speed and duplex mode to
avoid potential detection issues.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>-s<span class="w"> </span>&lt;interface&gt;<span class="w"> </span>speed<span class="w"> </span><span class="m">1000</span><span class="w"> </span>duplex<span class="w"> </span>full<span class="w"> </span>autoneg<span class="w"> </span>off
</pre></div>
</div>
</li>
</ul>
</section>
<section id="master-slave-role-mismatch-baset1-and-1000baset-phys">
<h4>Master/Slave Role Mismatch (BaseT1 and 1000BaseT PHYs)<a class="headerlink" href="#master-slave-role-mismatch-baset1-and-1000baset-phys" title="Link to this heading">¶</a></h4>
<ul>
<li><p>In <strong>BaseT1</strong> systems (e.g., 1000BaseT1, 100BaseT1), link establishment
requires that one device is configured as <strong>master</strong> and the other as
<strong>slave</strong>. A mismatch in this master-slave configuration can prevent the link
from being established. However, <strong>1000BaseT</strong> also supports configurable
master/slave roles and can face similar issues.</p></li>
<li><p><strong>Role Preference in 1000BaseT</strong>: The <strong>1000BaseT</strong> specification allows link
partners to negotiate master-slave roles or role preferences during
autonegotiation. Some PHYs have hardware limitations or bugs that prevent
them from functioning properly in certain roles. In such cases, drivers may
force these PHYs into a specific role (e.g., <strong>forced master</strong> or <strong>forced
slave</strong>) or try a weaker option by setting preferences. If both link partners
have the same issue and are forced into the same mode (e.g., both forced into
master mode), they will not be able to establish a link.</p></li>
<li><p><strong>Next Steps</strong>: Ensure that one side is configured as <strong>master</strong> and the
other as <strong>slave</strong> to avoid this issue, particularly when hardware
limitations are involved, or try the weaker <strong>preferred</strong> option instead of
<strong>forced</strong>. Check for any driver-related restrictions or forced modes.</p></li>
<li><p><strong>Command to force master/slave mode</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>-s<span class="w"> </span>&lt;interface&gt;<span class="w"> </span>master-slave<span class="w"> </span>forced-master
</pre></div>
</div>
<p>or:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>-s<span class="w"> </span>&lt;interface&gt;<span class="w"> </span>master-slave<span class="w"> </span>forced-master<span class="w"> </span>speed<span class="w"> </span><span class="m">1000</span><span class="w"> </span>duplex<span class="w"> </span>full<span class="w"> </span>autoneg<span class="w"> </span>off
</pre></div>
</div>
</li>
<li><p><strong>Check the current master/slave status</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>&lt;interface&gt;
</pre></div>
</div>
<p>Example Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>master-slave<span class="w"> </span>cfg:<span class="w"> </span>forced-master
master-slave<span class="w"> </span>status:<span class="w"> </span>master
</pre></div>
</div>
</li>
<li><p><strong>Hardware Bugs and Driver Forcing</strong>: If a known hardware issue forces the
PHY into a specific mode, it’s essential to check the driver source code or
hardware documentation for details. Ensure that the roles are compatible
across both link partners, and if both PHYs are forced into the same mode,
adjust one side accordingly to resolve the mismatch.</p></li>
</ul>
</section>
</section>
<section id="monitor-link-resets-and-speed-drops">
<h3>Monitor Link Resets and Speed Drops<a class="headerlink" href="#monitor-link-resets-and-speed-drops" title="Link to this heading">¶</a></h3>
<p>If the link is unstable, showing frequent resets or speed drops, this may
indicate issues with the cable, PHY configuration, or environmental factors.
While there is still no completely unified way in Linux to directly monitor
downshift events or link speed changes via user space tools, both the Linux
kernel logs and <cite>ethtool</cite> can provide valuable insights, especially if the
driver supports reporting such events.</p>
<ul>
<li><p><strong>Monitor Kernel Logs for Link Resets and Speed Drops</strong>:</p>
<ul>
<li><p>The Linux kernel will print link status changes, including downshift
events, in the system logs. These messages typically include speed changes,
duplex mode, and downshifted link speed (if the driver supports it).</p></li>
<li><p><strong>Command to monitor kernel logs in real-time:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>dmesg<span class="w"> </span>-w<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;Link is Up\|Link is Down&quot;</span>
</pre></div>
</div>
</li>
<li><p>Example Output (if a downshift occurs):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>eth0:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Up<span class="w"> </span>-<span class="w"> </span>100Mbps/Full<span class="w"> </span><span class="o">(</span>downshifted<span class="o">)</span><span class="w"> </span>-<span class="w"> </span>flow<span class="w"> </span>control<span class="w"> </span>rx/tx
eth0:<span class="w"> </span>Link<span class="w"> </span>is<span class="w"> </span>Down
</pre></div>
</div>
<p>This indicates that the link has been established but has downshifted from
a higher speed.</p>
</li>
<li><p><strong>Note</strong>: Not all drivers or PHYs support downshift reporting, so you may
not see this information for all devices.</p></li>
</ul>
</li>
<li><p><strong>Monitor Link Down Events Using `ethtool`</strong>:</p>
<ul>
<li><p>Starting with the latest kernel and <cite>ethtool</cite> versions, you can track
<strong>Link Down Events</strong> using the <cite>ethtool -I</cite> command. This will provide
counters for link drops, helping to diagnose link instability issues if
supported by the driver.</p></li>
<li><p><strong>Command to monitor link down events:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>-I<span class="w"> </span>&lt;interface&gt;
</pre></div>
</div>
</li>
<li><p>Example Output (if supported):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>PSE<span class="w"> </span>attributes<span class="w"> </span><span class="k">for</span><span class="w"> </span>eth1:
Link<span class="w"> </span>Down<span class="w"> </span>Events:<span class="w"> </span><span class="m">5</span>
</pre></div>
</div>
<p>This indicates that the link has dropped 5 times. Frequent link down events
may indicate cable or environmental issues that require further
investigation.</p>
</li>
</ul>
</li>
<li><p><strong>Check Link Status and Speed</strong>:</p>
<ul>
<li><p>Even though downshift counts or events are not easily tracked, you can
still use <cite>ethtool</cite> to manually check the current link speed and status.</p></li>
<li><p><strong>Command:</strong> <cite>ethtool &lt;interface&gt;</cite></p></li>
<li><p><strong>Expected Output:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Speed:<span class="w"> </span>1000Mb/s
Duplex:<span class="w"> </span>Full
Auto-negotiation:<span class="w"> </span>on
Link<span class="w"> </span>detected:<span class="w"> </span>yes
</pre></div>
</div>
<p>Any inconsistencies in the expected speed or duplex setting could indicate
an issue.</p>
</li>
</ul>
</li>
<li><p><strong>Disable Energy-Efficient Ethernet (EEE) for Diagnostics</strong>:</p>
<ul>
<li><p><strong>EEE</strong> (Energy-Efficient Ethernet) can be a source of link instability due
to transitions in and out of low-power states. For diagnostic purposes, it
may be useful to <strong>temporarily</strong> disable EEE to determine if it is
contributing to link instability. This is <strong>not a generic recommendation</strong>
for disabling power management.</p></li>
<li><p><strong>Next Steps</strong>: Disable EEE and monitor if the link becomes stable. If
disabling EEE resolves the issue, report the bug so that the driver can be
fixed.</p></li>
<li><p><strong>Command:</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ethtool<span class="w"> </span>--set-eee<span class="w"> </span>&lt;interface&gt;<span class="w"> </span>eee<span class="w"> </span>off
</pre></div>
</div>
</li>
<li><p><strong>Important</strong>: If disabling EEE resolves the instability, the issue should
be reported to the maintainers as a bug, and the driver should be corrected
to handle EEE properly without causing instability. Disabling EEE
permanently should not be seen as a solution.</p></li>
</ul>
</li>
<li><p><strong>Monitor Error Counters</strong>:</p>
<ul>
<li><p>Use <cite>ethtool -S &lt;interface&gt; --all-groups</cite> to retrieve standardized interface
statistics if the driver supports the unified interface:</p></li>
<li><p><strong>Command:</strong> <cite>ethtool -S &lt;interface&gt; --all-groups</cite></p></li>
<li><p><strong>Example Output (if supported)</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>phydev-RxFrames:<span class="w"> </span><span class="m">100391</span>
phydev-RxErrors:<span class="w"> </span><span class="m">0</span>
phydev-TxFrames:<span class="w"> </span><span class="m">9</span>
phydev-TxErrors:<span class="w"> </span><span class="m">0</span>
</pre></div>
</div>
</li>
<li><p>If the unified interface is not supported, use <cite>ethtool -S &lt;interface&gt;</cite> to
retrieve MAC and PHY counters. Note that non-standardized PHY counter names
vary by driver and must be interpreted accordingly:</p></li>
<li><p><strong>Command:</strong> <cite>ethtool -S &lt;interface&gt;</cite></p></li>
<li><p><strong>Example Output (if supported)</strong>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>rx_crc_errors:<span class="w"> </span><span class="m">123</span>
tx_errors:<span class="w"> </span><span class="m">45</span>
rx_frame_errors:<span class="w"> </span><span class="m">78</span>
</pre></div>
</div>
</li>
<li><p><strong>Note</strong>: If no meaningful error counters are available or if counters are
not supported, you may need to rely on physical inspections (e.g., cable
condition) or kernel log messages (e.g., link up/down events) to further
diagnose the issue.</p></li>
<li><p><strong>Compare Counters</strong>:</p>
<ul class="simple">
<li><p>Compare the egress and ingress frame counts reported by the PHY and MAC.</p></li>
<li><p>A small difference may occur due to sampling rate differences between the
MAC and PHY drivers, or if the PHY and MAC are not always fully
synchronized in their UP or DOWN states.</p></li>
<li><p>Significant discrepancies indicate potential issues in the data path
between the MAC and PHY.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="when-all-else-fails">
<h3>When All Else Fails...<a class="headerlink" href="#when-all-else-fails" title="Link to this heading">¶</a></h3>
<p>So you’ve checked the cables, monitored the logs, disabled EEE, and still...
nothing? Don’t worry, you’re not alone. Sometimes, Ethernet gremlins just don’t
want to cooperate.</p>
<p>But before you throw in the towel (or the Ethernet cable), take a deep breath.
It’s always possible that:</p>
<ol class="arabic simple">
<li><p>Your PHY has a unique, undocumented personality.</p></li>
<li><p>The problem is lying dormant, waiting for just the right moment to magically
resolve itself (hey, it happens!).</p></li>
<li><p>Or, it could be that the ultimate solution simply hasn’t been invented yet.</p></li>
</ol>
<p>If none of the above bring you comfort, there’s one final step: contribute! If
you’ve uncovered new or unusual issues, or have creative diagnostic methods,
feel free to share your findings and extend this documentation. Together, we
can hunt down every elusive network issue - one twisted pair at a time.</p>
<p>Remember: sometimes the solution is just a reboot away, but if not, it’s time to
dig deeper - or report that bug!</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/networking/diagnostic/twisted_pair_layer1_diagnostics.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>