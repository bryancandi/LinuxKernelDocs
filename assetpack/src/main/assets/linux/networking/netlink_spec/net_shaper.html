<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Family net-shaper netlink specification &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Family netdev netlink specification" href="netdev.html" />
    <link rel="prev" title="Family mptcp_pm netlink specification" href="mptcp_pm.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.15.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#human-interfaces">Human interfaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../subsystem-apis.html#networking-interfaces">Networking interfaces</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../isdn/index.html">ISDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../mhi/index.html">MHI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/networking/netlink_spec/net_shaper.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="family-net-shaper-netlink-specification">
<h1><a class="toc-backref" href="#id4" role="doc-backlink">Family <code class="docutils literal notranslate"><span class="pre">net-shaper</span></code> netlink specification</a><a class="headerlink" href="#family-net-shaper-netlink-specification" title="Link to this heading">¶</a></h1>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#family-net-shaper-netlink-specification" id="id4">Family <code class="docutils literal notranslate"><span class="pre">net-shaper</span></code> netlink specification</a></p>
<ul>
<li><p><a class="reference internal" href="#summary" id="id5">Summary</a></p></li>
<li><p><a class="reference internal" href="#operations" id="id6">Operations</a></p>
<ul>
<li><p><a class="reference internal" href="#get" id="id7">get</a></p></li>
<li><p><a class="reference internal" href="#set" id="id8">set</a></p></li>
<li><p><a class="reference internal" href="#delete" id="id9">delete</a></p></li>
<li><p><a class="reference internal" href="#group" id="id10">group</a></p></li>
<li><p><a class="reference internal" href="#cap-get" id="id11">cap-get</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#definitions" id="id12">Definitions</a></p>
<ul>
<li><p><a class="reference internal" href="#scope" id="id13">scope</a></p></li>
<li><p><a class="reference internal" href="#metric" id="id14">metric</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#attribute-sets" id="id15">Attribute sets</a></p>
<ul>
<li><p><a class="reference internal" href="#net-shaper" id="id16">net-shaper</a></p></li>
<li><p><a class="reference internal" href="#handle" id="id17">handle</a></p></li>
<li><p><a class="reference internal" href="#leaf-info" id="id18">leaf-info</a></p></li>
<li><p><a class="reference internal" href="#caps" id="id19">caps</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="summary">
<h2><a class="toc-backref" href="#id5" role="doc-backlink">Summary</a><a class="headerlink" href="#summary" title="Link to this heading">¶</a></h2>
<p>Networking HW rate limiting configuration.</p>
<p>This API allows configuring HW shapers available on the network
devices at different levels (queues, network device) and allows
arbitrary manipulation of the scheduling tree of the involved
shapers.</p>
<p>Each &#64;shaper is identified within the given device, by a &#64;handle,
comprising both a &#64;scope and an &#64;id.</p>
<p>Depending on the &#64;scope value, the shapers are attached to specific
HW objects (queues, devices) or, for &#64;node scope, represent a
scheduling group, that can be placed in an arbitrary location of
the scheduling tree.</p>
<p>Shapers can be created with two different operations: the &#64;set
operation, to create and update a single “attached” shaper, and
the &#64;group operation, to create and update a scheduling
group. Only the &#64;group operation can create &#64;node scope shapers.</p>
<p>Existing shapers can be deleted/reset via the &#64;delete operation.</p>
<p>The user can query the running configuration via the &#64;get operation.</p>
<p>Different devices can provide different feature sets, e.g. with no
support for complex scheduling hierarchy, or for some shaping
parameters. The user can introspect the HW capabilities via the
&#64;cap-get operation.</p>
</section>
<section id="operations">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Operations</a><a class="headerlink" href="#operations" title="Link to this heading">¶</a></h2>
<section id="get">
<span id="net-shaper-operation-get"></span><h3><a class="toc-backref" href="#id7" role="doc-backlink">get</a><a class="headerlink" href="#get" title="Link to this heading">¶</a></h3>
<p>Get information about a shaper for a given device.</p>
<dl class="field-list simple">
<dt class="field-odd">attribute-set<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-attribute-set-net-shaper"><span class="std std-ref">net-shaper</span></a></p>
</dd>
<dt class="field-even">do<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>pre</strong></dt><dd><p>net-shaper-nl-pre-doit</p>
</dd>
<dt><strong>post</strong></dt><dd><p>net-shaper-nl-post-doit</p>
</dd>
<dt><strong>request</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">handle</span></code>]</p>
</dd>
</dl>
</dd>
<dt><strong>reply</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">parent</span></code>, <code class="docutils literal notranslate"><span class="pre">handle</span></code>, <code class="docutils literal notranslate"><span class="pre">metric</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-min</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-max</span></code>, <code class="docutils literal notranslate"><span class="pre">burst</span></code>, <code class="docutils literal notranslate"><span class="pre">priority</span></code>, <code class="docutils literal notranslate"><span class="pre">weight</span></code>]</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-odd">dump<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pre</strong></dt><dd><p>net-shaper-nl-pre-dumpit</p>
</dd>
<dt><strong>post</strong></dt><dd><p>net-shaper-nl-post-dumpit</p>
</dd>
<dt><strong>request</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>]</p>
</dd>
</dl>
</dd>
<dt><strong>reply</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">parent</span></code>, <code class="docutils literal notranslate"><span class="pre">handle</span></code>, <code class="docutils literal notranslate"><span class="pre">metric</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-min</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-max</span></code>, <code class="docutils literal notranslate"><span class="pre">burst</span></code>, <code class="docutils literal notranslate"><span class="pre">priority</span></code>, <code class="docutils literal notranslate"><span class="pre">weight</span></code>]</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="set">
<span id="net-shaper-operation-set"></span><h3><a class="toc-backref" href="#id8" role="doc-backlink">set</a><a class="headerlink" href="#set" title="Link to this heading">¶</a></h3>
<p>Create or update the specified shaper.
The set operation can’t be used to create a &#64;node scope shaper,
use the &#64;group operation instead.</p>
<dl class="field-list simple">
<dt class="field-odd">attribute-set<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-attribute-set-net-shaper"><span class="std std-ref">net-shaper</span></a></p>
</dd>
<dt class="field-even">flags<span class="colon">:</span></dt>
<dd class="field-even"><p>[<code class="docutils literal notranslate"><span class="pre">admin-perm</span></code>]</p>
</dd>
<dt class="field-odd">do<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pre</strong></dt><dd><p>net-shaper-nl-pre-doit</p>
</dd>
<dt><strong>post</strong></dt><dd><p>net-shaper-nl-post-doit</p>
</dd>
<dt><strong>request</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">handle</span></code>, <code class="docutils literal notranslate"><span class="pre">metric</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-min</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-max</span></code>, <code class="docutils literal notranslate"><span class="pre">burst</span></code>, <code class="docutils literal notranslate"><span class="pre">priority</span></code>, <code class="docutils literal notranslate"><span class="pre">weight</span></code>]</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="delete">
<span id="net-shaper-operation-delete"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">delete</a><a class="headerlink" href="#delete" title="Link to this heading">¶</a></h3>
<p>Clear (remove) the specified shaper. When deleting
a &#64;node shaper, reattach all the node’s leaves to the
deleted node’s parent.
If, after the removal, the parent shaper has no more
leaves and the parent shaper scope is &#64;node, the parent
node is deleted, recursively.
When deleting a &#64;queue shaper or a &#64;netdev shaper,
the shaper disappears from the hierarchy, but the
queue/device can still send traffic: it has an implicit
node with infinite bandwidth. The queue’s implicit node
feeds an implicit RR node at the root of the hierarchy.</p>
<dl class="field-list simple">
<dt class="field-odd">attribute-set<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-attribute-set-net-shaper"><span class="std std-ref">net-shaper</span></a></p>
</dd>
<dt class="field-even">flags<span class="colon">:</span></dt>
<dd class="field-even"><p>[<code class="docutils literal notranslate"><span class="pre">admin-perm</span></code>]</p>
</dd>
<dt class="field-odd">do<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pre</strong></dt><dd><p>net-shaper-nl-pre-doit</p>
</dd>
<dt><strong>post</strong></dt><dd><p>net-shaper-nl-post-doit</p>
</dd>
<dt><strong>request</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">handle</span></code>]</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="group">
<span id="net-shaper-operation-group"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">group</a><a class="headerlink" href="#group" title="Link to this heading">¶</a></h3>
<p>Create or update a scheduling group, attaching the specified
&#64;leaves shapers under the specified node identified by &#64;handle.
The &#64;leaves shapers scope must be &#64;queue and the node shaper
scope must be either &#64;node or &#64;netdev.
When the node shaper has &#64;node scope, if the &#64;handle &#64;id is not
specified, a new shaper of such scope is created, otherwise the
specified node must already exist.
When updating an existing node shaper, the specified &#64;leaves are
added to the existing node; such node will also retain any preexisting
leave.
The &#64;parent handle for a new node shaper defaults to the parent
of all the leaves, provided all the leaves share the same parent.
Otherwise &#64;parent handle must be specified.
The user can optionally provide shaping attributes for the node
shaper.
The operation is atomic, on failure no change is applied to
the device shaping configuration, otherwise the &#64;node shaper
full identifier, comprising &#64;binding and &#64;handle, is provided
as the reply.</p>
<dl class="field-list simple">
<dt class="field-odd">attribute-set<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-attribute-set-net-shaper"><span class="std std-ref">net-shaper</span></a></p>
</dd>
<dt class="field-even">flags<span class="colon">:</span></dt>
<dd class="field-even"><p>[<code class="docutils literal notranslate"><span class="pre">admin-perm</span></code>]</p>
</dd>
<dt class="field-odd">do<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pre</strong></dt><dd><p>net-shaper-nl-pre-doit</p>
</dd>
<dt><strong>post</strong></dt><dd><p>net-shaper-nl-post-doit</p>
</dd>
<dt><strong>request</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">parent</span></code>, <code class="docutils literal notranslate"><span class="pre">handle</span></code>, <code class="docutils literal notranslate"><span class="pre">metric</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-min</span></code>, <code class="docutils literal notranslate"><span class="pre">bw-max</span></code>, <code class="docutils literal notranslate"><span class="pre">burst</span></code>, <code class="docutils literal notranslate"><span class="pre">priority</span></code>, <code class="docutils literal notranslate"><span class="pre">weight</span></code>, <code class="docutils literal notranslate"><span class="pre">leaves</span></code>]</p>
</dd>
</dl>
</dd>
<dt><strong>reply</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">handle</span></code>]</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="cap-get">
<span id="net-shaper-operation-cap-get"></span><h3><a class="toc-backref" href="#id11" role="doc-backlink">cap-get</a><a class="headerlink" href="#cap-get" title="Link to this heading">¶</a></h3>
<p>Get the shaper capabilities supported by the given device
for the specified scope.</p>
<dl class="field-list simple">
<dt class="field-odd">attribute-set<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-attribute-set-caps"><span class="std std-ref">caps</span></a></p>
</dd>
<dt class="field-even">do<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>pre</strong></dt><dd><p>net-shaper-nl-cap-pre-doit</p>
</dd>
<dt><strong>post</strong></dt><dd><p>net-shaper-nl-cap-post-doit</p>
</dd>
<dt><strong>request</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">scope</span></code>]</p>
</dd>
</dl>
</dd>
<dt><strong>reply</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">scope</span></code>, <code class="docutils literal notranslate"><span class="pre">support-metric-bps</span></code>, <code class="docutils literal notranslate"><span class="pre">support-metric-pps</span></code>, <code class="docutils literal notranslate"><span class="pre">support-nesting</span></code>, <code class="docutils literal notranslate"><span class="pre">support-bw-min</span></code>, <code class="docutils literal notranslate"><span class="pre">support-bw-max</span></code>, <code class="docutils literal notranslate"><span class="pre">support-burst</span></code>, <code class="docutils literal notranslate"><span class="pre">support-priority</span></code>, <code class="docutils literal notranslate"><span class="pre">support-weight</span></code>]</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-odd">dump<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>pre</strong></dt><dd><p>net-shaper-nl-cap-pre-dumpit</p>
</dd>
<dt><strong>post</strong></dt><dd><p>net-shaper-nl-cap-post-dumpit</p>
</dd>
<dt><strong>request</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>]</p>
</dd>
</dl>
</dd>
<dt><strong>reply</strong></dt><dd><dl class="field-list simple">
<dt class="field-odd">attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p>[<code class="docutils literal notranslate"><span class="pre">ifindex</span></code>, <code class="docutils literal notranslate"><span class="pre">scope</span></code>, <code class="docutils literal notranslate"><span class="pre">support-metric-bps</span></code>, <code class="docutils literal notranslate"><span class="pre">support-metric-pps</span></code>, <code class="docutils literal notranslate"><span class="pre">support-nesting</span></code>, <code class="docutils literal notranslate"><span class="pre">support-bw-min</span></code>, <code class="docutils literal notranslate"><span class="pre">support-bw-max</span></code>, <code class="docutils literal notranslate"><span class="pre">support-burst</span></code>, <code class="docutils literal notranslate"><span class="pre">support-priority</span></code>, <code class="docutils literal notranslate"><span class="pre">support-weight</span></code>]</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
</section>
</section>
<section id="definitions">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Definitions</a><a class="headerlink" href="#definitions" title="Link to this heading">¶</a></h2>
<section id="scope">
<span id="net-shaper-definition-scope"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink">scope</a><a class="headerlink" href="#scope" title="Link to this heading">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">type<span class="colon">:</span></dt>
<dd class="field-odd"><p>enum</p>
</dd>
<dt class="field-even">doc<span class="colon">:</span></dt>
<dd class="field-even"><p>Defines the shaper &#64;id interpretation.</p>
</dd>
<dt class="field-odd">entries<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="field-list simple">
<dt class="field-odd">unspec<span class="colon">:</span></dt>
<dd class="field-odd"><p>The scope is not specified.</p>
</dd>
<dt class="field-even">netdev<span class="colon">:</span></dt>
<dd class="field-even"><p>The main shaper for the given network device.</p>
</dd>
<dt class="field-odd">queue<span class="colon">:</span></dt>
<dd class="field-odd"><p>The shaper is attached to the given device queue, the &#64;id represents the queue number.</p>
</dd>
<dt class="field-even">node<span class="colon">:</span></dt>
<dd class="field-even"><p>The shaper allows grouping of queues or other node shapers; can be nested in either &#64;netdev shapers or other &#64;node shapers, allowing placement in any location of the scheduling tree, except leaves and root.</p>
</dd>
</dl>
</dd>
</dl>
</section>
<section id="metric">
<span id="net-shaper-definition-metric"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">metric</a><a class="headerlink" href="#metric" title="Link to this heading">¶</a></h3>
<dl class="field-list simple">
<dt class="field-odd">type<span class="colon">:</span></dt>
<dd class="field-odd"><p>enum</p>
</dd>
<dt class="field-even">doc<span class="colon">:</span></dt>
<dd class="field-even"><p>Different metric supported by the shaper.</p>
</dd>
<dt class="field-odd">entries<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="field-list simple">
<dt class="field-odd">bps<span class="colon">:</span></dt>
<dd class="field-odd"><p>Shaper operates on a bits per second basis.</p>
</dd>
<dt class="field-even">pps<span class="colon">:</span></dt>
<dd class="field-even"><p>Shaper operates on a packets per second basis.</p>
</dd>
</dl>
</dd>
</dl>
</section>
</section>
<section id="attribute-sets">
<h2><a class="toc-backref" href="#id15" role="doc-backlink">Attribute sets</a><a class="headerlink" href="#attribute-sets" title="Link to this heading">¶</a></h2>
<section id="net-shaper">
<span id="net-shaper-attribute-set-net-shaper"></span><h3><a class="toc-backref" href="#id16" role="doc-backlink">net-shaper</a><a class="headerlink" href="#net-shaper" title="Link to this heading">¶</a></h3>
<section id="handle-nest">
<h4>handle (<code class="docutils literal notranslate"><span class="pre">nest</span></code>)<a class="headerlink" href="#handle-nest" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">nested-attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-attribute-set-handle"><span class="std std-ref">handle</span></a></p>
</dd>
<dt class="field-even">doc<span class="colon">:</span></dt>
<dd class="field-even"><p>Unique identifier for the given shaper inside the owning device.</p>
</dd>
</dl>
</section>
<section id="metric-u32">
<h4>metric (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#metric-u32" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">enum<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-definition-metric"><span class="std std-ref">metric</span></a></p>
</dd>
<dt class="field-even">doc<span class="colon">:</span></dt>
<dd class="field-even"><p>Metric used by the given shaper for bw-min, bw-max and burst.</p>
</dd>
</dl>
</section>
<section id="bw-min-uint">
<h4>bw-min (<code class="docutils literal notranslate"><span class="pre">uint</span></code>)<a class="headerlink" href="#bw-min-uint" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Guaranteed bandwidth for the given shaper.</p>
</dd>
</dl>
</section>
<section id="bw-max-uint">
<h4>bw-max (<code class="docutils literal notranslate"><span class="pre">uint</span></code>)<a class="headerlink" href="#bw-max-uint" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Maximum bandwidth for the given shaper or 0 when unlimited.</p>
</dd>
</dl>
</section>
<section id="burst-uint">
<h4>burst (<code class="docutils literal notranslate"><span class="pre">uint</span></code>)<a class="headerlink" href="#burst-uint" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Maximum burst-size for shaping. Should not be interpreted as a quantum.</p>
</dd>
</dl>
</section>
<section id="priority-u32">
<h4>priority (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#priority-u32" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Scheduling priority for the given shaper. The priority scheduling is applied to sibling shapers.</p>
</dd>
</dl>
</section>
<section id="weight-u32">
<h4>weight (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#weight-u32" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Relative weight for round robin scheduling of the given shaper. The scheduling is applied to all sibling shapers with the same priority.</p>
</dd>
</dl>
</section>
<section id="ifindex-u32">
<h4>ifindex (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#ifindex-u32" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Interface index owning the specified shaper.</p>
</dd>
</dl>
</section>
<section id="parent-nest">
<h4>parent (<code class="docutils literal notranslate"><span class="pre">nest</span></code>)<a class="headerlink" href="#parent-nest" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">nested-attributes<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-attribute-set-handle"><span class="std std-ref">handle</span></a></p>
</dd>
<dt class="field-even">doc<span class="colon">:</span></dt>
<dd class="field-even"><p>Identifier for the parent of the affected shaper. Only needed for &#64;group operation.</p>
</dd>
</dl>
</section>
<section id="leaves-nest">
<h4>leaves (<code class="docutils literal notranslate"><span class="pre">nest</span></code>)<a class="headerlink" href="#leaves-nest" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">multi-attr<span class="colon">:</span></dt>
<dd class="field-odd"><p>True</p>
</dd>
<dt class="field-even">nested-attributes<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="#net-shaper-attribute-set-leaf-info"><span class="std std-ref">leaf-info</span></a></p>
</dd>
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Describes a set of leaves shapers for a &#64;group operation.</p>
</dd>
</dl>
</section>
</section>
<section id="handle">
<span id="net-shaper-attribute-set-handle"></span><h3><a class="toc-backref" href="#id17" role="doc-backlink">handle</a><a class="headerlink" href="#handle" title="Link to this heading">¶</a></h3>
<section id="scope-u32">
<h4>scope (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#scope-u32" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">enum<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-definition-scope"><span class="std std-ref">scope</span></a></p>
</dd>
<dt class="field-even">doc<span class="colon">:</span></dt>
<dd class="field-even"><p>Defines the shaper &#64;id interpretation.</p>
</dd>
</dl>
</section>
<section id="id-u32">
<h4>id (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#id-u32" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Numeric identifier of a shaper. The id semantic depends on the scope. For &#64;queue scope it’s the queue id and for &#64;node scope it’s the node identifier.</p>
</dd>
</dl>
</section>
</section>
<section id="leaf-info">
<span id="net-shaper-attribute-set-leaf-info"></span><h3><a class="toc-backref" href="#id18" role="doc-backlink">leaf-info</a><a class="headerlink" href="#leaf-info" title="Link to this heading">¶</a></h3>
<section id="id1">
<h4>handle<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
</section>
<section id="priority">
<h4>priority<a class="headerlink" href="#priority" title="Link to this heading">¶</a></h4>
</section>
<section id="weight">
<h4>weight<a class="headerlink" href="#weight" title="Link to this heading">¶</a></h4>
</section>
</section>
<section id="caps">
<span id="net-shaper-attribute-set-caps"></span><h3><a class="toc-backref" href="#id19" role="doc-backlink">caps</a><a class="headerlink" href="#caps" title="Link to this heading">¶</a></h3>
<section id="id2">
<h4>ifindex (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>Interface index queried for shapers capabilities.</p>
</dd>
</dl>
</section>
<section id="id3">
<h4>scope (<code class="docutils literal notranslate"><span class="pre">u32</span></code>)<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">enum<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#net-shaper-definition-scope"><span class="std std-ref">scope</span></a></p>
</dd>
<dt class="field-even">doc<span class="colon">:</span></dt>
<dd class="field-even"><p>The scope to which the queried capabilities apply.</p>
</dd>
</dl>
</section>
<section id="support-metric-bps-flag">
<h4>support-metric-bps (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-metric-bps-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device accepts ‘bps’ metric for bw-min, bw-max and burst.</p>
</dd>
</dl>
</section>
<section id="support-metric-pps-flag">
<h4>support-metric-pps (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-metric-pps-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device accepts ‘pps’ metric for bw-min, bw-max and burst.</p>
</dd>
</dl>
</section>
<section id="support-nesting-flag">
<h4>support-nesting (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-nesting-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device supports nesting shaper belonging to this scope below ‘node’ scoped shapers. Only ‘queue’ and ‘node’ scope can have flag ‘support-nesting’.</p>
</dd>
</dl>
</section>
<section id="support-bw-min-flag">
<h4>support-bw-min (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-bw-min-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device supports a minimum guaranteed B/W.</p>
</dd>
</dl>
</section>
<section id="support-bw-max-flag">
<h4>support-bw-max (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-bw-max-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device supports maximum B/W shaping.</p>
</dd>
</dl>
</section>
<section id="support-burst-flag">
<h4>support-burst (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-burst-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device supports a maximum burst size.</p>
</dd>
</dl>
</section>
<section id="support-priority-flag">
<h4>support-priority (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-priority-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device supports priority scheduling.</p>
</dd>
</dl>
</section>
<section id="support-weight-flag">
<h4>support-weight (<code class="docutils literal notranslate"><span class="pre">flag</span></code>)<a class="headerlink" href="#support-weight-flag" title="Link to this heading">¶</a></h4>
<dl class="field-list simple">
<dt class="field-odd">doc<span class="colon">:</span></dt>
<dd class="field-odd"><p>The device supports weighted round robin scheduling.</p>
</dd>
</dl>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/networking/netlink_spec/net_shaper.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>