<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Task List &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Backlight support" href="../../backlight.html" />
    <link rel="prev" title="Guidelines" href="guidelines.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.15.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../subsystem-apis.html#human-interfaces">Human interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../input/index.html">Input Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sound/index.html">Sound Subsystem Documentation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">GPU Driver Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../leds/index.html">LEDs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/gpu/nova/core/todo.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="task-list">
<h1>Task List<a class="headerlink" href="#task-list" title="Link to this heading">¶</a></h1>
<p>Tasks may have the following fields:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Complexity</span></code>: Describes the required familiarity with Rust and / or the
corresponding kernel APIs or subsystems. There are four different complexities,
<code class="docutils literal notranslate"><span class="pre">Beginner</span></code>, <code class="docutils literal notranslate"><span class="pre">Intermediate</span></code>, <code class="docutils literal notranslate"><span class="pre">Advanced</span></code> and <code class="docutils literal notranslate"><span class="pre">Expert</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Reference</span></code>: References to other tasks.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Link</span></code>: Links to external resources.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Contact</span></code>: The person that can be contacted for further information about
the task.</p></li>
</ul>
<section id="enablement-rust">
<h2>Enablement (Rust)<a class="headerlink" href="#enablement-rust" title="Link to this heading">¶</a></h2>
<p>Tasks that are not directly related to nova-core, but are preconditions in terms
of required APIs.</p>
<section id="fromprimitive-api">
<h3>FromPrimitive API<a class="headerlink" href="#fromprimitive-api" title="Link to this heading">¶</a></h3>
<p>Sometimes the need arises to convert a number to a value of an enum or a
structure.</p>
<p>A good example from nova-core would be the <code class="docutils literal notranslate"><span class="pre">Chipset</span></code> enum type, which defines
the value <code class="docutils literal notranslate"><span class="pre">AD102</span></code>. When probing the GPU the value <code class="docutils literal notranslate"><span class="pre">0x192</span></code> can be read from a
certain register indication the chipset AD102. Hence, the enum value <code class="docutils literal notranslate"><span class="pre">AD102</span></code>
should be derived from the number <code class="docutils literal notranslate"><span class="pre">0x192</span></code>. Currently, nova-core uses a custom
implementation (<code class="docutils literal notranslate"><span class="pre">Chipset::from_u32</span></code> for this.</p>
<p>Instead, it would be desirable to have something like the <code class="docutils literal notranslate"><span class="pre">FromPrimitive</span></code>
trait [1] from the num crate.</p>
<p>Having this generalization also helps with implementing a generic macro that
automatically generates the corresponding mappings between a value and a number.</p>
<div class="line-block">
<div class="line">Complexity: Beginner</div>
<div class="line">Link: <a class="reference external" href="https://docs.rs/num/latest/num/trait.FromPrimitive.html">https://docs.rs/num/latest/num/trait.FromPrimitive.html</a></div>
</div>
</section>
<section id="generic-register-abstraction">
<h3>Generic register abstraction<a class="headerlink" href="#generic-register-abstraction" title="Link to this heading">¶</a></h3>
<p>Work out how register constants and structures can be automatically generated
through generalized macros.</p>
<p>Example:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="n">register</span><span class="o">!</span><span class="p">(</span><span class="n">BOOT0</span><span class="p">,</span><span class="w"> </span><span class="mh">0x0</span><span class="p">,</span><span class="w"> </span><span class="kt">u32</span><span class="p">,</span><span class="w"> </span><span class="n">pci</span>::<span class="n">Bar</span><span class="o">&lt;</span><span class="n">SIZE</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">Fields</span><span class="w"> </span><span class="p">[</span>
<span class="w">   </span><span class="n">MINOR_REVISION</span><span class="p">(</span><span class="mi">3</span>:<span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">RO</span><span class="p">),</span>
<span class="w">   </span><span class="n">MAJOR_REVISION</span><span class="p">(</span><span class="mi">7</span>:<span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="n">RO</span><span class="p">),</span>
<span class="w">   </span><span class="n">REVISION</span><span class="p">(</span><span class="mi">7</span>:<span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">RO</span><span class="p">),</span><span class="w"> </span><span class="c1">// Virtual register combining major and minor rev.</span>
<span class="p">])</span>
</pre></div>
</div>
<p>This could expand to something like:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">BOOT0_OFFSET</span>: <span class="kt">usize</span> <span class="o">=</span><span class="w"> </span><span class="mh">0x00000000</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">BOOT0_MINOR_REVISION_SHIFT</span>: <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">BOOT0_MINOR_REVISION_MASK</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="mh">0x0000000f</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">BOOT0_MAJOR_REVISION_SHIFT</span>: <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="mi">4</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">BOOT0_MAJOR_REVISION_MASK</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="mh">0x000000f0</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">BOOT0_REVISION_SHIFT</span>: <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="n">BOOT0_MINOR_REVISION_SHIFT</span><span class="p">;</span>
<span class="k">const</span><span class="w"> </span><span class="n">BOOT0_REVISION_MASK</span>: <span class="kt">u32</span> <span class="o">=</span><span class="w"> </span><span class="n">BOOT0_MINOR_REVISION_MASK</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">BOOT0_MAJOR_REVISION_MASK</span><span class="p">;</span>

<span class="k">struct</span> <span class="nc">Boot0</span><span class="p">(</span><span class="kt">u32</span><span class="p">);</span>

<span class="k">impl</span><span class="w"> </span><span class="n">Boot0</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="cp">#[inline]</span>
<span class="w">   </span><span class="k">fn</span> <span class="nf">read</span><span class="p">(</span><span class="n">bar</span>: <span class="kp">&amp;</span><span class="nc">RevocableGuard</span><span class="o">&lt;&#39;</span><span class="nb">_</span><span class="p">,</span><span class="w"> </span><span class="n">pci</span>::<span class="n">Bar</span><span class="o">&lt;</span><span class="n">SIZE</span><span class="o">&gt;&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="bp">Self</span><span class="p">(</span><span class="n">bar</span><span class="p">.</span><span class="n">readl</span><span class="p">(</span><span class="n">BOOT0_OFFSET</span><span class="p">))</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cp">#[inline]</span>
<span class="w">   </span><span class="k">fn</span> <span class="nf">minor_revision</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">u32</span> <span class="p">{</span>
<span class="w">      </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">BOOT0_MINOR_REVISION_MASK</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">BOOT0_MINOR_REVISION_SHIFT</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cp">#[inline]</span>
<span class="w">   </span><span class="k">fn</span> <span class="nf">major_revision</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">u32</span> <span class="p">{</span>
<span class="w">      </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">BOOT0_MAJOR_REVISION_MASK</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">BOOT0_MAJOR_REVISION_SHIFT</span>
<span class="w">   </span><span class="p">}</span>

<span class="w">   </span><span class="cp">#[inline]</span>
<span class="w">   </span><span class="k">fn</span> <span class="nf">revision</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">u32</span> <span class="p">{</span>
<span class="w">      </span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">BOOT0_REVISION_MASK</span><span class="p">)</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">BOOT0_REVISION_SHIFT</span>
<span class="w">   </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Usage:</p>
<div class="highlight-rust notranslate"><div class="highlight"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bar</span><span class="p">.</span><span class="n">try_access</span><span class="p">().</span><span class="n">ok_or</span><span class="p">(</span><span class="n">ENXIO</span><span class="p">)</span><span class="o">?</span><span class="p">;</span>

<span class="kd">let</span><span class="w"> </span><span class="n">boot0</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Boot0</span>::<span class="n">read</span><span class="p">(</span><span class="o">&amp;</span><span class="n">bar</span><span class="p">);</span>
<span class="n">pr_info</span><span class="o">!</span><span class="p">(</span><span class="s">&quot;Revision: {}</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">boot0</span><span class="p">.</span><span class="n">revision</span><span class="p">());</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
</div>
</section>
<section id="delay-sleep-abstractions">
<h3>Delay / Sleep abstractions<a class="headerlink" href="#delay-sleep-abstractions" title="Link to this heading">¶</a></h3>
<p>Rust abstractions for the kernel’s delay() and sleep() functions.</p>
<p>FUJITA Tomonori plans to work on abstractions for read_poll_timeout_atomic()
(and friends) [1].</p>
<div class="line-block">
<div class="line">Complexity: Beginner</div>
<div class="line">Link: <a class="reference external" href="https://lore.kernel.org/netdev/20250228.080550.354359820929821928.fujita.tomonori&#64;gmail.com/">https://lore.kernel.org/netdev/20250228.080550.354359820929821928.fujita.tomonori&#64;gmail.com/</a> [1]</div>
</div>
</section>
<section id="irq-abstractions">
<h3>IRQ abstractions<a class="headerlink" href="#irq-abstractions" title="Link to this heading">¶</a></h3>
<p>Rust abstractions for IRQ handling.</p>
<p>There is active ongoing work from Daniel Almeida [1] for the “core” abstractions
to request IRQs.</p>
<p>Besides optional review and testing work, the required <code class="docutils literal notranslate"><span class="pre">pci::Device</span></code> code
around those core abstractions needs to be worked out.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Link: <a class="reference external" href="https://lore.kernel.org/lkml/20250122163932.46697-1-daniel.almeida&#64;collabora.com/">https://lore.kernel.org/lkml/20250122163932.46697-1-daniel.almeida&#64;collabora.com/</a> [1]</div>
<div class="line">Contact: Daniel Almeida</div>
</div>
</section>
<section id="page-abstraction-for-foreign-pages">
<h3>Page abstraction for foreign pages<a class="headerlink" href="#page-abstraction-for-foreign-pages" title="Link to this heading">¶</a></h3>
<p>Rust abstractions for pages not created by the Rust page abstraction without
direct ownership.</p>
<p>There is active onging work from Abdiel Janulgue [1] and Lina [2].</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
<div class="line">Link: <a class="reference external" href="https://lore.kernel.org/linux-mm/20241119112408.779243-1-abdiel.janulgue&#64;gmail.com/">https://lore.kernel.org/linux-mm/20241119112408.779243-1-abdiel.janulgue&#64;gmail.com/</a> [1]</div>
<div class="line">Link: <a class="reference external" href="https://lore.kernel.org/rust-for-linux/20250202-rust-page-v1-0-e3170d7fe55e&#64;asahilina.net/">https://lore.kernel.org/rust-for-linux/20250202-rust-page-v1-0-e3170d7fe55e&#64;asahilina.net/</a> [2]</div>
</div>
</section>
<section id="scatterlist-sg-table-abstractions">
<h3>Scatterlist / sg_table abstractions<a class="headerlink" href="#scatterlist-sg-table-abstractions" title="Link to this heading">¶</a></h3>
<p>Rust abstractions for scatterlist / sg_table.</p>
<p>There is preceding work from Abdiel Janulgue, which hasn’t made it to the
mailing list yet.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Contact: Abdiel Janulgue</div>
</div>
</section>
<section id="elf-utils">
<h3>ELF utils<a class="headerlink" href="#elf-utils" title="Link to this heading">¶</a></h3>
<p>Rust implementation of ELF header representation to retrieve section header
tables, names, and data from an ELF-formatted images.</p>
<p>There is preceding work from Abdiel Janulgue, which hasn’t made it to the
mailing list yet.</p>
<div class="line-block">
<div class="line">Complexity: Beginner</div>
<div class="line">Contact: Abdiel Janulgue</div>
</div>
</section>
<section id="pci-misc-apis">
<h3>PCI MISC APIs<a class="headerlink" href="#pci-misc-apis" title="Link to this heading">¶</a></h3>
<p>Extend the existing PCI device / driver abstractions by SR-IOV, config space,
capability, MSI API abstractions.</p>
<div class="line-block">
<div class="line">Complexity: Beginner</div>
</div>
</section>
<section id="auxiliary-bus-abstractions">
<h3>Auxiliary bus abstractions<a class="headerlink" href="#auxiliary-bus-abstractions" title="Link to this heading">¶</a></h3>
<p>Rust abstraction for the auxiliary bus APIs.</p>
<p>This is needed to connect nova-core to the nova-drm driver.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
</div>
</section>
<section id="debugfs-abstractions">
<h3>Debugfs abstractions<a class="headerlink" href="#debugfs-abstractions" title="Link to this heading">¶</a></h3>
<p>Rust abstraction for debugfs APIs.</p>
<div class="line-block">
<div class="line">Reference: Export GSP log buffers</div>
<div class="line">Complexity: Intermediate</div>
</div>
</section>
<section id="vec-extensions">
<h3>Vec extensions<a class="headerlink" href="#vec-extensions" title="Link to this heading">¶</a></h3>
<p>Implement <code class="docutils literal notranslate"><span class="pre">Vec::truncate</span></code> and <code class="docutils literal notranslate"><span class="pre">Vec::resize</span></code>.</p>
<p>Currently this is used for some experimental code to parse the vBIOS.</p>
<div class="line-block">
<div class="line">Reference vBIOS support</div>
<div class="line">Complexity: Beginner</div>
</div>
</section>
</section>
<section id="gpu-general">
<h2>GPU (general)<a class="headerlink" href="#gpu-general" title="Link to this heading">¶</a></h2>
<section id="parse-firmware-headers">
<h3>Parse firmware headers<a class="headerlink" href="#parse-firmware-headers" title="Link to this heading">¶</a></h3>
<p>Parse ELF headers from the firmware files loaded from the filesystem.</p>
<div class="line-block">
<div class="line">Reference: ELF utils</div>
<div class="line">Complexity: Beginner</div>
<div class="line">Contact: Abdiel Janulgue</div>
</div>
</section>
<section id="build-radix3-page-table">
<h3>Build radix3 page table<a class="headerlink" href="#build-radix3-page-table" title="Link to this heading">¶</a></h3>
<p>Build the radix3 page table to map the firmware.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Contact: Abdiel Janulgue</div>
</div>
</section>
<section id="vbios-support">
<h3>vBIOS support<a class="headerlink" href="#vbios-support" title="Link to this heading">¶</a></h3>
<p>Parse the vBIOS and probe the structures required for driver initialization.</p>
<div class="line-block">
<div class="line">Contact: Dave Airlie</div>
<div class="line">Reference: Vec extensions</div>
<div class="line">Complexity: Intermediate</div>
</div>
</section>
<section id="initial-devinit-support">
<h3>Initial Devinit support<a class="headerlink" href="#initial-devinit-support" title="Link to this heading">¶</a></h3>
<p>Implement BIOS Device Initialization, i.e. memory sizing, waiting, PLL
configuration.</p>
<div class="line-block">
<div class="line">Contact: Dave Airlie</div>
<div class="line">Complexity: Beginner</div>
</div>
</section>
<section id="boot-falcon-controller">
<h3>Boot Falcon controller<a class="headerlink" href="#boot-falcon-controller" title="Link to this heading">¶</a></h3>
<p>Infrastructure to load and execute falcon (sec2) firmware images; handle the
GSP falcon processor and fwsec loading.</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="gpu-timer-support">
<h3>GPU Timer support<a class="headerlink" href="#gpu-timer-support" title="Link to this heading">¶</a></h3>
<p>Support for the GPU’s internal timer peripheral.</p>
<div class="line-block">
<div class="line">Complexity: Beginner</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="mmu-pt-management">
<h3>MMU / PT management<a class="headerlink" href="#mmu-pt-management" title="Link to this heading">¶</a></h3>
<p>Work out the architecture for MMU / page table management.</p>
<p>We need to consider that nova-drm will need rather fine-grained control,
especially in terms of locking, in order to be able to implement asynchronous
Vulkan queues.</p>
<p>While generally sharing the corresponding code is desirable, it needs to be
evaluated how (and if at all) sharing the corresponding code is expedient.</p>
<div class="line-block">
<div class="line">Complexity: Expert</div>
</div>
</section>
<section id="vram-memory-allocator">
<h3>VRAM memory allocator<a class="headerlink" href="#vram-memory-allocator" title="Link to this heading">¶</a></h3>
<p>Investigate options for a VRAM memory allocator.</p>
<dl class="simple">
<dt>Some possible options:</dt><dd><ul class="simple">
<li><p>Rust abstractions for
- RB tree (interval tree) / drm_mm
- maple_tree</p></li>
<li><p>native Rust collections</p></li>
</ul>
</dd>
</dl>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
</div>
</section>
<section id="instance-memory">
<h3>Instance Memory<a class="headerlink" href="#instance-memory" title="Link to this heading">¶</a></h3>
<p>Implement support for instmem (bar2) used to store page tables.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
</section>
<section id="gpu-system-processor-gsp">
<h2>GPU System Processor (GSP)<a class="headerlink" href="#gpu-system-processor-gsp" title="Link to this heading">¶</a></h2>
<section id="export-gsp-log-buffers">
<h3>Export GSP log buffers<a class="headerlink" href="#export-gsp-log-buffers" title="Link to this heading">¶</a></h3>
<p>Recent patches from Timur Tabi [1] added support to expose GSP-RM log buffers
(even after failure to probe the driver) through debugfs.</p>
<p>This is also an interesting feature for nova-core, especially in the early days.</p>
<div class="line-block">
<div class="line">Link: <a class="reference external" href="https://lore.kernel.org/nouveau/20241030202952.694055-2-ttabi&#64;nvidia.com/">https://lore.kernel.org/nouveau/20241030202952.694055-2-ttabi&#64;nvidia.com/</a> [1]</div>
<div class="line">Reference: Debugfs abstractions</div>
<div class="line">Complexity: Intermediate</div>
</div>
</section>
<section id="gsp-firmware-abstraction">
<h3>GSP firmware abstraction<a class="headerlink" href="#gsp-firmware-abstraction" title="Link to this heading">¶</a></h3>
<p>The GSP-RM firmware API is unstable and may incompatibly change from version to
version, in terms of data structures and semantics.</p>
<p>This problem is one of the big motivations for using Rust for nova-core, since
it turns out that Rust’s procedural macro feature provides a rather elegant way
to address this issue:</p>
<ol class="arabic simple">
<li><p>generate Rust structures from the C headers in a separate namespace per version</p></li>
<li><p>build abstraction structures (within a generic namespace) that implement the
firmware interfaces; annotate the differences in implementation with version
identifiers</p></li>
<li><p>use a procedural macro to generate the actual per version implementation out
of this abstraction</p></li>
<li><p>instantiate the correct version type one on runtime (can be sure that all
have the same interface because it’s defined by a common trait)</p></li>
</ol>
<p>There is a PoC implementation of this pattern, in the context of the nova-core
PoC driver.</p>
<p>This task aims at refining the feature and ideally generalize it, to be usable
by other drivers as well.</p>
<div class="line-block">
<div class="line">Complexity: Expert</div>
</div>
</section>
<section id="gsp-message-queue">
<h3>GSP message queue<a class="headerlink" href="#gsp-message-queue" title="Link to this heading">¶</a></h3>
<p>Implement low level GSP message queue (command, status) for communication
between the kernel driver and GSP.</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="bootstrap-gsp">
<h3>Bootstrap GSP<a class="headerlink" href="#bootstrap-gsp" title="Link to this heading">¶</a></h3>
<p>Call the boot firmware to boot the GSP processor; execute initial control
messages.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="client-device-apis">
<h3>Client / Device APIs<a class="headerlink" href="#client-device-apis" title="Link to this heading">¶</a></h3>
<p>Implement the GSP message interface for client / device allocation and the
corresponding client and device allocation APIs.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="bar-pde-handling">
<h3>Bar PDE handling<a class="headerlink" href="#bar-pde-handling" title="Link to this heading">¶</a></h3>
<p>Synchronize page table handling for BARs between the kernel driver and GSP.</p>
<div class="line-block">
<div class="line">Complexity: Beginner</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="fifo-engine">
<h3>FIFO engine<a class="headerlink" href="#fifo-engine" title="Link to this heading">¶</a></h3>
<p>Implement support for the FIFO engine, i.e. the corresponding GSP message
interface and provide an API for chid allocation and channel handling.</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="gr-engine">
<h3>GR engine<a class="headerlink" href="#gr-engine" title="Link to this heading">¶</a></h3>
<p>Implement support for the graphics engine, i.e. the corresponding GSP message
interface and provide an API for (golden) context creation and promotion.</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="ce-engine">
<h3>CE engine<a class="headerlink" href="#ce-engine" title="Link to this heading">¶</a></h3>
<p>Implement support for the copy engine, i.e. the corresponding GSP message
interface.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
<section id="vfn-irq-controller">
<h3>VFN IRQ controller<a class="headerlink" href="#vfn-irq-controller" title="Link to this heading">¶</a></h3>
<p>Support for the VFN interrupt controller.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
<div class="line">Contact: Dave Airlie</div>
</div>
</section>
</section>
<section id="external-apis">
<h2>External APIs<a class="headerlink" href="#external-apis" title="Link to this heading">¶</a></h2>
<section id="nova-core-base-api">
<h3>nova-core base API<a class="headerlink" href="#nova-core-base-api" title="Link to this heading">¶</a></h3>
<p>Work out the common pieces of the API to connect 2nd level drivers, i.e. vGPU
manager and nova-drm.</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
</div>
</section>
<section id="vgpu-manager-api">
<h3>vGPU manager API<a class="headerlink" href="#vgpu-manager-api" title="Link to this heading">¶</a></h3>
<p>Work out the API parts required by the vGPU manager, which are not covered by
the base API.</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
</div>
</section>
<section id="nova-core-c-api">
<h3>nova-core C API<a class="headerlink" href="#nova-core-c-api" title="Link to this heading">¶</a></h3>
<p>Implement a C wrapper for the APIs required by the vGPU manager driver.</p>
<div class="line-block">
<div class="line">Complexity: Intermediate</div>
</div>
</section>
</section>
<section id="testing">
<h2>Testing<a class="headerlink" href="#testing" title="Link to this heading">¶</a></h2>
<section id="ci-pipeline">
<h3>CI pipeline<a class="headerlink" href="#ci-pipeline" title="Link to this heading">¶</a></h3>
<p>Investigate option for continuous integration testing.</p>
<p>This can go from as simple as running KUnit tests over running (graphics) CTS to
booting up (multiple) guest VMs to test VFIO use-cases.</p>
<p>It might also be worth to consider the introduction of a new test suite directly
sitting on top of the uAPI for more targeted testing and debugging. There may be
options for collaboration / shared code with the Mesa project.</p>
<div class="line-block">
<div class="line">Complexity: Advanced</div>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/gpu/nova/core/todo.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>