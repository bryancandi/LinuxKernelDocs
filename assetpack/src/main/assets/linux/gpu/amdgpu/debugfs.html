<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>AMDGPU DebugFS &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="AMDGPU Process Isolation" href="process-isolation.html" />
    <link rel="prev" title="GPU Debugging" href="debugging.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.16.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../subsystem-apis.html#human-interfaces">Human interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../input/index.html">Input Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sound/index.html">Sound Subsystem Documentation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">GPU Driver Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/gpu/amdgpu/debugfs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="amdgpu-debugfs">
<h1>AMDGPU DebugFS<a class="headerlink" href="#amdgpu-debugfs" title="Link to this heading">¶</a></h1>
<p>The amdgpu driver provides a number of debugfs files to aid in debugging
issues in the driver.  These are usually found in
/sys/kernel/debug/dri/&lt;num&gt;.</p>
<section id="debugfs-files">
<h2>DebugFS Files<a class="headerlink" href="#debugfs-files" title="Link to this heading">¶</a></h2>
<section id="amdgpu-benchmark">
<h3>amdgpu_benchmark<a class="headerlink" href="#amdgpu-benchmark" title="Link to this heading">¶</a></h3>
<p>Run benchmarks using the DMA engine the driver uses for GPU memory paging.
Write a number to the file to run the test.  The results are written to the
kernel log.  VRAM is on device memory (dGPUs) or carve out (APUs) and GTT
(Graphics Translation Tables) is system memory that is accessible by the GPU.
The following tests are available:</p>
<ul class="simple">
<li><p>1: simple test, VRAM to GTT and GTT to VRAM</p></li>
<li><p>2: simple test, VRAM to VRAM</p></li>
<li><p>3: GTT to VRAM, buffer size sweep, powers of 2</p></li>
<li><p>4: VRAM to GTT, buffer size sweep, powers of 2</p></li>
<li><p>5: VRAM to VRAM, buffer size sweep, powers of 2</p></li>
<li><p>6: GTT to VRAM, buffer size sweep, common display sizes</p></li>
<li><p>7: VRAM to GTT, buffer size sweep, common display sizes</p></li>
<li><p>8: VRAM to VRAM, buffer size sweep, common display sizes</p></li>
</ul>
</section>
<section id="amdgpu-test-ib">
<h3>amdgpu_test_ib<a class="headerlink" href="#amdgpu-test-ib" title="Link to this heading">¶</a></h3>
<p>Read this file to run simple IB (Indirect Buffer) tests on all kernel managed
rings.  IBs are command buffers usually generated by userspace applications
which are submitted to the kernel for execution on an particular GPU engine.
This just runs the simple IB tests included in the kernel.  These tests
are engine specific and verify that IB submission works.</p>
</section>
<section id="amdgpu-discovery">
<h3>amdgpu_discovery<a class="headerlink" href="#amdgpu-discovery" title="Link to this heading">¶</a></h3>
<p>Provides raw access to the IP discovery binary provided by the GPU.  Read this
file to access the raw binary.  This is useful for verifying the contents of
the IP discovery table.  It is chip specific.</p>
</section>
<section id="amdgpu-vbios">
<h3>amdgpu_vbios<a class="headerlink" href="#amdgpu-vbios" title="Link to this heading">¶</a></h3>
<p>Provides raw access to the ROM binary image from the GPU.  Read this file to
access the raw binary.  This is useful for verifying the contents of the
video BIOS ROM.  It is board specific.</p>
</section>
<section id="amdgpu-evict-gtt">
<h3>amdgpu_evict_gtt<a class="headerlink" href="#amdgpu-evict-gtt" title="Link to this heading">¶</a></h3>
<p>Evict all buffers from the GTT memory pool.  Read this file to evict all
buffers from this pool.</p>
</section>
<section id="amdgpu-evict-vram">
<h3>amdgpu_evict_vram<a class="headerlink" href="#amdgpu-evict-vram" title="Link to this heading">¶</a></h3>
<p>Evict all buffers from the VRAM memory pool.  Read this file to evict all
buffers from this pool.</p>
</section>
<section id="amdgpu-gpu-recover">
<h3>amdgpu_gpu_recover<a class="headerlink" href="#amdgpu-gpu-recover" title="Link to this heading">¶</a></h3>
<p>Trigger a GPU reset.  Read this file to trigger reset the entire GPU.
All work currently running  on the GPU will be lost.</p>
</section>
<section id="amdgpu-ring-name">
<h3>amdgpu_ring_&lt;name&gt;<a class="headerlink" href="#amdgpu-ring-name" title="Link to this heading">¶</a></h3>
<p>Provides read access to the kernel managed ring buffers for each ring &lt;name&gt;.
These are useful for debugging problems on a particular ring.  The ring buffer
is how the CPU sends commands to the GPU.  The CPU writes commands into the
buffer and then asks the GPU engine to process it.  This is the raw binary
contents of the ring buffer.  Use a tool like UMR to decode the rings into human
readable form.</p>
</section>
<section id="amdgpu-mqd-name">
<h3>amdgpu_mqd_&lt;name&gt;<a class="headerlink" href="#amdgpu-mqd-name" title="Link to this heading">¶</a></h3>
<p>Provides read access to the kernel managed MQD (Memory Queue Descriptor) for
ring &lt;name&gt; managed by the kernel driver.  MQDs define the features of the ring
and are used to store the ring’s state when it is not connected to hardware.
The driver writes the requested ring features and metadata (GPU addresses of
the ring itself and associated buffers) to the MQD and the firmware uses the MQD
to populate the hardware when the ring is mapped to a hardware slot.  Only
available on engines which use MQDs.  This provides access to the raw MQD
binary.</p>
</section>
<section id="amdgpu-error-name">
<h3>amdgpu_error_&lt;name&gt;<a class="headerlink" href="#amdgpu-error-name" title="Link to this heading">¶</a></h3>
<p>Provides an interface to set an error code on the dma fences associated with
ring &lt;name&gt;.  The error code specified is propogated to all fences associated
with the ring.  Use this to inject a fence error into a ring.</p>
</section>
<section id="amdgpu-pm-info">
<h3>amdgpu_pm_info<a class="headerlink" href="#amdgpu-pm-info" title="Link to this heading">¶</a></h3>
<p>Provides human readable information about the power management features
and state of the GPU.  This includes current GFX clock, Memory clock,
voltages, average SoC power, temperature, GFX load, Memory load, SMU
feature mask, VCN power state, clock and power gating features.</p>
</section>
<section id="amdgpu-firmware-info">
<h3>amdgpu_firmware_info<a class="headerlink" href="#amdgpu-firmware-info" title="Link to this heading">¶</a></h3>
<p>Lists the firmware versions for all firmwares used by the GPU.  Only
entries with a non-0 version are valid.  If the version is 0, the firmware
is not valid for the GPU.</p>
</section>
<section id="amdgpu-fence-info">
<h3>amdgpu_fence_info<a class="headerlink" href="#amdgpu-fence-info" title="Link to this heading">¶</a></h3>
<p>Shows the last signalled and emitted fence sequence numbers for each
kernel driver managed ring.  Fences are associated with submissions
to the engine.  Emitted fences have been submitted to the ring
and signalled fences have been signalled by the GPU.  Rings with a
larger emitted fence value have outstanding work that is still being
processed by the engine that owns that ring.  When the emitted and
signalled fence values are equal, the ring is idle.</p>
</section>
<section id="amdgpu-gem-info">
<h3>amdgpu_gem_info<a class="headerlink" href="#amdgpu-gem-info" title="Link to this heading">¶</a></h3>
<p>Lists all of the PIDs using the GPU and the GPU buffers that they have
allocated.  This lists the buffer size, pool (VRAM, GTT, etc.), and buffer
attributes (CPU access required, CPU cache attributes, etc.).</p>
</section>
<section id="amdgpu-vm-info">
<h3>amdgpu_vm_info<a class="headerlink" href="#amdgpu-vm-info" title="Link to this heading">¶</a></h3>
<p>Lists all of the PIDs using the GPU and the GPU buffers that they have
allocated as well as the status of those buffers relative to that process’
GPU virtual address space (e.g., evicted, idle, invalidated, etc.).</p>
</section>
<section id="amdgpu-sa-info">
<h3>amdgpu_sa_info<a class="headerlink" href="#amdgpu-sa-info" title="Link to this heading">¶</a></h3>
<p>Prints out all of the suballocations (sa) by the suballocation manager in the
kernel driver.  Prints the GPU address, size, and fence info associated
with each suballocation.  The suballocations are used internally within
the kernel driver for various things.</p>
</section>
<section id="amdgpu-pool-mm">
<h3>amdgpu_&lt;pool&gt;_mm<a class="headerlink" href="#amdgpu-pool-mm" title="Link to this heading">¶</a></h3>
<p>Prints TTM information about the memory pool &lt;pool&gt;.</p>
</section>
<section id="amdgpu-vram">
<h3>amdgpu_vram<a class="headerlink" href="#amdgpu-vram" title="Link to this heading">¶</a></h3>
<p>Provides direct access to VRAM.  Used by tools like UMR to inspect
objects in VRAM.</p>
</section>
<section id="amdgpu-iomem">
<h3>amdgpu_iomem<a class="headerlink" href="#amdgpu-iomem" title="Link to this heading">¶</a></h3>
<p>Provides direct access to GTT memory.  Used by tools like UMR to inspect
GTT memory.</p>
</section>
<section id="amdgpu-regs">
<h3>amdgpu_regs_*<a class="headerlink" href="#amdgpu-regs" title="Link to this heading">¶</a></h3>
<p>Provides direct access to various register aperatures on the GPU.  Used
by tools like UMR to access GPU registers.</p>
</section>
<section id="amdgpu-regs2">
<h3>amdgpu_regs2<a class="headerlink" href="#amdgpu-regs2" title="Link to this heading">¶</a></h3>
<p>Provides an IOCTL interface used by UMR for interacting with GPU registers.</p>
</section>
<section id="amdgpu-sensors">
<h3>amdgpu_sensors<a class="headerlink" href="#amdgpu-sensors" title="Link to this heading">¶</a></h3>
<p>Provides an interface to query GPU power metrics (temperature, average
power, etc.).  Used by tools like UMR to query GPU power metrics.</p>
</section>
<section id="amdgpu-gca-config">
<h3>amdgpu_gca_config<a class="headerlink" href="#amdgpu-gca-config" title="Link to this heading">¶</a></h3>
<p>Provides an interface to query GPU details (Graphics/Compute Array config,
PCI config, GPU family, etc.).  Used by tools like UMR to query GPU details.</p>
</section>
<section id="amdgpu-wave">
<h3>amdgpu_wave<a class="headerlink" href="#amdgpu-wave" title="Link to this heading">¶</a></h3>
<p>Used to query GFX/compute wave information from the hardware.  Used by tools
like UMR to query GFX/compute wave information.</p>
</section>
<section id="amdgpu-gpr">
<h3>amdgpu_gpr<a class="headerlink" href="#amdgpu-gpr" title="Link to this heading">¶</a></h3>
<p>Used to query GFX/compute GPR (General Purpose Register) information from the
hardware.  Used by tools like UMR to query GPRs when debugging shaders.</p>
</section>
<section id="amdgpu-gprwave">
<h3>amdgpu_gprwave<a class="headerlink" href="#amdgpu-gprwave" title="Link to this heading">¶</a></h3>
<p>Provides an IOCTL interface used by UMR for interacting with shader waves.</p>
</section>
<section id="amdgpu-fw-attestation">
<h3>amdgpu_fw_attestation<a class="headerlink" href="#amdgpu-fw-attestation" title="Link to this heading">¶</a></h3>
<p>Provides an interface for reading back firmware attestation records.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/gpu/amdgpu/debugfs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>