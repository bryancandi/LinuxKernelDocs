<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Core elements &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Buffers" href="buffers.html" />
    <link rel="prev" title="Introduction" href="intro.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.10.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Driver APIs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#general-information-for-driver-authors">General information for driver authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#useful-support-libraries">Useful support libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#bus-level-documentation">Bus-level documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#subsystem-specific-apis">Subsystem-specific APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../80211/index.html">Linux 802.11 Driver Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../clk.html">The Common Clk Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../console.html">Console Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crypto/index.html">Crypto Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dmaengine/index.html">DMAEngine documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpll.html">The Linux kernel dpll subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../firmware/index.html">Linux Firmware API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fpga/index.html">FPGA Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aperture.html">Managing Ownership of the Framebuffer Aperture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hte/index.html">The Linux Hardware Timestamping Engine (HTE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Industrial I/O</a></li>
<li class="toctree-l3"><a class="reference internal" href="../infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input.html">Input Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interconnect.html">Generic System Interconnect Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipmi.html">The Linux IPMI Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../libata.html">libATA Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mailbox.html">The Common Mailbox Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../md/index.html">RAID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../media/index.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../message-based.html">Message-based devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mtd/index.html">Memory Technology Device (MTD)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ntb.html">NTB Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pin-control.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pldmfw/index.html">PLDM Firmware Flash Update Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pldmfw/index.html#overview-of-the-pldmfw-library">Overview of the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reset.html">Reset controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sm501.html">SM501 Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../soundwire/index.html">SoundWire Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../surface_aggregator/index.html">Surface System Aggregator Module (SSAM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tee.html">TEE (Trusted Execution Environment) driver API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thermal/index.html">Thermal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tty/index.html">TTY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wbrf.html">WBRF - Wifi Band RFI Mitigations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wmi.html">WMI Driver API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../zorro.html">Writing Device Drivers for Zorro Devices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/iio/core.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="core-elements">
<h1>Core elements<a class="headerlink" href="#core-elements" title="Link to this heading">¶</a></h1>
<p>The Industrial I/O core offers both a unified framework for writing drivers for
many different types of embedded sensors and a standard interface to user space
applications manipulating sensors. The implementation can be found under
<code class="file docutils literal notranslate"><span class="pre">drivers/iio/industrialio-*</span></code></p>
<section id="industrial-i-o-devices">
<h2>Industrial I/O Devices<a class="headerlink" href="#industrial-i-o-devices" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="#c.iio_dev" title="iio_dev"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span></code></a> - industrial I/O device</p></li>
<li><p><a class="reference internal" href="#c.iio_device_alloc" title="iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_alloc()</span></code></a> - allocate an <a class="reference internal" href="#c.iio_dev" title="iio_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_dev</span></code></a> from a driver</p></li>
<li><p><a class="reference internal" href="#c.iio_device_free" title="iio_device_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_free()</span></code></a> - free an <a class="reference internal" href="#c.iio_dev" title="iio_dev"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_dev</span></code></a> from a driver</p></li>
<li><p><a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a> - register a device with the IIO subsystem</p></li>
<li><p><a class="reference internal" href="#c.iio_device_unregister" title="iio_device_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_unregister()</span></code></a> - unregister a device from the IIO
subsystem</p></li>
</ul>
<p>An IIO device usually corresponds to a single hardware sensor and it
provides all the information needed by a driver handling a device.
Let’s first have a look at the functionality embedded in an IIO device
then we will show how a device driver makes use of an IIO device.</p>
<p>There are two ways for a user space application to interact with an IIO driver.</p>
<ol class="arabic simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/</span></code>, this represents a hardware sensor
and groups together the data channels of the same chip.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/dev/iio:device</span><em><span class="pre">X</span></em></code>, character device node interface used for
buffered data transfer and for events information retrieval.</p></li>
</ol>
<p>A typical IIO driver will register itself as an <a class="reference internal" href="../i2c.html"><span class="doc">I2C</span></a> or
<a class="reference internal" href="../spi.html"><span class="doc">SPI</span></a> driver and will create two routines, probe and remove.</p>
<p>At probe:</p>
<ol class="arabic simple">
<li><p>Call <a class="reference internal" href="#c.iio_device_alloc" title="iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_alloc()</span></code></a>, which allocates memory for an IIO device.</p></li>
<li><p>Initialize IIO device fields with driver specific information (e.g.
device name, device channels).</p></li>
<li><p>Call <a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a>, this registers the device with the
IIO core. After this call the device is ready to accept requests from user
space applications.</p></li>
</ol>
<p>At remove, we free the resources allocated in probe in reverse order:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#c.iio_device_unregister" title="iio_device_unregister"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_unregister()</span></code></a>, unregister the device from the IIO core.</p></li>
<li><p><a class="reference internal" href="#c.iio_device_free" title="iio_device_free"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_free()</span></code></a>, free the memory allocated for the IIO device.</p></li>
</ol>
<section id="iio-device-sysfs-interface">
<h3>IIO device sysfs interface<a class="headerlink" href="#iio-device-sysfs-interface" title="Link to this heading">¶</a></h3>
<p>Attributes are sysfs files used to expose chip info and also allowing
applications to set various configuration parameters. For device with
index X, attributes can be found under /sys/bus/iio/iio:deviceX/ directory.
Common attributes are:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">name</span></code>, description of the physical chip.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">dev</span></code>, shows the major:minor pair associated with
<code class="file docutils literal notranslate"><span class="pre">/dev/iio:deviceX</span></code> node.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">sampling_frequency_available</span></code>, available discrete set of sampling
frequency values for device.</p></li>
<li><p>Available standard attributes for IIO devices are described in the
<code class="file docutils literal notranslate"><span class="pre">Documentation/ABI/testing/sysfs-bus-iio</span></code> file in the Linux kernel
sources.</p></li>
</ul>
</section>
<section id="iio-device-channels">
<h3>IIO device channels<a class="headerlink" href="#iio-device-channels" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_chan_spec</span></code></a> - specification of a single channel</p>
<p>An IIO device channel is a representation of a data channel. An IIO device can
have one or multiple channels. For example:</p>
<ul class="simple">
<li><p>a thermometer sensor has one channel representing the temperature measurement.</p></li>
<li><p>a light sensor with two channels indicating the measurements in the visible
and infrared spectrum.</p></li>
<li><p>an accelerometer can have up to 3 channels representing acceleration on X, Y
and Z axes.</p></li>
</ul>
<p>An IIO channel is described by the <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_chan_spec</span></code></a>.
A thermometer driver for the temperature sensor in the example above would
have to describe its channel as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct iio_chan_spec temp_channel[] = {
     {
         .type = IIO_TEMP,
         .info_mask_separate = BIT(IIO_CHAN_INFO_PROCESSED),
     },
};
</pre></div>
</div>
<p>Channel sysfs attributes exposed to userspace are specified in the form of
bitmasks. Depending on their shared info, attributes can be set in one of the
following masks:</p>
<ul class="simple">
<li><p><strong>info_mask_separate</strong>, attributes will be specific to
this channel</p></li>
<li><p><strong>info_mask_shared_by_type</strong>, attributes are shared by all channels of the
same type</p></li>
<li><p><strong>info_mask_shared_by_dir</strong>, attributes are shared by all channels of the same
direction</p></li>
<li><p><strong>info_mask_shared_by_all</strong>, attributes are shared by all channels</p></li>
</ul>
<p>When there are multiple data channels per channel type we have two ways to
distinguish between them:</p>
<ul class="simple">
<li><p>set <strong>.modified</strong> field of <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a> to 1. Modifiers are
specified using <strong>.channel2</strong> field of the same <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a>
structure and are used to indicate a physically unique characteristic of the
channel such as its direction or spectral response. For example, a light
sensor can have two channels, one for infrared light and one for both
infrared and visible light.</p></li>
<li><p>set <strong>.indexed</strong> field of <a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><code class="xref c c-type docutils literal notranslate"><span class="pre">iio_chan_spec</span></code></a> to 1. In this case the
channel is simply another instance with an index specified by the <strong>.channel</strong>
field.</p></li>
</ul>
<p>Here is how we can make use of the channel’s modifiers:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct iio_chan_spec light_channels[] = {
        {
                .type = IIO_INTENSITY,
                .modified = 1,
                .channel2 = IIO_MOD_LIGHT_IR,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
                .info_mask_shared = BIT(IIO_CHAN_INFO_SAMP_FREQ),
        },
        {
                .type = IIO_INTENSITY,
                .modified = 1,
                .channel2 = IIO_MOD_LIGHT_BOTH,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
                .info_mask_shared = BIT(IIO_CHAN_INFO_SAMP_FREQ),
        },
        {
                .type = IIO_LIGHT,
                .info_mask_separate = BIT(IIO_CHAN_INFO_PROCESSED),
                .info_mask_shared = BIT(IIO_CHAN_INFO_SAMP_FREQ),
        },
   }
</pre></div>
</div>
<p>This channel’s definition will generate two separate sysfs files for raw data
retrieval:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_intensity_ir_raw</span></code></p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_intensity_both_raw</span></code></p></li>
</ul>
<p>one file for processed data:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_illuminance_input</span></code></p></li>
</ul>
<p>and one shared sysfs file for sampling frequency:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/iio:device</span><em><span class="pre">X</span></em><span class="pre">/sampling_frequency</span></code>.</p></li>
</ul>
<p>Here is how we can make use of the channel’s indexing:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>static const struct iio_chan_spec light_channels[] = {
        {
                .type = IIO_VOLTAGE,
                .indexed = 1,
                .channel = 0,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
        },
        {
                .type = IIO_VOLTAGE,
                .indexed = 1,
                .channel = 1,
                .info_mask_separate = BIT(IIO_CHAN_INFO_RAW),
        },
}
</pre></div>
</div>
<p>This will generate two separate attributes files for raw data retrieval:</p>
<ul class="simple">
<li><p><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/devices/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_voltage0_raw</span></code>, representing
voltage measurement for channel 0.</p></li>
<li><p><code class="file docutils literal notranslate"><span class="pre">/sys/bus/iio/devices/iio:device</span><em><span class="pre">X</span></em><span class="pre">/in_voltage1_raw</span></code>, representing
voltage measurement for channel 1.</p></li>
</ul>
</section>
<section id="more-details">
<h3>More details<a class="headerlink" href="#more-details" title="Link to this heading">¶</a></h3>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_chan_spec_ext_info">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_chan_spec_ext_info</span></span></span><a class="headerlink" href="#c.iio_chan_spec_ext_info" title="Link to this definition">¶</a><br /></dt>
<dd><p>Extended channel info attribute</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_chan_spec_ext_info {
    const char *name;
    enum iio_shared_by shared;
    ssize_t (*read)(struct iio_dev *, uintptr_t private, struct iio_chan_spec const *, char *buf);
    ssize_t (*write)(struct iio_dev *, uintptr_t private,struct iio_chan_spec const *, const char *buf, size_t len);
    uintptr_t private;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Info attribute name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shared</span></code></dt><dd><p>Whether this attribute is shared between all channels.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read</span></code></dt><dd><p>Read callback for this info attribute, may be NULL.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write</span></code></dt><dd><p>Write callback for this info attribute, may be NULL.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">private</span></code></dt><dd><p>Data private to the driver.</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_enum">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_enum</span></span></span><a class="headerlink" href="#c.iio_enum" title="Link to this definition">¶</a><br /></dt>
<dd><p>Enum channel info attribute</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_enum {
    const char * const *items;
    unsigned int num_items;
    int (*set)(struct iio_dev *, const struct iio_chan_spec *, unsigned int);
    int (*get)(struct iio_dev *, const struct iio_chan_spec *);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">items</span></code></dt><dd><p>An array of strings.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_items</span></code></dt><dd><p>Length of the item array.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set</span></code></dt><dd><p>Set callback function, may be NULL.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get</span></code></dt><dd><p>Get callback function, may be NULL.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>The iio_enum struct can be used to implement enum style channel attributes.
Enum style attributes are those which have a set of strings which map to
unsigned integer values. The IIO enum helper code takes care of mapping
between value and string as well as generating a “_available” file which
contains a list of all available items. The set callback will be called when
the attribute is updated. The last parameter is the index to the newly
activated item. The get callback will be used to query the currently active
item and is supposed to return the index for it.</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.IIO_ENUM">
<span class="sig-name descname"><span class="n"><span class="pre">IIO_ENUM</span></span></span><a class="headerlink" href="#c.IIO_ENUM" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">IIO_ENUM</span> <span class="pre">(_name,</span> <span class="pre">_shared,</span> <span class="pre">_e)</span></code></p>
<blockquote>
<div><p>Initialize enum extended channel attribute</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">_name</span></code></dt><dd><p>Attribute name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_shared</span></code></dt><dd><p>Whether the attribute is shared between all channels</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_e</span></code></dt><dd><p>Pointer to an iio_enum struct</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This should usually be used together with <a class="reference internal" href="#c.IIO_ENUM_AVAILABLE" title="IIO_ENUM_AVAILABLE"><code class="xref c c-func docutils literal notranslate"><span class="pre">IIO_ENUM_AVAILABLE()</span></code></a></p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.IIO_ENUM_AVAILABLE">
<span class="sig-name descname"><span class="n"><span class="pre">IIO_ENUM_AVAILABLE</span></span></span><a class="headerlink" href="#c.IIO_ENUM_AVAILABLE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">IIO_ENUM_AVAILABLE</span> <span class="pre">(_name,</span> <span class="pre">_shared,</span> <span class="pre">_e)</span></code></p>
<blockquote>
<div><p>Initialize enum available extended channel attribute</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">_name</span></code></dt><dd><p>Attribute name (“_available” will be appended to the name)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_shared</span></code></dt><dd><p>Whether the attribute is shared between all channels</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_e</span></code></dt><dd><p>Pointer to an iio_enum struct</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Creates a read only attribute which lists all the available enum items in a
space separated list. This should usually be used together with <a class="reference internal" href="#c.IIO_ENUM" title="IIO_ENUM"><code class="xref c c-func docutils literal notranslate"><span class="pre">IIO_ENUM()</span></code></a></p>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_mount_matrix">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_mount_matrix</span></span></span><a class="headerlink" href="#c.iio_mount_matrix" title="Link to this definition">¶</a><br /></dt>
<dd><p>iio mounting matrix</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_mount_matrix {
    const char *rotation[9];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rotation</span></code></dt><dd><p>3 dimensional space rotation matrix defining sensor alignment with
main hardware</p>
</dd>
</dl>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.IIO_MOUNT_MATRIX">
<span class="sig-name descname"><span class="n"><span class="pre">IIO_MOUNT_MATRIX</span></span></span><a class="headerlink" href="#c.IIO_MOUNT_MATRIX" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">IIO_MOUNT_MATRIX</span> <span class="pre">(_shared,</span> <span class="pre">_get)</span></code></p>
<blockquote>
<div><p>Initialize mount matrix extended channel attribute</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">_shared</span></code></dt><dd><p>Whether the attribute is shared between all channels</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">_get</span></code></dt><dd><p>Pointer to an iio_get_mount_matrix_t accessor</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_event_spec">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_event_spec</span></span></span><a class="headerlink" href="#c.iio_event_spec" title="Link to this definition">¶</a><br /></dt>
<dd><p>specification for a channel event</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_event_spec {
    enum iio_event_type type;
    enum iio_event_direction dir;
    unsigned long mask_separate;
    unsigned long mask_shared_by_type;
    unsigned long mask_shared_by_dir;
    unsigned long mask_shared_by_all;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>Type of the event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dir</span></code></dt><dd><p>Direction of the event</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_separate</span></code></dt><dd><p>Bit mask of enum iio_event_info values. Attributes
set in this mask will be registered per channel.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_shared_by_type</span></code></dt><dd><p>Bit mask of enum iio_event_info values. Attributes
set in this mask will be shared by channel type.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_shared_by_dir</span></code></dt><dd><p>Bit mask of enum iio_event_info values. Attributes
set in this mask will be shared by channel type and
direction.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_shared_by_all</span></code></dt><dd><p>Bit mask of enum iio_event_info values. Attributes
set in this mask will be shared by all channels.</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_chan_spec">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_chan_spec</span></span></span><a class="headerlink" href="#c.iio_chan_spec" title="Link to this definition">¶</a><br /></dt>
<dd><p>specification of a single channel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_chan_spec {
    enum iio_chan_type      type;
    int channel;
    int channel2;
    unsigned long           address;
    int scan_index;
    struct {
        char sign;
        u8 realbits;
        u8 storagebits;
        u8 shift;
        u8 repeat;
        enum iio_endian endianness;
    } scan_type;
    long info_mask_separate;
    long info_mask_separate_available;
    long info_mask_shared_by_type;
    long info_mask_shared_by_type_available;
    long info_mask_shared_by_dir;
    long info_mask_shared_by_dir_available;
    long info_mask_shared_by_all;
    long info_mask_shared_by_all_available;
    const struct iio_event_spec *event_spec;
    unsigned int            num_event_specs;
    const struct iio_chan_spec_ext_info *ext_info;
    const char              *extend_name;
    const char              *datasheet_name;
    unsigned modified:1;
    unsigned indexed:1;
    unsigned output:1;
    unsigned differential:1;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>What type of measurement is the channel making.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channel</span></code></dt><dd><p>What number do we wish to assign the channel.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channel2</span></code></dt><dd><p>If there is a second number for a differential
channel then this is it. If modified is set then the
value here specifies the modifier.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">address</span></code></dt><dd><p>Driver specific identifier.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_index</span></code></dt><dd><p>Monotonic index to give ordering in scans when read
from a buffer.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type</span></code></dt><dd><p>struct describing the scan type</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.sign</span></code></dt><dd><p>‘s’ or ‘u’ to specify signed or unsigned</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.realbits</span></code></dt><dd><p>Number of valid bits of data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.storagebits</span></code></dt><dd><p>Realbits + padding</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.shift</span></code></dt><dd><p>Shift right by this before masking out
realbits.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.repeat</span></code></dt><dd><p>Number of times real/storage bits repeats.
When the repeat element is more than 1, then
the type element in sysfs will show a repeat
value. Otherwise, the number of repetitions
is omitted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_type.endianness</span></code></dt><dd><p>little or big endian</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_separate</span></code></dt><dd><p>What information is to be exported that is specific to
this channel.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_separate_available</span></code></dt><dd><p>What availability information is to be
exported that is specific to this channel.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_type</span></code></dt><dd><p>What information is to be exported that is shared
by all channels of the same type.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_type_available</span></code></dt><dd><p>What availability information is to be
exported that is shared by all channels of the same
type.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_dir</span></code></dt><dd><p>What information is to be exported that is shared
by all channels of the same direction.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_dir_available</span></code></dt><dd><p>What availability information is to be
exported that is shared by all channels of the same
direction.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_all</span></code></dt><dd><p>What information is to be exported that is shared
by all channels.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info_mask_shared_by_all_available</span></code></dt><dd><p>What availability information is to be
exported that is shared by all channels.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">event_spec</span></code></dt><dd><p>Array of events which should be registered for this
channel.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_event_specs</span></code></dt><dd><p>Size of the event_spec array.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ext_info</span></code></dt><dd><p>Array of extended info attributes for this channel.
The array is NULL terminated, the last element should
have its name field set to NULL.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">extend_name</span></code></dt><dd><p>Allows labeling of channel attributes with an
informative name. Note this has no effect codes etc,
unlike modifiers.
This field is deprecated in favour of providing
iio_info-&gt;read_label() to override the label, which
unlike <strong>extend_name</strong> does not affect sysfs filenames.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">datasheet_name</span></code></dt><dd><p>A name used in in-kernel mapping of channels. It should
correspond to the first name that the channel is referred
to by in the datasheet (e.g. IND), or the nearest
possible compound name (e.g. IND-INC).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">modified</span></code></dt><dd><p>Does a modifier apply to this channel. What these are
depends on the channel type.  Modifier is set in
channel2. Examples are IIO_MOD_X for axial sensors about
the ‘x’ axis.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">indexed</span></code></dt><dd><p>Specify the channel has a numerical index. If not,
the channel index number will be suppressed for sysfs
attributes but not for event codes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">output</span></code></dt><dd><p>Channel is output.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">differential</span></code></dt><dd><p>Channel is differential.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_channel_has_info">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_channel_has_info</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><span class="n"><span class="pre">iio_chan_spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">chan</span></span>, <span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="n"><span class="pre">iio_chan_info_enum</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_channel_has_info" title="Link to this definition">¶</a><br /></dt>
<dd><p>Checks whether a channel supports a info attribute</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_chan_spec</span> <span class="pre">*chan</span></code></dt><dd><p>The channel to be queried</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">iio_chan_info_enum</span> <span class="pre">type</span></code></dt><dd><p>Type of the info attribute to be checked</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns true if the channels supports reporting values for the given info
attribute type, false otherwise.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_channel_has_available">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_channel_has_available</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_chan_spec" title="iio_chan_spec"><span class="n"><span class="pre">iio_chan_spec</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">chan</span></span>, <span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="n"><span class="pre">iio_chan_info_enum</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_channel_has_available" title="Link to this definition">¶</a><br /></dt>
<dd><p>Checks if a channel has an available attribute</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_chan_spec</span> <span class="pre">*chan</span></code></dt><dd><p>The channel to be queried</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">iio_chan_info_enum</span> <span class="pre">type</span></code></dt><dd><p>Type of the available attribute to be checked</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns true if the channel supports reporting available values for the
given attribute type, false otherwise.</p>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_info">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_info</span></span></span><a class="headerlink" href="#c.iio_info" title="Link to this definition">¶</a><br /></dt>
<dd><p>constant information about device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_info {
    const struct attribute_group    *event_attrs;
    const struct attribute_group    *attrs;
    int (*read_raw)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int *val,int *val2, long mask);
    int (*read_raw_multi)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int max_len,int *vals,int *val_len, long mask);
    int (*read_avail)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,const int **vals,int *type,int *length, long mask);
    int (*write_raw)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,int val,int val2, long mask);
    int (*read_label)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan, char *label);
    int (*write_raw_get_fmt)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan, long mask);
    int (*read_event_config)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type, enum iio_event_direction dir);
    int (*write_event_config)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir, int state);
    int (*read_event_value)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir, enum iio_event_info info, int *val, int *val2);
    int (*write_event_value)(struct iio_dev *indio_dev,const struct iio_chan_spec *chan,enum iio_event_type type,enum iio_event_direction dir, enum iio_event_info info, int val, int val2);
    int (*read_event_label)(struct iio_dev *indio_dev,struct iio_chan_spec const *chan,enum iio_event_type type,enum iio_event_direction dir, char *label);
    int (*validate_trigger)(struct iio_dev *indio_dev, struct iio_trigger *trig);
    int (*update_scan_mode)(struct iio_dev *indio_dev, const unsigned long *scan_mask);
    int (*debugfs_reg_access)(struct iio_dev *indio_dev,unsigned reg, unsigned writeval, unsigned *readval);
    int (*fwnode_xlate)(struct iio_dev *indio_dev, const struct fwnode_reference_args *iiospec);
    int (*hwfifo_set_watermark)(struct iio_dev *indio_dev, unsigned val);
    int (*hwfifo_flush_to_buffer)(struct iio_dev *indio_dev, unsigned count);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">event_attrs</span></code></dt><dd><p>event control attributes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">attrs</span></code></dt><dd><p>general purpose device attributes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_raw</span></code></dt><dd><p>function to request a value from the device.
mask specifies which value. Note 0 means a reading of
the channel in question.  Return value will specify the
type of value returned by the device. val and val2 will
contain the elements making up the returned value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_raw_multi</span></code></dt><dd><p>function to return values from the device.
mask specifies which value. Note 0 means a reading of
the channel in question.  Return value will specify the
type of value returned by the device. vals pointer
contain the elements making up the returned value.
max_len specifies maximum number of elements
vals pointer can contain. val_len is used to return
length of valid elements in vals.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_avail</span></code></dt><dd><p>function to return the available values from the device.
mask specifies which value. Note 0 means the available
values for the channel in question.  Return value
specifies if a IIO_AVAIL_LIST or a IIO_AVAIL_RANGE is
returned in vals. The type of the vals are returned in
type and the number of vals is returned in length. For
ranges, there are always three vals returned; min, step
and max. For lists, all possible values are enumerated.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_raw</span></code></dt><dd><p>function to write a value to the device.
Parameters are the same as for read_raw.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_label</span></code></dt><dd><p>function to request label name for a specified label,
for better channel identification.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_raw_get_fmt</span></code></dt><dd><p>callback function to query the expected
format/precision. If not set by the driver, write_raw
returns IIO_VAL_INT_PLUS_MICRO.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_event_config</span></code></dt><dd><p>find out if the event is enabled.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_event_config</span></code></dt><dd><p>set if the event is enabled.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_event_value</span></code></dt><dd><p>read a configuration value associated with the event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write_event_value</span></code></dt><dd><p>write a configuration value for the event.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_event_label</span></code></dt><dd><p>function to request label name for a specified label,
for better event identification.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">validate_trigger</span></code></dt><dd><p>function to validate the trigger when the
current trigger gets changed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">update_scan_mode</span></code></dt><dd><p>function to configure device and scan buffer when
channels have changed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">debugfs_reg_access</span></code></dt><dd><p>function to read or write register value of device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">fwnode_xlate</span></code></dt><dd><p>fwnode based function pointer to obtain channel specifier index.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwfifo_set_watermark</span></code></dt><dd><p>function pointer to set the current hardware
fifo watermark level; see hwfifo_* entries in
Documentation/ABI/testing/sysfs-bus-iio for details on
how the hardware fifo operates</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hwfifo_flush_to_buffer</span></code></dt><dd><p>function pointer to flush the samples stored
in the hardware fifo to the device buffer. The driver
should not flush more than count samples. The function
must return the number of samples flushed, 0 if no
samples were flushed or a negative integer if no samples
were flushed and there was an error.</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_buffer_setup_ops">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_buffer_setup_ops</span></span></span><a class="headerlink" href="#c.iio_buffer_setup_ops" title="Link to this definition">¶</a><br /></dt>
<dd><p>buffer setup related callbacks</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_buffer_setup_ops {
    int (*preenable)(struct iio_dev *);
    int (*postenable)(struct iio_dev *);
    int (*predisable)(struct iio_dev *);
    int (*postdisable)(struct iio_dev *);
    bool (*validate_scan_mask)(struct iio_dev *indio_dev, const unsigned long *scan_mask);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">preenable</span></code></dt><dd><p>[DRIVER] function to run prior to marking buffer enabled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">postenable</span></code></dt><dd><p>[DRIVER] function to run after marking buffer enabled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">predisable</span></code></dt><dd><p>[DRIVER] function to run prior to marking buffer
disabled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">postdisable</span></code></dt><dd><p>[DRIVER] function to run after marking buffer disabled</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">validate_scan_mask</span></code></dt><dd><p>[DRIVER] function callback to check whether a given
scan mask is valid for the device.</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.iio_dev">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_dev</span></span></span><a class="headerlink" href="#c.iio_dev" title="Link to this definition">¶</a><br /></dt>
<dd><p>industrial I/O device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct iio_dev {
    int modes;
    struct device                   dev;
    struct iio_buffer               *buffer;
    int scan_bytes;
    const unsigned long             *available_scan_masks;
    unsigned masklength;
    const unsigned long             *active_scan_mask;
    bool scan_timestamp;
    struct iio_trigger              *trig;
    struct iio_poll_func            *pollfunc;
    struct iio_poll_func            *pollfunc_event;
    struct iio_chan_spec const      *channels;
    int num_channels;
    const char                      *name;
    const char                      *label;
    const struct iio_info           *info;
    const struct iio_buffer_setup_ops       *setup_ops;
    void *priv;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">modes</span></code></dt><dd><p>[DRIVER] bitmask listing all the operating modes
supported by the IIO device. This list should be
initialized before registering the IIO device. It can
also be filed up by the IIO core, as a result of
enabling particular features in the driver
(see iio_triggered_event_setup()).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>[DRIVER] device structure, should be assigned a parent
and owner</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buffer</span></code></dt><dd><p>[DRIVER] any buffer present</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_bytes</span></code></dt><dd><p>[INTERN] num bytes captured to be fed to buffer demux</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">available_scan_masks</span></code></dt><dd><p>[DRIVER] optional array of allowed bitmasks. Sort the
array in order of preference, the most preferred
masks first.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">masklength</span></code></dt><dd><p>[INTERN] the length of the mask established from
channels</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">active_scan_mask</span></code></dt><dd><p>[INTERN] union of all scan masks requested by buffers</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">scan_timestamp</span></code></dt><dd><p>[INTERN] set if any buffers have requested timestamp</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">trig</span></code></dt><dd><p>[INTERN] current device trigger (buffer modes)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pollfunc</span></code></dt><dd><p>[DRIVER] function run on trigger being received</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pollfunc_event</span></code></dt><dd><p>[DRIVER] function run on events trigger being received</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">channels</span></code></dt><dd><p>[DRIVER] channel specification structure table</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">num_channels</span></code></dt><dd><p>[DRIVER] number of channels specified in <strong>channels</strong>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>[DRIVER] name of the device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">label</span></code></dt><dd><p>[DRIVER] unique name to identify which device this is</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">info</span></code></dt><dd><p>[DRIVER] callbacks and constant info from driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">setup_ops</span></code></dt><dd><p>[DRIVER] callbacks to call before and after buffer
enable/disable</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt><dd><p>[DRIVER] reference to driver’s private information
<strong>MUST</strong> be accessed <strong>ONLY</strong> via iio_priv() helper</p>
</dd>
</dl>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.iio_device_register">
<span class="sig-name descname"><span class="n"><span class="pre">iio_device_register</span></span></span><a class="headerlink" href="#c.iio_device_register" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">iio_device_register</span> <span class="pre">(indio_dev)</span></code></p>
<blockquote>
<div><p>register a device with the IIO subsystem</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">indio_dev</span></code></dt><dd><p>Device structure filled by the device driver</p>
</dd>
</dl>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.devm_iio_device_register">
<span class="sig-name descname"><span class="n"><span class="pre">devm_iio_device_register</span></span></span><a class="headerlink" href="#c.devm_iio_device_register" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">devm_iio_device_register</span> <span class="pre">(dev,</span> <span class="pre">indio_dev)</span></code></p>
<blockquote>
<div><p>Resource-managed <a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a></p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>Device to allocate iio_dev for</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">indio_dev</span></code></dt><dd><p>Device structure filled by the device driver</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Managed iio_device_register.  The IIO device registered with this
function is automatically unregistered on driver detach. This function
calls <a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a> internally. Refer to that function for more
information.</p>
<p><strong>Return</strong></p>
<p>0 on success, negative error number on failure.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.iio_device_claim_direct_scoped">
<span class="sig-name descname"><span class="n"><span class="pre">iio_device_claim_direct_scoped</span></span></span><a class="headerlink" href="#c.iio_device_claim_direct_scoped" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">iio_device_claim_direct_scoped</span> <span class="pre">(fail,</span> <span class="pre">iio_dev)</span></code></p>
<blockquote>
<div><p>Scoped call to iio_device_claim_direct.</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fail</span></code></dt><dd><p>What to do on failure to claim device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">iio_dev</span></code></dt><dd><p>Pointer to the IIO devices structure</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_put">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_put</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_put" title="Link to this definition">¶</a><br /></dt>
<dd><p>reference counted deallocation of <a class="reference internal" href="../infrastructure.html#c.device" title="device"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a></p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure containing the device</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dev_to_iio_dev">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dev_to_iio_dev</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dev_to_iio_dev" title="Link to this definition">¶</a><br /></dt>
<dd><p>Get IIO device struct from a device struct</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>The device embedded in the IIO device</p>
</dd>
</dl>
<p><strong>Note</strong></p>
<p>The device must be a IIO device, otherwise the result is undefined.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_get">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_get</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_get" title="Link to this definition">¶</a><br /></dt>
<dd><p>increment reference count for the device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>The passed IIO device</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_set_parent">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_set_parent</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_set_parent" title="Link to this definition">¶</a><br /></dt>
<dd><p>assign parent device to the IIO device object</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>reference to parent device object</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This utility must be called between IIO device allocation
(via <a class="reference internal" href="#c.devm_iio_device_alloc" title="devm_iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_iio_device_alloc()</span></code></a>) &amp; IIO device registration
(via <a class="reference internal" href="#c.iio_device_register" title="iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_register()</span></code></a> and <a class="reference internal" href="#c.devm_iio_device_register" title="devm_iio_device_register"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_iio_device_register()</span></code></a>)).
By default, the device allocation will also assign a parent device to
the IIO device object. In cases where <a class="reference internal" href="#c.devm_iio_device_alloc" title="devm_iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">devm_iio_device_alloc()</span></code></a> is used,
sometimes the parent device must be different than the device used to
manage the allocation.
In that case, this helper should be used to change the parent, hence the
requirement to call this between allocation &amp; registration.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_set_drvdata">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_set_drvdata</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_set_drvdata" title="Link to this definition">¶</a><br /></dt>
<dd><p>Set device driver data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>Driver specific data</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allows to attach an arbitrary pointer to an IIO device, which can later be
retrieved by <a class="reference internal" href="#c.iio_device_get_drvdata" title="iio_device_get_drvdata"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_get_drvdata()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_get_drvdata">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_get_drvdata</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_get_drvdata" title="Link to this definition">¶</a><br /></dt>
<dd><p>Get device driver data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the data previously set with <a class="reference internal" href="#c.iio_device_set_drvdata" title="iio_device_set_drvdata"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_set_drvdata()</span></code></a></p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_get_debugfs_dentry">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dentry</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">iio_get_debugfs_dentry</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_get_debugfs_dentry" title="Link to this definition">¶</a><br /></dt>
<dd><p>helper function to get the debugfs_dentry</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure for device</p>
</dd>
</dl>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.IIO_DEGREE_TO_RAD">
<span class="sig-name descname"><span class="n"><span class="pre">IIO_DEGREE_TO_RAD</span></span></span><a class="headerlink" href="#c.IIO_DEGREE_TO_RAD" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">IIO_DEGREE_TO_RAD</span> <span class="pre">(deg)</span></code></p>
<blockquote>
<div><p>Convert degree to rad</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">deg</span></code></dt><dd><p>A value in degree</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from degree to rad</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.IIO_RAD_TO_DEGREE">
<span class="sig-name descname"><span class="n"><span class="pre">IIO_RAD_TO_DEGREE</span></span></span><a class="headerlink" href="#c.IIO_RAD_TO_DEGREE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">IIO_RAD_TO_DEGREE</span> <span class="pre">(rad)</span></code></p>
<blockquote>
<div><p>Convert rad to degree</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">rad</span></code></dt><dd><p>A value in rad</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from rad to degree</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.IIO_G_TO_M_S_2">
<span class="sig-name descname"><span class="n"><span class="pre">IIO_G_TO_M_S_2</span></span></span><a class="headerlink" href="#c.IIO_G_TO_M_S_2" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">IIO_G_TO_M_S_2</span> <span class="pre">(g)</span></code></p>
<blockquote>
<div><p>Convert g to meter / second**2</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">g</span></code></dt><dd><p>A value in g</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from g to meter / second**2</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.IIO_M_S_2_TO_G">
<span class="sig-name descname"><span class="n"><span class="pre">IIO_M_S_2_TO_G</span></span></span><a class="headerlink" href="#c.IIO_M_S_2_TO_G" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">IIO_M_S_2_TO_G</span> <span class="pre">(ms2)</span></code></p>
<blockquote>
<div><p>Convert meter / second**2 to g</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ms2</span></code></dt><dd><p>A value in meter / second**2</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns the given value converted from meter / second**2 to g</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_id">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_id</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_id" title="Link to this definition">¶</a><br /></dt>
<dd><p>query the unique ID for the device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>Device structure whose ID is being queried</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>The IIO device ID is a unique index used for example for the naming
of the character device /dev/iio:device[ID].</p>
<p><strong>Return</strong></p>
<p>Unique ID for the device.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_buffer_enabled">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_buffer_enabled</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_buffer_enabled" title="Link to this definition">¶</a><br /></dt>
<dd><p>helper function to test if the buffer is enabled</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure for device</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>True, if the buffer is enabled.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_set_clock">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_set_clock</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span>, <span class="n"><span class="pre">clockid_t</span></span><span class="w"> </span><span class="n"><span class="pre">clock_id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_set_clock" title="Link to this definition">¶</a><br /></dt>
<dd><p>Set current timestamping clock for the device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure containing the device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clockid_t</span> <span class="pre">clock_id</span></code></dt><dd><p>timestamping clock POSIX identifier to set.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, or a negative error code.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_get_clock">
<span class="n"><span class="pre">clockid_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_get_clock</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_get_clock" title="Link to this definition">¶</a><br /></dt>
<dd><p>Retrieve current timestamping clock for the device</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure containing the device</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Clock ID of the current timestamping clock for the device.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_get_time_ns">
<span class="n"><span class="pre">s64</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_get_time_ns</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_get_time_ns" title="Link to this definition">¶</a><br /></dt>
<dd><p>utility function to get a time stamp for events etc</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>device</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Timestamp of the event in nanoseconds.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_read_mount_matrix">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_read_mount_matrix</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_mount_matrix" title="iio_mount_matrix"><span class="n"><span class="pre">iio_mount_matrix</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">matrix</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_read_mount_matrix" title="Link to this definition">¶</a><br /></dt>
<dd><p>retrieve iio device mounting matrix from device “mount-matrix” property</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>device the mounting matrix property is assigned to</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_mount_matrix</span> <span class="pre">*matrix</span></code></dt><dd><p>where to store retrieved matrix</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>If device is assigned no mounting matrix property, a default 3x3 identity
matrix will be filled in.</p>
<p><strong>Return</strong></p>
<p>0 if success, or a negative error code on failure.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_format_value">
<span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_format_value</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">vals</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_format_value" title="Link to this definition">¶</a><br /></dt>
<dd><p>Formats a IIO value into its string representation</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*buf</span></code></dt><dd><p>The buffer to which the formatted value gets written
which is assumed to be big enough (i.e. PAGE_SIZE).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">type</span></code></dt><dd><p>One of the IIO_VAL_* constants. This decides how the val
and val2 parameters are formatted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">size</span></code></dt><dd><p>Number of IIO value entries contained in vals</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*vals</span></code></dt><dd><p>Pointer to the values, exact meaning depends on the
type parameter.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 by default, a negative number on failure or the total number of characters
written for a type that belongs to the IIO_VAL_* constant.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_str_to_fixpoint">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_str_to_fixpoint</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">fract_mult</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">integer</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">fract</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_str_to_fixpoint" title="Link to this definition">¶</a><br /></dt>
<dd><p>Parse a fixed-point number from a string</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>The string to parse</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fract_mult</span></code></dt><dd><p>Multiplier for the first decimal place, should be a power of 10</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*integer</span></code></dt><dd><p>The integer part of the number</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*fract</span></code></dt><dd><p>The fractional part of the number</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>0 on success, or a negative error code if the string could not be parsed.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_alloc">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_alloc</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">sizeof_priv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_alloc" title="Link to this definition">¶</a><br /></dt>
<dd><p>allocate an iio_dev from a driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>Parent device.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sizeof_priv</span></code></dt><dd><p>Space to allocate for private structure.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Pointer to allocated iio_dev on success, NULL on failure.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_free">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_free</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_free" title="Link to this definition">¶</a><br /></dt>
<dd><p>free an iio_dev from a driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*dev</span></code></dt><dd><p>the iio_dev associated with the device</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.devm_iio_device_alloc">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">devm_iio_device_alloc</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">sizeof_priv</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.devm_iio_device_alloc" title="Link to this definition">¶</a><br /></dt>
<dd><p>Resource-managed <a class="reference internal" href="#c.iio_device_alloc" title="iio_device_alloc"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_alloc()</span></code></a></p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>Device to allocate iio_dev for, and parent for this IIO device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">sizeof_priv</span></code></dt><dd><p>Space to allocate for private structure.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Managed iio_device_alloc. iio_dev allocated with this function is
automatically freed on driver detach.</p>
<p><strong>Return</strong></p>
<p>Pointer to allocated iio_dev on success, NULL on failure.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_unregister">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_unregister</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_unregister" title="Link to this definition">¶</a><br /></dt>
<dd><p>unregister a device from the IIO subsystem</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>Device structure representing the device.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_claim_direct_mode">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_claim_direct_mode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_claim_direct_mode" title="Link to this definition">¶</a><br /></dt>
<dd><p>Keep device in direct mode</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>the iio_dev associated with the device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>If the device is in direct mode it is guaranteed to stay
that way until <a class="reference internal" href="#c.iio_device_release_direct_mode" title="iio_device_release_direct_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_release_direct_mode()</span></code></a> is called.</p>
<p>Use with <a class="reference internal" href="#c.iio_device_release_direct_mode" title="iio_device_release_direct_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_release_direct_mode()</span></code></a></p>
<p><strong>Return</strong></p>
<p>0 on success, -EBUSY on failure.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_release_direct_mode">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_release_direct_mode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_release_direct_mode" title="Link to this definition">¶</a><br /></dt>
<dd><p>releases claim on direct mode</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>the iio_dev associated with the device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Release the claim. Device is no longer guaranteed to stay
in direct mode.</p>
<p>Use with <a class="reference internal" href="#c.iio_device_claim_direct_mode" title="iio_device_claim_direct_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_claim_direct_mode()</span></code></a></p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_claim_buffer_mode">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_claim_buffer_mode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_claim_buffer_mode" title="Link to this definition">¶</a><br /></dt>
<dd><p>Keep device in buffer mode</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>the iio_dev associated with the device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>If the device is in buffer mode it is guaranteed to stay
that way until <a class="reference internal" href="#c.iio_device_release_buffer_mode" title="iio_device_release_buffer_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_release_buffer_mode()</span></code></a> is called.</p>
<p>Use with <a class="reference internal" href="#c.iio_device_release_buffer_mode" title="iio_device_release_buffer_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_release_buffer_mode()</span></code></a>.</p>
<p><strong>Return</strong></p>
<p>0 on success, -EBUSY on failure.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_release_buffer_mode">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_release_buffer_mode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_release_buffer_mode" title="Link to this definition">¶</a><br /></dt>
<dd><p>releases claim on buffer mode</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>the iio_dev associated with the device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Release the claim. Device is no longer guaranteed to stay
in buffer mode.</p>
<p>Use with <a class="reference internal" href="#c.iio_device_claim_buffer_mode" title="iio_device_claim_buffer_mode"><code class="xref c c-func docutils literal notranslate"><span class="pre">iio_device_claim_buffer_mode()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.iio_device_get_current_mode">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">iio_device_get_current_mode</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.iio_dev" title="iio_dev"><span class="n"><span class="pre">iio_dev</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">indio_dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.iio_device_get_current_mode" title="Link to this definition">¶</a><br /></dt>
<dd><p>helper function providing read-only access to the opaque <strong>currentmode</strong> variable</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">iio_dev</span> <span class="pre">*indio_dev</span></code></dt><dd><p>IIO device structure for device</p>
</dd>
</dl>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/driver-api/iio/core.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>