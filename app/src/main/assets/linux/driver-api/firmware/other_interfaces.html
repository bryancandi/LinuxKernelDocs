<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Other Firmware Interfaces &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=3918102e" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="FPGA Subsystem" href="../fpga/index.html" />
    <link rel="prev" title="Firmware Upload API" href="fw_upload.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.12.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Driver APIs</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#general-information-for-driver-authors">General information for driver authors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#useful-support-libraries">Useful support libraries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#bus-level-documentation">Bus-level documentation</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#subsystem-specific-apis">Subsystem-specific APIs</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../80211/index.html">Linux 802.11 Driver Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l3"><a class="reference internal" href="../clk.html">The Common Clk Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../console.html">Console Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crypto/index.html">Crypto Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dmaengine/index.html">DMAEngine documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../dpll.html">The Linux kernel dpll subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Linux Firmware API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fpga/index.html">FPGA Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../aperture.html">Managing Ownership of the Framebuffer Aperture</a></li>
<li class="toctree-l3"><a class="reference internal" href="../generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../hte/index.html">The Linux Hardware Timestamping Engine (HTE)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l3"><a class="reference internal" href="../infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../input.html">Input Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../interconnect.html">Generic System Interconnect Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ipmi.html">The Linux IPMI Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../libata.html">libATA Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mailbox.html">The Common Mailbox Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../md/index.html">RAID</a></li>
<li class="toctree-l3"><a class="reference internal" href="../media/index.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../message-based.html">Message-based devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mtd/index.html">Memory Technology Device (MTD)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ntb.html">NTB Drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pin-control.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pldmfw/index.html">PLDM Firmware Flash Update Library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pldmfw/index.html#overview-of-the-pldmfw-library">Overview of the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pwrseq.html">Power Sequencing API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reset.html">Reset controller API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sm501.html">SM501 Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../soundwire/index.html">SoundWire Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../surface_aggregator/index.html">Surface System Aggregator Module (SSAM)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tee.html">TEE (Trusted Execution Environment) driver API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thermal/index.html">Thermal</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tty/index.html">TTY</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wbrf.html">WBRF - Wifi Band RFI Mitigations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wmi.html">WMI Driver API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../zorro.html">Writing Device Drivers for Zorro Devices</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/driver-api/firmware/other_interfaces.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="other-firmware-interfaces">
<h1>Other Firmware Interfaces<a class="headerlink" href="#other-firmware-interfaces" title="Link to this heading">¶</a></h1>
<section id="dmi-interfaces">
<h2>DMI Interfaces<a class="headerlink" href="#dmi-interfaces" title="Link to this heading">¶</a></h2>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_check_system">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_check_system</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dmi_system_id</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">list</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_check_system" title="Link to this definition">¶</a><br /></dt>
<dd><p>check system DMI data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_system_id</span> <span class="pre">*list</span></code></dt><dd><p>array of dmi_system_id structures to match against
All non-null elements of the list must match
their slot’s (field index’s) data (i.e., each
list string must be a substring of the specified
DMI slot’s string data) to be considered a
successful match.</p>
<blockquote>
<div><p>Walk the blacklist table running matching functions until someone
returns non zero or we hit the end. Callback function is called for
each successful match. Returns the number of matches.</p>
<p>dmi_setup must be called before this function is called.</p>
</div></blockquote>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_first_match">
<span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dmi_system_id</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dmi_first_match</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dmi_system_id</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">list</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_first_match" title="Link to this definition">¶</a><br /></dt>
<dd><p>find dmi_system_id structure matching system DMI data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_system_id</span> <span class="pre">*list</span></code></dt><dd><p>array of dmi_system_id structures to match against
All non-null elements of the list must match
their slot’s (field index’s) data (i.e., each
list string must be a substring of the specified
DMI slot’s string data) to be considered a
successful match.</p>
<blockquote>
<div><p>Walk the blacklist table until the first match is found.  Return the
pointer to the matching entry or NULL if there’s no match.</p>
<p>dmi_setup must be called before this function is called.</p>
</div></blockquote>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_get_system_info">
<span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dmi_get_system_info</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">field</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_system_info" title="Link to this definition">¶</a><br /></dt>
<dd><p>return DMI data value</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">field</span></code></dt><dd><p>data index (see enum dmi_field)</p>
<p>Returns one DMI data value, can be used to perform
complex DMI data checks.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_name_in_vendors">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_name_in_vendors</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_name_in_vendors" title="Link to this definition">¶</a><br /></dt>
<dd><p>Check if string is in the DMI system or board vendor name</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>Case sensitive Name</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_find_device">
<span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dmi_device</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">dmi_find_device</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">type</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dmi_device</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">from</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_find_device" title="Link to this definition">¶</a><br /></dt>
<dd><p>find onboard device by type/name</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">type</span></code></dt><dd><p>device type or <code class="docutils literal notranslate"><span class="pre">DMI_DEV_TYPE_ANY</span></code> to match all device types</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>device name string or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> to match all</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dmi_device</span> <span class="pre">*from</span></code></dt><dd><p>previous device found in search, or <code class="docutils literal notranslate"><span class="pre">NULL</span></code> for new search.</p>
<p>Iterates through the list of known onboard devices. If a device is
found with a matching <strong>type</strong> and <strong>name</strong>, a pointer to its device
structure is returned.  Otherwise, <code class="docutils literal notranslate"><span class="pre">NULL</span></code> is returned.
A new search is initiated by passing <code class="docutils literal notranslate"><span class="pre">NULL</span></code> as the <strong>from</strong> argument.
If <strong>from</strong> is not <code class="docutils literal notranslate"><span class="pre">NULL</span></code>, searches continue from next device.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_get_date">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_get_date</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">field</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">yearp</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">monthp</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dayp</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_date" title="Link to this definition">¶</a><br /></dt>
<dd><p>parse a DMI date</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">field</span></code></dt><dd><p>data index (see enum dmi_field)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*yearp</span></code></dt><dd><p>optional out parameter for the year</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*monthp</span></code></dt><dd><p>optional out parameter for the month</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">*dayp</span></code></dt><dd><p>optional out parameter for the day</p>
<p>The date field is assumed to be in the form resembling
[mm[/dd]]/yy[yy] and the result is stored in the out
parameters any or all of which can be omitted.</p>
<p>If the field doesn’t exist, all out parameters are set to zero
and false is returned.  Otherwise, true is returned with any
invalid part of date set to zero.</p>
<p>On return, year, month and day are guaranteed to be in the
range of [0,9999], [0,12] and [0,31] respectively.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_get_bios_year">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_get_bios_year</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_get_bios_year" title="Link to this definition">¶</a><br /></dt>
<dd><p>get a year out of DMI_BIOS_DATE field</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<blockquote>
<div><p>Returns year on success, -ENXIO if DMI is not selected,
or a different negative error code if DMI field is not present
or not parseable.</p>
</div></blockquote>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_walk">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_walk</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">decode</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dmi_header</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">private_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_walk" title="Link to this definition">¶</a><br /></dt>
<dd><p>Walk the DMI table and get called back for every record</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*decode)(const</span> <span class="pre">struct</span> <span class="pre">dmi_header</span> <span class="pre">*,</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>Callback function</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*private_data</span></code></dt><dd><p>Private data to be passed to the callback function</p>
<p>Returns 0 on success, -ENXIO if DMI is not selected or not present,
or a different negative error code if DMI walking fails.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_match">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_match</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="n"><span class="pre">dmi_field</span></span><span class="w"> </span><span class="n"><span class="pre">f</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">str</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_match" title="Link to this definition">¶</a><br /></dt>
<dd><p>compare a string to the dmi field (if exists)</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">dmi_field</span> <span class="pre">f</span></code></dt><dd><p>DMI field identifier</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*str</span></code></dt><dd><p>string to compare the DMI field to</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns true if the requested field equals to the str (including NULL).</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_memdev_type">
<span class="n"><span class="pre">u8</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_memdev_type</span></span></span><span class="sig-paren">(</span><span class="n"><span class="pre">u16</span></span><span class="w"> </span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_memdev_type" title="Link to this definition">¶</a><br /></dt>
<dd><p>get the memory type</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">u16</span> <span class="pre">handle</span></code></dt><dd><p>DMI structure handle</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Return the DMI memory type of the module in the slot associated with the
given DMI handle, or 0x0 if no such DMI handle exists.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dmi_memdev_handle">
<span class="n"><span class="pre">u16</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">dmi_memdev_handle</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">slot</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dmi_memdev_handle" title="Link to this definition">¶</a><br /></dt>
<dd><p>get the DMI handle of a memory slot</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">slot</span></code></dt><dd><p>slot number</p>
<p>Return the DMI handle associated with a given memory slot, or <code class="docutils literal notranslate"><span class="pre">0xFFFF</span></code>
if there is no such slot.</p>
</dd>
</dl>
</div>
</section>
<section id="edd-interfaces">
<h2>EDD Interfaces<a class="headerlink" href="#edd-interfaces" title="Link to this heading">¶</a></h2>
<dl class="c function">
<dt class="sig sig-object c" id="c.edd_show_raw_data">
<span class="n"><span class="pre">ssize_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">edd_show_raw_data</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">edd_device</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">edev</span></span>, <span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_show_raw_data" title="Link to this definition">¶</a><br /></dt>
<dd><p>copies raw data to buffer for userspace to parse</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*edev</span></code></dt><dd><p>target edd_device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*buf</span></code></dt><dd><p>output buffer</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>number of bytes written, or -EINVAL on failure</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.edd_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">edd_release</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">kobject</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">kobj</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_release" title="Link to this definition">¶</a><br /></dt>
<dd><p>free edd structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">kobject</span> <span class="pre">*</span> <span class="pre">kobj</span></code></dt><dd><p>kobject of edd structure</p>
<p>This is called when the refcount of the edd structure
reaches 0. This should happen right after we unregister,
but just in case, we use the release callback anyway.</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.edd_dev_is_type">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">edd_dev_is_type</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">edd_device</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">edev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">type</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_dev_is_type" title="Link to this definition">¶</a><br /></dt>
<dd><p>is this EDD device a ‘type’ device?</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*edev</span></code></dt><dd><p>target edd_device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*type</span></code></dt><dd><p>a host bus or interface identifier string per the EDD spec</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns 1 (TRUE) if it is a ‘type’ device, 0 otherwise.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.edd_get_pci_dev">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">pci_dev</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">edd_get_pci_dev</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">edd_device</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">edev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_get_pci_dev" title="Link to this definition">¶</a><br /></dt>
<dd><p>finds pci_dev that matches edev</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">edd_device</span> <span class="pre">*edev</span></code></dt><dd><p>edd_device</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Returns pci_dev if found, or NULL</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.edd_init">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">edd_init</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.edd_init" title="Link to this definition">¶</a><br /></dt>
<dd><p>creates sysfs tree of EDD data</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
</div>
</section>
<section id="generic-system-framebuffers-interface">
<h2>Generic System Framebuffers Interface<a class="headerlink" href="#generic-system-framebuffers-interface" title="Link to this heading">¶</a></h2>
<dl class="c function">
<dt class="sig sig-object c" id="c.sysfb_disable">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">sysfb_disable</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="../infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.sysfb_disable" title="Link to this definition">¶</a><br /></dt>
<dd><p>disable the Generic System Framebuffers support</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>the device to check if non-NULL</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This disables the registration of system framebuffer devices that match the
generic drivers that make use of the system framebuffer set up by firmware.</p>
<p>It also unregisters a device if this was already registered by sysfb_init().</p>
<p><strong>Context</strong></p>
<p>The function can sleep. A <strong>disable_lock</strong> mutex is acquired to serialize
against sysfb_init(), that registers a system framebuffer device.</p>
</div>
</section>
<section id="intel-stratix10-soc-service-layer">
<h2>Intel Stratix10 SoC Service Layer<a class="headerlink" href="#intel-stratix10-soc-service-layer" title="Link to this heading">¶</a></h2>
<p>Some features of the Intel Stratix10 SoC require a level of privilege
higher than the kernel is granted. Such secure features include
FPGA programming. In terms of the ARMv8 architecture, the kernel runs
at Exception Level 1 (EL1), access to the features requires
Exception Level 3 (EL3).</p>
<p>The Intel Stratix10 SoC service layer provides an in kernel API for
drivers to request access to the secure features. The requests are queued
and processed one by one. ARM’s SMCCC is used to pass the execution
of the requests on to a secure monitor (EL3).</p>
<dl class="c enum">
<dt class="sig sig-object c" id="c.stratix10_svc_command_code">
<span class="k"><span class="pre">enum</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_command_code</span></span></span><a class="headerlink" href="#c.stratix10_svc_command_code" title="Link to this definition">¶</a><br /></dt>
<dd><p>supported service commands</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Constants</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_NOOP</span></code></dt><dd><p>do ‘dummy’ request for integration/debug/trouble-shooting</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG</span></code></dt><dd><p>ask for FPGA configuration preparation, return status
is SVC_STATUS_OK</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_DATA_SUBMIT</span></code></dt><dd><p>submit buffer(s) of bit-stream data for the
FPGA configuration, return status is SVC_STATUS_SUBMITTED or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_DATA_CLAIM</span></code></dt><dd><p>check the status of the configuration, return
status is SVC_STATUS_COMPLETED, or SVC_STATUS_BUSY, or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RECONFIG_STATUS</span></code></dt><dd><p>check the status of the configuration, return
status is SVC_STATUS_COMPLETED, or SVC_STATUS_BUSY, or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_STATUS</span></code></dt><dd><p>request remote system update boot log, return status
is log data or SVC_STATUS_RSU_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_UPDATE</span></code></dt><dd><p>set the offset of the bitstream to boot after reboot,
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_NOTIFY</span></code></dt><dd><p>report the status of hard processor system
software to firmware, return status is SVC_STATUS_OK or
SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_RETRY</span></code></dt><dd><p>query firmware for the current image’s retry counter,
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_MAX_RETRY</span></code></dt><dd><p>query firmware for the max retry value,
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_DCMF_VERSION</span></code></dt><dd><p>query firmware for the DCMF version, return status
is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_RSU_DCMF_STATUS</span></code></dt><dd><p>query firmware for the DCMF status
return status is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FIRMWARE_VERSION</span></code></dt><dd><p>query running firmware version, return status
is SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_REQUEST_SERVICE</span></code></dt><dd><p>request validation of image from firmware,
return status is SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_SEND_CERTIFICATE</span></code></dt><dd><p>send a certificate, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_GET_PROVISION_DATA</span></code></dt><dd><p>read the provisioning data, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_DATA_ENCRYPTION</span></code></dt><dd><p>encrypt the data, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_DATA_DECRYPTION</span></code></dt><dd><p>decrypt the data, return status is
SVC_STATUS_OK, SVC_STATUS_INVALID_PARAM, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_FCS_RANDOM_NUMBER_GEN</span></code></dt><dd><p>generate a random number, return status
is SVC_STATUS_OK, SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_POLL_SERVICE_STATUS</span></code></dt><dd><p>poll if the service request is complete,
return statis is SVC_STATUS_OK, SVC_STATUS_ERROR or SVC_STATUS_BUSY</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_MBOX_SEND_CMD</span></code></dt><dd><p>send generic mailbox command, return status is
SVC_STATUS_OK or SVC_STATUS_ERROR</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">COMMAND_SMC_SVC_VERSION</span></code></dt><dd><p>Non-mailbox SMC SVC API Version,
return status is SVC_STATUS_OK</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.stratix10_svc_client_msg">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_client_msg</span></span></span><a class="headerlink" href="#c.stratix10_svc_client_msg" title="Link to this definition">¶</a><br /></dt>
<dd><p>message sent by client to service</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_client_msg {
    void *payload;
    size_t payload_length;
    void *payload_output;
    size_t payload_length_output;
    enum stratix10_svc_command_code command;
    u64 arg[3];
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">payload</span></code></dt><dd><p>starting address of data need be processed</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_length</span></code></dt><dd><p>to be processed data size in bytes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_output</span></code></dt><dd><p>starting address of processed data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">payload_length_output</span></code></dt><dd><p>processed data size in bytes</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command</span></code></dt><dd><p>service command</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">arg</span></code></dt><dd><p>args to be passed via registers and not physically mapped buffers</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.stratix10_svc_command_config_type">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_command_config_type</span></span></span><a class="headerlink" href="#c.stratix10_svc_command_config_type" title="Link to this definition">¶</a><br /></dt>
<dd><p>config type</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_command_config_type {
    u32 flags;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>flag bit for the type of FPGA configuration</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.stratix10_svc_cb_data">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_cb_data</span></span></span><a class="headerlink" href="#c.stratix10_svc_cb_data" title="Link to this definition">¶</a><br /></dt>
<dd><p>callback data structure from service layer</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_cb_data {
    u32 status;
    void *kaddr1;
    void *kaddr2;
    void *kaddr3;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">status</span></code></dt><dd><p>the status of sent command</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr1</span></code></dt><dd><p>address of 1st completed data block</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr2</span></code></dt><dd><p>address of 2nd completed data block</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">kaddr3</span></code></dt><dd><p>address of 3rd completed data block</p>
</dd>
</dl>
</div>
<dl class="c struct">
<dt class="sig sig-object c" id="c.stratix10_svc_client">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_client</span></span></span><a class="headerlink" href="#c.stratix10_svc_client" title="Link to this definition">¶</a><br /></dt>
<dd><p>service client structure</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct stratix10_svc_client {
    struct device *dev;
    void (*receive_cb)(struct stratix10_svc_client *client, struct stratix10_svc_cb_data *cb_data);
    void *priv;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">dev</span></code></dt><dd><p>the client device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">receive_cb</span></code></dt><dd><p>callback to provide service client the received data</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">priv</span></code></dt><dd><p>client private data</p>
</dd>
</dl>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.stratix10_svc_request_channel_byname">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">stratix10_svc_chan</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_request_channel_byname</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.stratix10_svc_client" title="stratix10_svc_client"><span class="n"><span class="pre">stratix10_svc_client</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">client</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">name</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_request_channel_byname" title="Link to this definition">¶</a><br /></dt>
<dd><p>request a service channel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_client</span> <span class="pre">*client</span></code></dt><dd><p>pointer to service client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*name</span></code></dt><dd><p>service client name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to request a service channel.</p>
<p><strong>Return</strong></p>
<p>a pointer to channel assigned to the client on success,
or <a class="reference internal" href="../../core-api/kernel-api.html#c.ERR_PTR" title="ERR_PTR"><code class="xref c c-func docutils literal notranslate"><span class="pre">ERR_PTR()</span></code></a> on error.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.stratix10_svc_free_channel">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_free_channel</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">stratix10_svc_chan</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">chan</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_free_channel" title="Link to this definition">¶</a><br /></dt>
<dd><p>free service channel</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel to be freed</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to free a service channel.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.stratix10_svc_send">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_send</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">stratix10_svc_chan</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">chan</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">msg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_send" title="Link to this definition">¶</a><br /></dt>
<dd><p>send a message data to the remote</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*msg</span></code></dt><dd><p>message data to be sent, in the format of
“<a class="reference internal" href="#c.stratix10_svc_client_msg" title="stratix10_svc_client_msg"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_client_msg</span></code></a>”</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to add a message to the service
layer driver’s queue for being sent to the secure world.</p>
<p><strong>Return</strong></p>
<p>0 for success, -ENOMEM or -ENOBUFS on error.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.stratix10_svc_done">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_done</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">stratix10_svc_chan</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">chan</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_done" title="Link to this definition">¶</a><br /></dt>
<dd><p>complete service request transactions</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function should be called when client has finished its request
or there is an error in the request process. It allows the service layer
to stop the running thread to have maximize savings in kernel resources.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.stratix10_svc_allocate_memory">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_allocate_memory</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">stratix10_svc_chan</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">chan</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">size</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_allocate_memory" title="Link to this definition">¶</a><br /></dt>
<dd><p>allocate memory</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">size</span></code></dt><dd><p>memory size requested by a specific service client</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Service layer allocates the requested number of bytes buffer from the
memory pool, service client uses this function to get allocated buffers.</p>
<p><strong>Return</strong></p>
<p>address of allocated memory on success, or <a class="reference internal" href="../../core-api/kernel-api.html#c.ERR_PTR" title="ERR_PTR"><code class="xref c c-func docutils literal notranslate"><span class="pre">ERR_PTR()</span></code></a> on error.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.stratix10_svc_free_memory">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">stratix10_svc_free_memory</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">stratix10_svc_chan</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">chan</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">kaddr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.stratix10_svc_free_memory" title="Link to this definition">¶</a><br /></dt>
<dd><p>free allocated memory</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stratix10_svc_chan</span> <span class="pre">*chan</span></code></dt><dd><p>service channel assigned to the client</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*kaddr</span></code></dt><dd><p>memory to be freed</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function is used by service client to free allocated buffers.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../_sources/driver-api/firmware/other_interfaces.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>