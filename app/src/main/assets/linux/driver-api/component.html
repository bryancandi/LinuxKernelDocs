
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Component Helper for Aggregate Drivers &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Message-based devices" href="message-based.html" />
    <link rel="prev" title="Device links" href="device_link.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.6.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Driver implementer's API guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="driver-model/index.html">Driver Model</a></li>
<li class="toctree-l2"><a class="reference internal" href="basics.html">Driver Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="infrastructure.html">Device drivers infrastructure</a></li>
<li class="toctree-l2"><a class="reference internal" href="ioctl.html">ioctl based interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="early-userspace/index.html">Early Userspace</a></li>
<li class="toctree-l2"><a class="reference internal" href="pm/index.html">CPU and Device Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="clk.html">The Common Clk Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="device-io.html">Bus-Independent Device Accesses</a></li>
<li class="toctree-l2"><a class="reference internal" href="dma-buf.html">Buffer Sharing and Synchronization (dma-buf)</a></li>
<li class="toctree-l2"><a class="reference internal" href="device_link.html">Device links</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Component Helper for Aggregate Drivers</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#api">API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="message-based.html">Message-based devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="infiniband.html">InfiniBand and Remote DMA (RDMA) Interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="aperture.html">Managing Ownership of the Framebuffer Aperture</a></li>
<li class="toctree-l2"><a class="reference internal" href="frame-buffer.html">Frame Buffer Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="regulator.html">Voltage and current regulator API</a></li>
<li class="toctree-l2"><a class="reference internal" href="reset.html">Reset controller API</a></li>
<li class="toctree-l2"><a class="reference internal" href="iio/index.html">Industrial I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="input.html">Input Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="usb/index.html">Linux USB API</a></li>
<li class="toctree-l2"><a class="reference internal" href="firewire.html">Firewire (IEEE 1394) driver Interface Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="pci/index.html">The Linux PCI driver implementer's API guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="cxl/index.html">Compute Express Link</a></li>
<li class="toctree-l2"><a class="reference internal" href="spi.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="i2c.html">I<sup>2</sup>C and SMBus Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipmb.html">IPMB Driver for a Satellite MC</a></li>
<li class="toctree-l2"><a class="reference internal" href="ipmi.html">The Linux IPMI Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="i3c/index.html">I3C subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="interconnect.html">Generic System Interconnect Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="devfreq.html">Device Frequency Scaling</a></li>
<li class="toctree-l2"><a class="reference internal" href="hsi.html">High Speed Synchronous Serial Interface (HSI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="edac.html">Error Detection And Correction (EDAC) Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="scsi.html">SCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="libata.html">libATA Developer's Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="target.html">target and iSCSI Interfaces Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="mailbox.html">The Common Mailbox Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="mtdnand.html">MTD NAND Driver Programming Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="miscellaneous.html">Parallel Port Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="miscellaneous.html#x50-uart-driver">16x50 UART Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="miscellaneous.html#pulse-width-modulation-pwm">Pulse-Width Modulation (PWM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mei/index.html">Intel(R) Management Engine Interface (Intel(R) MEI)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mtd/index.html">Memory Technology Device (MTD)</a></li>
<li class="toctree-l2"><a class="reference internal" href="mmc/index.html">MMC/SD/SDIO card support</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvdimm/index.html">Non-Volatile Memory Device (NVDIMM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="w1.html">W1: Dallas' 1-wire bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="rapidio/index.html">The Linux RapidIO Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="s390-drivers.html">Writing s390 channel device drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="vme.html">VME Device Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="80211/index.html">Linux 802.11 Driver Developer's Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="uio-howto.html">The Userspace I/O HOWTO</a></li>
<li class="toctree-l2"><a class="reference internal" href="firmware/index.html">Linux Firmware API</a></li>
<li class="toctree-l2"><a class="reference internal" href="pin-control.html">PINCTRL (PIN CONTROL) subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpio/index.html">General Purpose Input/Output (GPIO)</a></li>
<li class="toctree-l2"><a class="reference internal" href="md/index.html">RAID</a></li>
<li class="toctree-l2"><a class="reference internal" href="media/index.html">Media subsystem kernel internal API</a></li>
<li class="toctree-l2"><a class="reference internal" href="misc_devices.html">Miscellaneous Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="nfc/index.html">Near Field Communication</a></li>
<li class="toctree-l2"><a class="reference internal" href="dmaengine/index.html">DMAEngine documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="slimbus.html">Linux kernel SLIMbus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="soundwire/index.html">SoundWire Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="thermal/index.html">Thermal</a></li>
<li class="toctree-l2"><a class="reference internal" href="fpga/index.html">FPGA Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="auxiliary_bus.html">Auxiliary Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="backlight/lp855x-driver.html">Kernel driver lp855x</a></li>
<li class="toctree-l2"><a class="reference internal" href="connector.html">Kernel Connector</a></li>
<li class="toctree-l2"><a class="reference internal" href="console.html">Console Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="dcdbas.html">Dell Systems Management Base Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="eisa.html">EISA bus support</a></li>
<li class="toctree-l2"><a class="reference internal" href="isa.html">ISA Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="isapnp.html">ISA Plug &amp; Play support by Jaroslav Kysela &lt;perex&#64;suse.cz&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="io-mapping.html">The io_mapping functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="io_ordering.html">Ordering I/O writes to memory-mapped addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="generic-counter.html">Generic Counter Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory-devices/index.html">Memory Controller drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="men-chameleon-bus.html">MEN Chameleon Bus</a></li>
<li class="toctree-l2"><a class="reference internal" href="ntb.html">NTB Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="nvmem.html">NVMEM Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="parport-lowlevel.html">PARPORT interface documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="pps.html">PPS - Pulse Per Second</a></li>
<li class="toctree-l2"><a class="reference internal" href="ptp.html">PTP hardware clock infrastructure for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="phy/index.html">Generic PHY Framework</a></li>
<li class="toctree-l2"><a class="reference internal" href="pwm.html">Pulse Width Modulation (PWM) interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="pldmfw/index.html">PLDM Firmware Flash Update Library</a></li>
<li class="toctree-l2"><a class="reference internal" href="pldmfw/index.html#overview-of-the-pldmfw-library">Overview of the <code class="docutils literal notranslate"><span class="pre">pldmfw</span></code> library</a></li>
<li class="toctree-l2"><a class="reference internal" href="rfkill.html">rfkill - RF kill switch support</a></li>
<li class="toctree-l2"><a class="reference internal" href="serial/index.html">Support for Serial devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="sm501.html">SM501 Driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="surface_aggregator/index.html">Surface System Aggregator Module (SSAM)</a></li>
<li class="toctree-l2"><a class="reference internal" href="switchtec.html">Linux Switchtec Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="sync_file.html">Sync File API Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="tty/index.html">TTY</a></li>
<li class="toctree-l2"><a class="reference internal" href="vfio-mediated-device.html">VFIO Mediated devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="vfio.html">VFIO - &quot;Virtual Function I/O&quot; </a></li>
<li class="toctree-l2"><a class="reference internal" href="vfio-pci-device-specific-driver-acceptance.html">Acceptance criteria for vfio-pci device specific driver variants</a></li>
<li class="toctree-l2"><a class="reference internal" href="virtio/index.html">Virtio</a></li>
<li class="toctree-l2"><a class="reference internal" href="xilinx/index.html">Xilinx FPGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="xillybus.html">Xillybus driver for generic FPGA interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="zorro.html">Writing Device Drivers for Zorro Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="hte/index.html">The Linux Hardware Timestamping Engine (HTE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="wmi.html">WMI Driver API</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../subsystem-apis.html">Kernel subsystem documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../subsystem-apis.html#core-subsystems">Core subsystems</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Driver implementer's API guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../mm/index.html">Memory Management Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../power/index.html">Power Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../scheduler/index.html">Scheduler</a></li>
<li class="toctree-l3"><a class="reference internal" href="../timers/index.html">Timers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../locking/index.html">Locking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../subsystem-apis.html#human-interfaces">Human interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">Locking in the kernel</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/license-rules.html">Linux kernel licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user's and administrator's guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">The kernel build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">User-space tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch/index.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  sbar.scrollTop = currents[currents.length - 1].offsetTop;
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/driver-api/component.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="component-helper-for-aggregate-drivers">
<span id="component"></span><h1>Component Helper for Aggregate Drivers<a class="headerlink" href="#component-helper-for-aggregate-drivers" title="Permalink to this heading">¶</a></h1>
<p>The component helper allows drivers to collect a pile of sub-devices,
including their bound drivers, into an aggregate driver. Various subsystems
already provide functions to get hold of such components, e.g.
of_clk_get_by_name(). The component helper can be used when such a
subsystem-specific way to find a device is not available: The component
helper fills the niche of aggregate drivers for specific hardware, where
further standardization into a subsystem would not be practical. The common
example is when a logical device (e.g. a DRM display driver) is spread around
the SoC on various components (scanout engines, blending blocks, transcoders
for various outputs and so on).</p>
<p>The component helper also doesn't solve runtime dependencies, e.g. for system
suspend and resume operations. See also <a class="reference internal" href="device_link.html#device-link"><span class="std std-ref">device links</span></a>.</p>
<p>Components are registered using <a class="reference internal" href="#c.component_add" title="component_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add()</span></code></a> and unregistered with
<a class="reference internal" href="#c.component_del" title="component_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_del()</span></code></a>, usually from the driver's probe and disconnect functions.</p>
<p>Aggregate drivers first assemble a component match list of what they need
using <a class="reference internal" href="#c.component_match_add" title="component_match_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add()</span></code></a>. This is then registered as an aggregate driver
using <a class="reference internal" href="#c.component_master_add_with_match" title="component_master_add_with_match"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_add_with_match()</span></code></a>, and unregistered using
<a class="reference internal" href="#c.component_master_del" title="component_master_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_del()</span></code></a>.</p>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this heading">¶</a></h2>
<dl class="c struct">
<dt class="sig sig-object c" id="c.component_ops">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_ops</span></span></span><a class="headerlink" href="#c.component_ops" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>callbacks for component drivers</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct component_ops {
    int (*bind)(struct device *comp, struct device *master, void *master_data);
    void (*unbind)(struct device *comp, struct device *master, void *master_data);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">bind</span></code></dt><dd><p>Called through <a class="reference internal" href="#c.component_bind_all" title="component_bind_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_bind_all()</span></code></a> when the aggregate driver is
ready to bind the overall driver.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unbind</span></code></dt><dd><p>Called through <a class="reference internal" href="#c.component_unbind_all" title="component_unbind_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_unbind_all()</span></code></a> when the aggregate driver is
ready to bind the overall driver, or when <a class="reference internal" href="#c.component_bind_all" title="component_bind_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_bind_all()</span></code></a> fails
part-ways through and needs to unbind some already bound components.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>Components are registered with <a class="reference internal" href="#c.component_add" title="component_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add()</span></code></a> and unregistered with
<a class="reference internal" href="#c.component_del" title="component_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_del()</span></code></a>.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.component_master_ops">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_master_ops</span></span></span><a class="headerlink" href="#c.component_master_ops" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>callback for the aggregate driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct component_master_ops {
    int (*bind)(struct device *master);
    void (*unbind)(struct device *master);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">bind</span></code></dt><dd><p>Called when all components or the aggregate driver, as specified in
the match list passed to <a class="reference internal" href="#c.component_master_add_with_match" title="component_master_add_with_match"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_add_with_match()</span></code></a>, are
ready. Usually there are 3 steps to bind an aggregate driver:</p>
<ol class="arabic simple">
<li><p>Allocate a structure for the aggregate driver.</p></li>
<li><p>Bind all components to the aggregate driver by calling
<a class="reference internal" href="#c.component_bind_all" title="component_bind_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_bind_all()</span></code></a> with the aggregate driver structure as opaque
pointer data.</p></li>
<li><p>Register the aggregate driver with the subsystem to publish its
interfaces.</p></li>
</ol>
<p>Note that the lifetime of the aggregate driver does not align with
any of the underlying <a class="reference internal" href="infrastructure.html#c.device" title="device"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span></code></a> instances. Therefore devm cannot
be used and all resources acquired or allocated in this callback must
be explicitly released in the <strong>unbind</strong> callback.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unbind</span></code></dt><dd><p>Called when either the aggregate driver, using
<a class="reference internal" href="#c.component_master_del" title="component_master_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_del()</span></code></a>, or one of its components, using
<a class="reference internal" href="#c.component_del" title="component_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_del()</span></code></a>, is unregistered.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>Aggregate drivers are registered with <a class="reference internal" href="#c.component_master_add_with_match" title="component_master_add_with_match"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_add_with_match()</span></code></a> and
unregistered with <a class="reference internal" href="#c.component_master_del" title="component_master_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_del()</span></code></a>.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_match_add">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_match_add</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">component_match</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">matchptr</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">compare</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">compare_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_match_add" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>add a component match entry</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>device with the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">component_match</span> <span class="pre">**matchptr</span></code></dt><dd><p>pointer to the list of component matches</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">(*compare)(struct</span> <span class="pre">device</span> <span class="pre">*,</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>compare function to match against all components</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*compare_data</span></code></dt><dd><p>opaque pointer passed to the <strong>compare</strong> function</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adds a new component match to the list stored in <strong>matchptr</strong>, which the <strong>parent</strong>
aggregate driver needs to function. The list of component matches pointed to
by <strong>matchptr</strong> must be initialized to NULL before adding the first match. This
only matches against components added with <a class="reference internal" href="#c.component_add" title="component_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add()</span></code></a>.</p>
<p>The allocated match list in <strong>matchptr</strong> is automatically released using devm
actions.</p>
<p>See also <a class="reference internal" href="#c.component_match_add_release" title="component_match_add_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_release()</span></code></a> and <a class="reference internal" href="#c.component_match_add_typed" title="component_match_add_typed"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_typed()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_compare_of">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_compare_of</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_compare_of" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A common component compare function for of_node</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>component device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p><strong>compare_data</strong> from <a class="reference internal" href="#c.component_match_add_release" title="component_match_add_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_release()</span></code></a></p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>A common compare function when compare_data is device of_node. e.g.
component_match_add_release(masterdev, <code class="xref c c-type docutils literal notranslate"><span class="pre">match</span></code>, component_release_of,
component_compare_of, component_dev_of_node)</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_release_of">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_release_of</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_release_of" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A common component release function for of_node</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>component device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p><strong>compare_data</strong> from <a class="reference internal" href="#c.component_match_add_release" title="component_match_add_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_release()</span></code></a></p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>About the example, Please see <a class="reference internal" href="#c.component_compare_of" title="component_compare_of"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_compare_of()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_compare_dev">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_compare_dev</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_compare_dev" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A common component compare function for dev</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>component device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p><strong>compare_data</strong> from <a class="reference internal" href="#c.component_match_add_release" title="component_match_add_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_release()</span></code></a></p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>A common compare function when compare_data is struce device. e.g.
component_match_add(masterdev, <code class="xref c c-type docutils literal notranslate"><span class="pre">match</span></code>, component_compare_dev, component_dev)</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_compare_dev_name">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_compare_dev_name</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_compare_dev_name" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>A common component compare function for device name</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>component device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p><strong>compare_data</strong> from <a class="reference internal" href="#c.component_match_add_release" title="component_match_add_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_release()</span></code></a></p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>A common compare function when compare_data is device name string. e.g.
component_match_add(masterdev, <code class="xref c c-type docutils literal notranslate"><span class="pre">match</span></code>, component_compare_dev_name,
&quot;component_dev_name&quot;)</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_match_add_release">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_match_add_release</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">component_match</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">matchptr</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">release</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">compare</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">compare_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_match_add_release" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>add a component match entry with release callback</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>parent device of the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">component_match</span> <span class="pre">**matchptr</span></code></dt><dd><p>pointer to the list of component matches</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">(*release)(struct</span> <span class="pre">device</span> <span class="pre">*,</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>release function for <strong>compare_data</strong></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">(*compare)(struct</span> <span class="pre">device</span> <span class="pre">*,</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>compare function to match against all components</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*compare_data</span></code></dt><dd><p>opaque pointer passed to the <strong>compare</strong> function</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adds a new component match to the list stored in <strong>matchptr</strong>, which the
aggregate driver needs to function. The list of component matches pointed to
by <strong>matchptr</strong> must be initialized to NULL before adding the first match. This
only matches against components added with <a class="reference internal" href="#c.component_add" title="component_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add()</span></code></a>.</p>
<p>The allocated match list in <strong>matchptr</strong> is automatically released using devm
actions, where upon <strong>release</strong> will be called to free any references held by
<strong>compare_data</strong>, e.g. when <strong>compare_data</strong> is a <code class="xref c c-type docutils literal notranslate"><span class="pre">device_node</span></code> that must be
released with <a class="reference internal" href="../devicetree/kernel-api.html#c.of_node_put" title="of_node_put"><code class="xref c c-func docutils literal notranslate"><span class="pre">of_node_put()</span></code></a>.</p>
<p>See also <a class="reference internal" href="#c.component_match_add" title="component_match_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add()</span></code></a> and <a class="reference internal" href="#c.component_match_add_typed" title="component_match_add_typed"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_typed()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_match_add_typed">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_match_add_typed</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">component_match</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">matchptr</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">compare_typed</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">*</span></span><span class="p"><span class="pre">)</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">compare_data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_match_add_typed" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>add a component match entry for a typed component</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>parent device of the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">component_match</span> <span class="pre">**matchptr</span></code></dt><dd><p>pointer to the list of component matches</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">(*compare_typed)(struct</span> <span class="pre">device</span> <span class="pre">*,</span> <span class="pre">int,</span> <span class="pre">void</span> <span class="pre">*)</span></code></dt><dd><p>compare function to match against all typed components</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*compare_data</span></code></dt><dd><p>opaque pointer passed to the <strong>compare</strong> function</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Adds a new component match to the list stored in <strong>matchptr</strong>, which the
aggregate driver needs to function. The list of component matches pointed to
by <strong>matchptr</strong> must be initialized to NULL before adding the first match. This
only matches against components added with <a class="reference internal" href="#c.component_add_typed" title="component_add_typed"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add_typed()</span></code></a>.</p>
<p>The allocated match list in <strong>matchptr</strong> is automatically released using devm
actions.</p>
<p>See also <a class="reference internal" href="#c.component_match_add_release" title="component_match_add_release"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_release()</span></code></a> and <a class="reference internal" href="#c.component_match_add_typed" title="component_match_add_typed"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_typed()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_master_add_with_match">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_master_add_with_match</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.component_master_ops" title="component_master_ops"><span class="n"><span class="pre">component_master_ops</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ops</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">component_match</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">match</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_master_add_with_match" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>register an aggregate driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>parent device of the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">component_master_ops</span> <span class="pre">*ops</span></code></dt><dd><p>callbacks for the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">component_match</span> <span class="pre">*match</span></code></dt><dd><p>component match list for the aggregate driver</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Registers a new aggregate driver consisting of the components added to <strong>match</strong>
by calling one of the <a class="reference internal" href="#c.component_match_add" title="component_match_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add()</span></code></a> functions. Once all components in
<strong>match</strong> are available, it will be assembled by calling
<a class="reference internal" href="#c.component_master_ops" title="component_master_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">component_master_ops.bind</span></code></a> from <strong>ops</strong>. Must be unregistered by calling
<a class="reference internal" href="#c.component_master_del" title="component_master_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_del()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_master_del">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_master_del</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.component_master_ops" title="component_master_ops"><span class="n"><span class="pre">component_master_ops</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ops</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_master_del" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>unregister an aggregate driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>parent device of the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">component_master_ops</span> <span class="pre">*ops</span></code></dt><dd><p>callbacks for the aggregate driver</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Unregisters an aggregate driver registered with
<a class="reference internal" href="#c.component_master_add_with_match" title="component_master_add_with_match"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_master_add_with_match()</span></code></a>. If necessary the aggregate driver is first
disassembled by calling <a class="reference internal" href="#c.component_master_ops" title="component_master_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">component_master_ops.unbind</span></code></a> from <strong>ops</strong>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_unbind_all">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_unbind_all</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_unbind_all" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>unbind all components of an aggregate driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>parent device of the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>opaque pointer, passed to all components</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Unbinds all components of the aggregate device by passing <strong>data</strong> to their
<a class="reference internal" href="#c.component_ops" title="component_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">component_ops.unbind</span></code></a> functions. Should be called from
<a class="reference internal" href="#c.component_master_ops" title="component_master_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">component_master_ops.unbind</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_bind_all">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_bind_all</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">parent</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">data</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_bind_all" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>bind all components of an aggregate driver</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*parent</span></code></dt><dd><p>parent device of the aggregate driver</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*data</span></code></dt><dd><p>opaque pointer, passed to all components</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Binds all components of the aggregate <strong>dev</strong> by passing <strong>data</strong> to their
<a class="reference internal" href="#c.component_ops" title="component_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">component_ops.bind</span></code></a> functions. Should be called from
<a class="reference internal" href="#c.component_master_ops" title="component_master_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">component_master_ops.bind</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_add_typed">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_add_typed</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.component_ops" title="component_ops"><span class="n"><span class="pre">component_ops</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ops</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">subcomponent</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_add_typed" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>register a component</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>component device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">component_ops</span> <span class="pre">*ops</span></code></dt><dd><p>component callbacks</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">subcomponent</span></code></dt><dd><p>nonzero identifier for subcomponents</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Register a new component for <strong>dev</strong>. Functions in <strong>ops</strong> will be call when the
aggregate driver is ready to bind the overall driver by calling
<a class="reference internal" href="#c.component_bind_all" title="component_bind_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_bind_all()</span></code></a>. See also <a class="reference internal" href="#c.component_ops" title="component_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">component_ops</span></code></a>.</p>
<p><strong>subcomponent</strong> must be nonzero and is used to differentiate between multiple
components registerd on the same device <strong>dev</strong>. These components are match
using <a class="reference internal" href="#c.component_match_add_typed" title="component_match_add_typed"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_match_add_typed()</span></code></a>.</p>
<p>The component needs to be unregistered at driver unload/disconnect by
calling <a class="reference internal" href="#c.component_del" title="component_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_del()</span></code></a>.</p>
<p>See also <a class="reference internal" href="#c.component_add" title="component_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add()</span></code></a>.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_add">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_add</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.component_ops" title="component_ops"><span class="n"><span class="pre">component_ops</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ops</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_add" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>register a component</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>component device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">component_ops</span> <span class="pre">*ops</span></code></dt><dd><p>component callbacks</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Register a new component for <strong>dev</strong>. Functions in <strong>ops</strong> will be called when the
aggregate driver is ready to bind the overall driver by calling
<a class="reference internal" href="#c.component_bind_all" title="component_bind_all"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_bind_all()</span></code></a>. See also <a class="reference internal" href="#c.component_ops" title="component_ops"><code class="xref c c-type docutils literal notranslate"><span class="pre">struct</span> <span class="pre">component_ops</span></code></a>.</p>
<p>The component needs to be unregistered at driver unload/disconnect by
calling <a class="reference internal" href="#c.component_del" title="component_del"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_del()</span></code></a>.</p>
<p>See also <a class="reference internal" href="#c.component_add_typed" title="component_add_typed"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add_typed()</span></code></a> for a variant that allows multipled different
components on the same device.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.component_del">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">component_del</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="infrastructure.html#c.device" title="device"><span class="n"><span class="pre">device</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">dev</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><a class="reference internal" href="#c.component_ops" title="component_ops"><span class="n"><span class="pre">component_ops</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ops</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.component_del" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>unregister a component</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">device</span> <span class="pre">*dev</span></code></dt><dd><p>component device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">component_ops</span> <span class="pre">*ops</span></code></dt><dd><p>component callbacks</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Unregister a component added with <a class="reference internal" href="#c.component_add" title="component_add"><code class="xref c c-func docutils literal notranslate"><span class="pre">component_add()</span></code></a>. If the component is bound
into an aggregate driver, this will force the entire aggregate driver, including
all its components, to be unbound.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/driver-api/component.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>