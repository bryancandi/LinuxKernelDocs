
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>How to help improve kernel documentation &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Development tools for the kernel" href="../dev-tools/index.html" />
    <link rel="prev" title="Including uAPI header files" href="parse-headers.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.8.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">Driver implementer's API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subsystem-apis.html">Kernel subsystem documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">Locking in the kernel</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../process/license-rules.html">Linux kernel licensing rules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">How to write kernel documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="sphinx.html">Using Sphinx for kernel documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-doc.html">Writing kernel-doc comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-doc.html#including-kernel-doc-comments">Including kernel-doc comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="parse-headers.html">Including uAPI header files</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">How to help improve kernel documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-documentation-todo-list">The documentation TODO list</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="maintainer-profile.html">Documentation subsystem maintainer entry profile</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Kernel Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user's and administrator's guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">The kernel build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">User-space tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch/index.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../RAS/ras.html">Reliability, Availability and Serviceability features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/doc-guide/contributing.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->



<div class="language-selection">
English

<ul>

<li><a href="../translations/zh_CN/doc-guide/contributing.html">Chinese (Simplified)</a></li>

</ul>
</div>
<section id="how-to-help-improve-kernel-documentation">
<h1>How to help improve kernel documentation<a class="headerlink" href="#how-to-help-improve-kernel-documentation" title="Permalink to this heading">¶</a></h1>
<p>Documentation is an important part of any software-development project.
Good documentation helps to bring new developers in and helps established
developers work more effectively.  Without top-quality documentation, a lot
of time is wasted in reverse-engineering the code and making avoidable
mistakes.</p>
<p>Unfortunately, the kernel's documentation currently falls far short of what
it needs to be to support a project of this size and importance.</p>
<p>This guide is for contributors who would like to improve that situation.
Kernel documentation improvements can be made by developers at a variety of
skill levels; they are a relatively easy way to learn the kernel process in
general and find a place in the community.  The bulk of what follows is the
documentation maintainer's list of tasks that most urgently need to be
done.</p>
<section id="the-documentation-todo-list">
<h2>The documentation TODO list<a class="headerlink" href="#the-documentation-todo-list" title="Permalink to this heading">¶</a></h2>
<p>There is an endless list of tasks that need to be carried out to get our
documentation to where it should be.  This list contains a number of
important items, but is far from exhaustive; if you see a different way to
improve the documentation, please do not hold back!</p>
<section id="addressing-warnings">
<h3>Addressing warnings<a class="headerlink" href="#addressing-warnings" title="Permalink to this heading">¶</a></h3>
<p>The documentation build currently spews out an unbelievable number of
warnings.  When you have that many, you might as well have none at all;
people ignore them, and they will never notice when their work adds new
ones.  For this reason, eliminating warnings is one of the highest-priority
tasks on the documentation TODO list.  The task itself is reasonably
straightforward, but it must be approached in the right way to be
successful.</p>
<p>Warnings issued by a compiler for C code can often be dismissed as false
positives, leading to patches aimed at simply shutting the compiler up.
Warnings from the documentation build almost always point at a real
problem; making those warnings go away requires understanding the problem
and fixing it at its source.  For this reason, patches fixing documentation
warnings should probably not say &quot;fix a warning&quot; in the changelog title;
they should indicate the real problem that has been fixed.</p>
<p>Another important point is that documentation warnings are often created by
problems in kerneldoc comments in C code.  While the documentation
maintainer appreciates being copied on fixes for these warnings, the
documentation tree is often not the right one to actually carry those
fixes; they should go to the maintainer of the subsystem in question.</p>
<p>For example, in a documentation build I grabbed a pair of warnings nearly
at random:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>./drivers/devfreq/devfreq.c:1818: warning: bad line:
      - Resource-managed devfreq_register_notifier()
./drivers/devfreq/devfreq.c:1854: warning: bad line:
      - Resource-managed devfreq_unregister_notifier()
</pre></div>
</div>
<p>(The lines were split for readability).</p>
<p>A quick look at the source file named above turned up a couple of kerneldoc
comments that look like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/**
 * devm_devfreq_register_notifier()
        - Resource-managed devfreq_register_notifier()
 * @dev:      The devfreq user device. (parent of devfreq)
 * @devfreq:  The devfreq object.
 * @nb:               The notifier block to be unregistered.
 * @list:     DEVFREQ_TRANSITION_NOTIFIER.
 */
</pre></div>
</div>
<p>The problem is the missing &quot;*&quot;, which confuses the build system's
simplistic idea of what C comment blocks look like.  This problem had been
present since that comment was added in 2016 — a full four years.  Fixing
it was a matter of adding the missing asterisks.  A quick look at the
history for that file showed what the normal format for subject lines is,
and <code class="docutils literal notranslate"><span class="pre">scripts/get_maintainer.pl</span></code> told me who should receive it (pass paths to
your patches as arguments to scripts/get_maintainer.pl).  The resulting patch
looked like this:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>[PATCH] PM / devfreq: Fix two malformed kerneldoc comments

Two kerneldoc comments in devfreq.c fail to adhere to the required format,
resulting in these doc-build warnings:

  ./drivers/devfreq/devfreq.c:1818: warning: bad line:
        - Resource-managed devfreq_register_notifier()
  ./drivers/devfreq/devfreq.c:1854: warning: bad line:
        - Resource-managed devfreq_unregister_notifier()

Add a couple of missing asterisks and make kerneldoc a little happier.

Signed-off-by: Jonathan Corbet &lt;corbet@lwn.net&gt;
---
 drivers/devfreq/devfreq.c | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/devfreq/devfreq.c b/drivers/devfreq/devfreq.c
index 57f6944d65a6..00c9b80b3d33 100644
--- a/drivers/devfreq/devfreq.c
+++ b/drivers/devfreq/devfreq.c
@@ -1814,7 +1814,7 @@ static void devm_devfreq_notifier_release(struct device *dev, void *res)

 /**
  * devm_devfreq_register_notifier()
-     - Resource-managed devfreq_register_notifier()
+ *   - Resource-managed devfreq_register_notifier()
  * @dev:     The devfreq user device. (parent of devfreq)
  * @devfreq: The devfreq object.
  * @nb:              The notifier block to be unregistered.
@@ -1850,7 +1850,7 @@ EXPORT_SYMBOL(devm_devfreq_register_notifier);

 /**
  * devm_devfreq_unregister_notifier()
-     - Resource-managed devfreq_unregister_notifier()
+ *   - Resource-managed devfreq_unregister_notifier()
  * @dev:     The devfreq user device. (parent of devfreq)
  * @devfreq: The devfreq object.
  * @nb:              The notifier block to be unregistered.
--
2.24.1
</pre></div>
</div>
<p>The entire process only took a few minutes.  Of course, I then found that
somebody else had fixed it in a separate tree, highlighting another lesson:
always check linux-next to see if a problem has been fixed before you dig
into it.</p>
<p>Other fixes will take longer, especially those relating to structure
members or function parameters that lack documentation.  In such cases, it
is necessary to work out what the role of those members or parameters is
and describe them correctly.  Overall, this task gets a little tedious at
times, but it's highly important.  If we can actually eliminate warnings
from the documentation build, then we can start expecting developers to
avoid adding new ones.</p>
<p>In addition to warnings from the regular documentation build, you can also
run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">refcheckdocs</span></code> to find references to nonexistent documentation
files.</p>
</section>
<section id="languishing-kerneldoc-comments">
<h3>Languishing kerneldoc comments<a class="headerlink" href="#languishing-kerneldoc-comments" title="Permalink to this heading">¶</a></h3>
<p>Developers are encouraged to write kerneldoc comments for their code, but
many of those comments are never pulled into the docs build.  That makes
this information harder to find and, for example, makes Sphinx unable to
generate links to that documentation.  Adding <code class="docutils literal notranslate"><span class="pre">kernel-doc</span></code> directives to
the documentation to bring those comments in can help the community derive
the full value of the work that has gone into creating them.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">scripts/find-unused-docs.sh</span></code> tool can be used to find these
overlooked comments.</p>
<p>Note that the most value comes from pulling in the documentation for
exported functions and data structures.  Many subsystems also have
kerneldoc comments for internal use; those should not be pulled into the
documentation build unless they are placed in a document that is
specifically aimed at developers working within the relevant subsystem.</p>
</section>
<section id="typo-fixes">
<h3>Typo fixes<a class="headerlink" href="#typo-fixes" title="Permalink to this heading">¶</a></h3>
<p>Fixing typographical or formatting errors in the documentation is a quick
way to figure out how to create and send patches, and it is a useful
service.  I am always willing to accept such patches.  That said, once you
have fixed a few, please consider moving on to more advanced tasks, leaving
some typos for the next beginner to address.</p>
<p>Please note that some things are <em>not</em> typos and should not be &quot;fixed&quot;:</p>
<blockquote>
<div><ul class="simple">
<li><p>Both American and British English spellings are allowed within the
kernel documentation.  There is no need to fix one by replacing it with
the other.</p></li>
<li><p>The question of whether a period should be followed by one or two spaces
is not to be debated in the context of kernel documentation.  Other
areas of rational disagreement, such as the &quot;Oxford comma&quot;, are also
off-topic here.</p></li>
</ul>
</div></blockquote>
<p>As with any patch to any project, please consider whether your change is
really making things better.</p>
</section>
<section id="ancient-documentation">
<h3>Ancient documentation<a class="headerlink" href="#ancient-documentation" title="Permalink to this heading">¶</a></h3>
<p>Some kernel documentation is current, maintained, and useful.  Some
documentation is ... not.  Dusty, old, and inaccurate documentation can
mislead readers and casts doubt on our documentation as a whole.  Anything
that can be done to address such problems is more than welcome.</p>
<p>Whenever you are working with a document, please consider whether it is
current, whether it needs updating, or whether it should perhaps be removed
altogether.  There are a number of warning signs that you can pay attention
to here:</p>
<blockquote>
<div><ul class="simple">
<li><p>References to 2.x kernels</p></li>
<li><p>Pointers to SourceForge repositories</p></li>
<li><p>Nothing but typo fixes in the history for several years</p></li>
<li><p>Discussion of pre-Git workflows</p></li>
</ul>
</div></blockquote>
<p>The best thing to do, of course, would be to bring the documentation
current, adding whatever information is needed.  Such work often requires
the cooperation of developers familiar with the subsystem in question, of
course.  Developers are often more than willing to cooperate with people
working to improve the documentation when asked nicely, and when their
answers are listened to and acted upon.</p>
<p>Some documentation is beyond hope; we occasionally find documents that
refer to code that was removed from the kernel long ago, for example.
There is surprising resistance to removing obsolete documentation, but we
should do that anyway.  Extra cruft in our documentation helps nobody.</p>
<p>In cases where there is perhaps some useful information in a badly outdated
document, and you are unable to update it, the best thing to do may be to
add a warning at the beginning.  The following text is recommended:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. warning ::
      This document is outdated and in need of attention.  Please use
      this information with caution, and please consider sending patches
      to update it.
</pre></div>
</div>
<p>That way, at least our long-suffering readers have been warned that the
document may lead them astray.</p>
</section>
<section id="documentation-coherency">
<h3>Documentation coherency<a class="headerlink" href="#documentation-coherency" title="Permalink to this heading">¶</a></h3>
<p>The old-timers around here will remember the Linux books that showed up on
the shelves in the 1990s.  They were simply collections of documentation
files scrounged from various locations on the net.  The books have (mostly)
improved since then, but the kernel's documentation is still mostly built
on that model.  It is thousands of files, almost each of which was written
in isolation from all of the others.  We don't have a coherent body of
kernel documentation; we have thousands of individual documents.</p>
<p>We have been trying to improve the situation through the creation of
a set of &quot;books&quot; that group documentation for specific readers.  These
include:</p>
<blockquote>
<div><ul class="simple">
<li><p><a class="reference internal" href="../admin-guide/index.html"><span class="doc">The Linux kernel user's and administrator's guide</span></a></p></li>
<li><p><a class="reference internal" href="../core-api/index.html"><span class="doc">Core API Documentation</span></a></p></li>
<li><p><a class="reference internal" href="../driver-api/index.html"><span class="doc">Driver implementer's API guide</span></a></p></li>
<li><p><a class="reference internal" href="../userspace-api/index.html"><span class="doc">The Linux kernel user-space API guide</span></a></p></li>
</ul>
</div></blockquote>
<p>As well as this book on documentation itself.</p>
<p>Moving documents into the appropriate books is an important task and needs
to continue.  There are a couple of challenges associated with this work,
though.  Moving documentation files creates short-term pain for the people
who work with those files; they are understandably unenthusiastic about
such changes.  Usually the case can be made to move a document once; we
really don't want to keep shifting them around, though.</p>
<p>Even when all documents are in the right place, though, we have only
managed to turn a big pile into a group of smaller piles.  The work of
trying to knit all of those documents together into a single whole has not
yet begun.  If you have bright ideas on how we could proceed on that front,
we would be more than happy to hear them.</p>
</section>
<section id="stylesheet-improvements">
<h3>Stylesheet improvements<a class="headerlink" href="#stylesheet-improvements" title="Permalink to this heading">¶</a></h3>
<p>With the adoption of Sphinx we have much nicer-looking HTML output than we
once did.  But it could still use a lot of improvement; Donald Knuth and
Edward Tufte would be unimpressed.  That requires tweaking our stylesheets
to create more typographically sound, accessible, and readable output.</p>
<p>Be warned: if you take on this task you are heading into classic bikeshed
territory.  Expect a lot of opinions and discussion for even relatively
obvious changes.  That is, alas, the nature of the world we live in.</p>
</section>
<section id="non-latex-pdf-build">
<h3>Non-LaTeX PDF build<a class="headerlink" href="#non-latex-pdf-build" title="Permalink to this heading">¶</a></h3>
<p>This is a decidedly nontrivial task for somebody with a lot of time and
Python skills.  The Sphinx toolchain is relatively small and well
contained; it is easy to add to a development system.  But building PDF or
EPUB output requires installing LaTeX, which is anything but small or well
contained.  That would be a nice thing to eliminate.</p>
<p>The original hope had been to use the rst2pdf tool (<a class="reference external" href="https://rst2pdf.org/">https://rst2pdf.org/</a>)
for PDF generation, but it turned out to not be up to the task.
Development work on rst2pdf seems to have picked up again in recent times,
though, which is a hopeful sign.  If a suitably motivated developer were to
work with that project to make rst2pdf work with the kernel documentation
build, the world would be eternally grateful.</p>
</section>
<section id="write-more-documentation">
<h3>Write more documentation<a class="headerlink" href="#write-more-documentation" title="Permalink to this heading">¶</a></h3>
<p>Naturally, there are massive parts of the kernel that are severely
underdocumented.  If you have the knowledge to document a specific kernel
subsystem and the desire to do so, please do not hesitate to do some
writing and contribute the result to the kernel.  Untold numbers of kernel
developers and users will thank you.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/doc-guide/contributing.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>