<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Using Sphinx for kernel documentation &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=a152c8ac" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Writing kernel-doc comments" href="kernel-doc.html" />
    <link rel="prev" title="How to write kernel documentation" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.10.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">Locking</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Writing documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Using Sphinx for kernel documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sphinx-install">Sphinx Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sphinx-build">Sphinx Build</a></li>
<li class="toctree-l3"><a class="reference internal" href="#writing-documentation">Writing Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#figures-images">Figures &amp; Images</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kernel-doc.html">Writing kernel-doc comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="kernel-doc.html#including-kernel-doc-comments">Including kernel-doc comments</a></li>
<li class="toctree-l2"><a class="reference internal" href="parse-headers.html">Including uAPI header files</a></li>
<li class="toctree-l2"><a class="reference internal" href="contributing.html">How to help improve kernel documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="maintainer-profile.html">Documentation subsystem maintainer entry profile</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/doc-guide/sphinx.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->



<div class="language-selection">
English

<ul>

<li><a href="../translations/zh_CN/doc-guide/sphinx.html">Chinese (Simplified)</a></li>

<li><a href="../translations/it_IT/doc-guide/sphinx.html">Italian</a></li>

</ul>
</div>
<section id="using-sphinx-for-kernel-documentation">
<span id="sphinxdoc"></span><h1>Using Sphinx for kernel documentation<a class="headerlink" href="#using-sphinx-for-kernel-documentation" title="Link to this heading">¶</a></h1>
<p>The Linux kernel uses <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> to generate pretty documentation from
<a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> files under <code class="docutils literal notranslate"><span class="pre">Documentation</span></code>. To build the documentation in
HTML or PDF formats, use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">htmldocs</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pdfdocs</span></code>. The generated
documentation is placed in <code class="docutils literal notranslate"><span class="pre">Documentation/output</span></code>.</p>
<p>The reStructuredText files may contain directives to include structured
documentation comments, or kernel-doc comments, from source files. Usually these
are used to describe the functions and types and design of the code. The
kernel-doc comments have some special structure and formatting, but beyond that
they are also treated as reStructuredText.</p>
<p>Finally, there are thousands of plain text documentation files scattered around
<code class="docutils literal notranslate"><span class="pre">Documentation</span></code>. Some of these will likely be converted to reStructuredText
over time, but the bulk of them will remain in plain text.</p>
<section id="sphinx-install">
<span id="id1"></span><h2>Sphinx Install<a class="headerlink" href="#sphinx-install" title="Link to this heading">¶</a></h2>
<p>The ReST markups currently used by the Documentation/ files are meant to be
built with <code class="docutils literal notranslate"><span class="pre">Sphinx</span></code> version 2.4.4 or higher.</p>
<p>There’s a script that checks for the Sphinx requirements. Please see
<a class="reference internal" href="#sphinx-pre-install"><span class="std std-ref">Checking for Sphinx dependencies</span></a> for further details.</p>
<p>Most distributions are shipped with Sphinx, but its toolchain is fragile,
and it is not uncommon that upgrading it or some other Python packages
on your machine would cause the documentation build to break.</p>
<p>A way to avoid that is to use a different version than the one shipped
with your distributions. In order to do so, it is recommended to install
Sphinx inside a virtual environment, using <code class="docutils literal notranslate"><span class="pre">virtualenv-3</span></code>
or <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>, depending on how your distribution packaged Python 3.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>It is recommended to use the RTD theme for html output. Depending
on the Sphinx version, it should be installed separately,
with <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">sphinx_rtd_theme</span></code>.</p></li>
</ol>
</div>
<p>In summary, if you want to install the latest version of Sphinx, you
should do:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ virtualenv sphinx_latest
$ . sphinx_latest/bin/activate
(sphinx_latest) $ pip install -r Documentation/sphinx/requirements.txt
</pre></div>
</div>
<p>After running <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">sphinx_latest/bin/activate</span></code>, the prompt will change,
in order to indicate that you’re using the new environment. If you
open a new shell, you need to rerun this command to enter again at
the virtual environment before building the documentation.</p>
<section id="image-output">
<h3>Image output<a class="headerlink" href="#image-output" title="Link to this heading">¶</a></h3>
<p>The kernel documentation build system contains an extension that
handles images in both GraphViz and SVG formats (see <a class="reference internal" href="#sphinx-kfigure"><span class="std std-ref">Figures &amp; Images</span></a>).</p>
<p>For it to work, you need to install both GraphViz and ImageMagick
packages. If those packages are not installed, the build system will
still build the documentation, but won’t include any images at the
output.</p>
</section>
<section id="pdf-and-latex-builds">
<h3>PDF and LaTeX builds<a class="headerlink" href="#pdf-and-latex-builds" title="Link to this heading">¶</a></h3>
<p>Such builds are currently supported only with Sphinx versions 2.4 and higher.</p>
<p>For PDF and LaTeX output, you’ll also need <code class="docutils literal notranslate"><span class="pre">XeLaTeX</span></code> version 3.14159265.</p>
<p>Depending on the distribution, you may also need to install a series of
<code class="docutils literal notranslate"><span class="pre">texlive</span></code> packages that provide the minimal set of functionalities
required for <code class="docutils literal notranslate"><span class="pre">XeLaTeX</span></code> to work.</p>
</section>
<section id="math-expressions-in-html">
<h3>Math Expressions in HTML<a class="headerlink" href="#math-expressions-in-html" title="Link to this heading">¶</a></h3>
<p>Some ReST pages contain math expressions. Due to the way Sphinx works,
those expressions are written using LaTeX notation.
There are two options for Sphinx to render math expressions in html output.
One is an extension called <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.imgmath">imgmath</a> which converts math expressions into
images and embeds them in html pages.
The other is an extension called <a class="reference external" href="https://www.sphinx-doc.org/en/master/usage/extensions/math.html#module-sphinx.ext.mathjax">mathjax</a> which delegates math rendering
to JavaScript capable web browsers.
The former was the only option for pre-6.1 kernel documentation and it
requires quite a few texlive packages including amsfonts and amsmath among
others.</p>
<p>Since kernel release 6.1, html pages with math expressions can be built
without installing any texlive packages. See <a class="reference internal" href="#choice-of-math-renderer">Choice of Math Renderer</a> for
further info.</p>
</section>
<section id="checking-for-sphinx-dependencies">
<span id="sphinx-pre-install"></span><h3>Checking for Sphinx dependencies<a class="headerlink" href="#checking-for-sphinx-dependencies" title="Link to this heading">¶</a></h3>
<p>There’s a script that automatically checks for Sphinx dependencies. If it can
recognize your distribution, it will also give a hint about the install
command line options for your distro:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./scripts/sphinx-pre-install
Checking if the needed tools for Fedora release 26 (Twenty Six) are available
Warning: better to also install &quot;texlive-luatex85&quot;.
You should run:

        sudo dnf install -y texlive-luatex85
        /usr/bin/virtualenv sphinx_2.4.4
        . sphinx_2.4.4/bin/activate
        pip install -r Documentation/sphinx/requirements.txt

Can&#39;t build as 1 mandatory dependency is missing at ./scripts/sphinx-pre-install line 468.
</pre></div>
</div>
<p>By default, it checks all the requirements for both html and PDF, including
the requirements for images, math expressions and LaTeX build, and assumes
that a virtual Python environment will be used. The ones needed for html
builds are assumed to be mandatory; the others to be optional.</p>
<p>It supports two optional parameters:</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">--no-pdf</span></code></dt><dd><p>Disable checks for PDF;</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">--no-virtualenv</span></code></dt><dd><p>Use OS packaging for Sphinx instead of Python virtual environment.</p>
</dd>
</dl>
</section>
</section>
<section id="sphinx-build">
<h2>Sphinx Build<a class="headerlink" href="#sphinx-build" title="Link to this heading">¶</a></h2>
<p>The usual way to generate the documentation is to run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">htmldocs</span></code> or
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pdfdocs</span></code>. There are also other formats available: see the documentation
section of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">help</span></code>. The generated documentation is placed in
format-specific subdirectories under <code class="docutils literal notranslate"><span class="pre">Documentation/output</span></code>.</p>
<p>To generate documentation, Sphinx (<code class="docutils literal notranslate"><span class="pre">sphinx-build</span></code>) must obviously be
installed.  For PDF output you’ll also need <code class="docutils literal notranslate"><span class="pre">XeLaTeX</span></code> and <code class="docutils literal notranslate"><span class="pre">convert(1)</span></code>
from ImageMagick (<a class="reference external" href="https://www.imagemagick.org">https://www.imagemagick.org</a>).<a class="footnote-reference brackets" href="#ink" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a> All of these are
widely available and packaged in distributions.</p>
<p>To pass extra options to Sphinx, you can use the <code class="docutils literal notranslate"><span class="pre">SPHINXOPTS</span></code> make
variable. For example, use <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">SPHINXOPTS=-v</span> <span class="pre">htmldocs</span></code> to get more verbose
output.</p>
<p>It is also possible to pass an extra DOCS_CSS overlay file, in order to customize
the html layout, by using the <code class="docutils literal notranslate"><span class="pre">DOCS_CSS</span></code> make variable.</p>
<p>By default, the “Alabaster” theme is used to build the HTML documentation;
this theme is bundled with Sphinx and need not be installed separately.
The Sphinx theme can be overridden by using the <code class="docutils literal notranslate"><span class="pre">DOCS_THEME</span></code> make variable.</p>
<p>There is another make variable <code class="docutils literal notranslate"><span class="pre">SPHINXDIRS</span></code>, which is useful when test
building a subset of documentation.  For example, you can build documents
under <code class="docutils literal notranslate"><span class="pre">Documentation/doc-guide</span></code> by running
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">SPHINXDIRS=doc-guide</span> <span class="pre">htmldocs</span></code>.
The documentation section of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">help</span></code> will show you the list of
subdirectories you can specify.</p>
<p>To remove the generated documentation, run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">cleandocs</span></code>.</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="ink" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p>Having <code class="docutils literal notranslate"><span class="pre">inkscape(1)</span></code> from Inkscape (<a class="reference external" href="https://inkscape.org">https://inkscape.org</a>)
as well would improve the quality of images embedded in PDF
documents, especially for kernel releases 5.18 and later.</p>
</aside>
</aside>
<section id="choice-of-math-renderer">
<h3>Choice of Math Renderer<a class="headerlink" href="#choice-of-math-renderer" title="Link to this heading">¶</a></h3>
<p>Since kernel release 6.1, mathjax works as a fallback math renderer for
html output.<a class="footnote-reference brackets" href="#sph1-8" id="id3" role="doc-noteref"><span class="fn-bracket">[</span>2<span class="fn-bracket">]</span></a></p>
<p>Math renderer is chosen depending on available commands as shown below:</p>
<table class="docutils align-default" id="id4">
<caption><span class="caption-text">Math Renderer Choices for HTML</span><a class="headerlink" href="#id4" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Math renderer</p></th>
<th class="head"><p>Required commands</p></th>
<th class="head"><p>Image format</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>imgmath</p></td>
<td><p>latex, dvipng</p></td>
<td><p>PNG (raster)</p></td>
</tr>
<tr class="row-odd"><td><p>mathjax</p></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>The choice can be overridden by setting an environment variable
<code class="docutils literal notranslate"><span class="pre">SPHINX_IMGMATH</span></code> as shown below:</p>
<table class="docutils align-default" id="id5">
<caption><span class="caption-text">Effect of Setting <code class="docutils literal notranslate"><span class="pre">SPHINX_IMGMATH</span></code></span><a class="headerlink" href="#id5" title="Link to this table">¶</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Setting</p></th>
<th class="head"><p>Renderer</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">SPHINX_IMGMATH=yes</span></code></p></td>
<td><p>imgmath</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">SPHINX_IMGMATH=no</span></code></p></td>
<td><p>mathjax</p></td>
</tr>
</tbody>
</table>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="sph1-8" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id3">2</a><span class="fn-bracket">]</span></span>
<p>Fallback of math renderer requires Sphinx &gt;=1.8.</p>
</aside>
</aside>
</section>
</section>
<section id="writing-documentation">
<h2>Writing Documentation<a class="headerlink" href="#writing-documentation" title="Link to this heading">¶</a></h2>
<p>Adding new documentation can be as simple as:</p>
<ol class="arabic simple">
<li><p>Add a new <code class="docutils literal notranslate"><span class="pre">.rst</span></code> file somewhere under <code class="docutils literal notranslate"><span class="pre">Documentation</span></code>.</p></li>
<li><p>Refer to it from the Sphinx main <a class="reference external" href="http://www.sphinx-doc.org/en/stable/markup/toctree.html">TOC tree</a> in <code class="docutils literal notranslate"><span class="pre">Documentation/index.rst</span></code>.</p></li>
</ol>
<p>This is usually good enough for simple documentation (like the one you’re
reading right now), but for larger documents it may be advisable to create a
subdirectory (or use an existing one). For example, the graphics subsystem
documentation is under <code class="docutils literal notranslate"><span class="pre">Documentation/gpu</span></code>, split to several <code class="docutils literal notranslate"><span class="pre">.rst</span></code> files,
and has a separate <code class="docutils literal notranslate"><span class="pre">index.rst</span></code> (with a <code class="docutils literal notranslate"><span class="pre">toctree</span></code> of its own) referenced from
the main index.</p>
<p>See the documentation for <a class="reference external" href="http://www.sphinx-doc.org/">Sphinx</a> and <a class="reference external" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> on what you can do
with them. In particular, the Sphinx <a class="reference external" href="http://www.sphinx-doc.org/en/stable/rest.html">reStructuredText Primer</a> is a good place
to get started with reStructuredText. There are also some <a class="reference external" href="http://www.sphinx-doc.org/en/stable/markup/index.html">Sphinx specific
markup constructs</a>.</p>
<section id="specific-guidelines-for-the-kernel-documentation">
<h3>Specific guidelines for the kernel documentation<a class="headerlink" href="#specific-guidelines-for-the-kernel-documentation" title="Link to this heading">¶</a></h3>
<p>Here are some specific guidelines for the kernel documentation:</p>
<ul>
<li><p>Please don’t go overboard with reStructuredText markup. Keep it
simple. For the most part the documentation should be plain text with
just enough consistency in formatting that it can be converted to
other formats.</p></li>
<li><p>Please keep the formatting changes minimal when converting existing
documentation to reStructuredText.</p></li>
<li><p>Also update the content, not just the formatting, when converting
documentation.</p></li>
<li><p>Please stick to this order of heading adornments:</p>
<ol class="arabic">
<li><p><code class="docutils literal notranslate"><span class="pre">=</span></code> with overline for document title:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>==============
Document title
==============
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">=</span></code> for chapters:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Chapters
========
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-</span></code> for sections:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Section
-------
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">~</span></code> for subsections:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Subsection
~~~~~~~~~~
</pre></div>
</div>
</li>
</ol>
<p>Although RST doesn’t mandate a specific order (“Rather than imposing a fixed
number and order of section title adornment styles, the order enforced will be
the order as encountered.”), having the higher levels the same overall makes
it easier to follow the documents.</p>
</li>
<li><p>For inserting fixed width text blocks (for code examples, use case
examples, etc.), use <code class="docutils literal notranslate"><span class="pre">::</span></code> for anything that doesn’t really benefit
from syntax highlighting, especially short snippets. Use
<code class="docutils literal notranslate"><span class="pre">..</span> <span class="pre">code-block::</span> <span class="pre">&lt;language&gt;</span></code> for longer code blocks that benefit
from highlighting. For a short snippet of code embedded in the text, use ``.</p></li>
</ul>
</section>
<section id="the-c-domain">
<h3>The C domain<a class="headerlink" href="#the-c-domain" title="Link to this heading">¶</a></h3>
<p>The <strong>Sphinx C Domain</strong> (name c) is suited for documentation of C API. E.g. a
function prototype:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">c:function</span><span class="p">::</span> int ioctl( int fd, int request )
</pre></div>
</div>
<p>The C domain of the kernel-doc has some additional features. E.g. you can
<em>rename</em> the reference name of a function with a common name like <code class="docutils literal notranslate"><span class="pre">open</span></code> or
<code class="docutils literal notranslate"><span class="pre">ioctl</span></code>:</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">c:function</span><span class="p">::</span> int ioctl( int fd, int request )
   <span class="nc">:name:</span> VIDIOC_LOG_STATUS
</pre></div>
</div>
<p>The func-name (e.g. ioctl) remains in the output but the ref-name changed from
<code class="docutils literal notranslate"><span class="pre">ioctl</span></code> to <code class="docutils literal notranslate"><span class="pre">VIDIOC_LOG_STATUS</span></code>. The index entry for this function is also
changed to <code class="docutils literal notranslate"><span class="pre">VIDIOC_LOG_STATUS</span></code>.</p>
<p>Please note that there is no need to use <code class="docutils literal notranslate"><span class="pre">c:func:</span></code> to generate cross
references to function documentation.  Due to some Sphinx extension magic,
the documentation build system will automatically turn a reference to
<code class="docutils literal notranslate"><span class="pre">function()</span></code> into a cross reference if an index entry for the given
function name exists.  If you see <code class="docutils literal notranslate"><span class="pre">c:func:</span></code> use in a kernel document,
please feel free to remove it.</p>
</section>
<section id="tables">
<h3>Tables<a class="headerlink" href="#tables" title="Link to this heading">¶</a></h3>
<p>ReStructuredText provides several options for table syntax. Kernel style for
tables is to prefer <em>simple table</em> syntax or <em>grid table</em> syntax. See the
<a class="reference external" href="https://docutils.sourceforge.io/docs/user/rst/quickref.html#tables">reStructuredText user reference for table syntax</a> for more details.</p>
<section id="list-tables">
<h4>list tables<a class="headerlink" href="#list-tables" title="Link to this heading">¶</a></h4>
<p>The list-table formats can be useful for tables that are not easily laid
out in the usual Sphinx ASCII-art formats.  These formats are nearly
impossible for readers of the plain-text documents to understand, though,
and should be avoided in the absence of a strong justification for their
use.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">flat-table</span></code> is a double-stage list similar to the <code class="docutils literal notranslate"><span class="pre">list-table</span></code> with
some additional features:</p>
<ul class="simple">
<li><p>column-span: with the role <code class="docutils literal notranslate"><span class="pre">cspan</span></code> a cell can be extended through
additional columns</p></li>
<li><p>row-span: with the role <code class="docutils literal notranslate"><span class="pre">rspan</span></code> a cell can be extended through
additional rows</p></li>
<li><p>auto span rightmost cell of a table row over the missing cells on the right
side of that table-row.  With Option <code class="docutils literal notranslate"><span class="pre">:fill-cells:</span></code> this behavior can
changed from <em>auto span</em> to <em>auto fill</em>, which automatically inserts (empty)
cells instead of spanning the last cell.</p></li>
</ul>
<p>options:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:header-rows:</span></code>   [int] count of header rows</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:stub-columns:</span></code>  [int] count of stub columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:widths:</span></code>        [[int] [int] ... ] widths of columns</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:fill-cells:</span></code>    instead of auto-spanning missing cells, insert missing cells</p></li>
</ul>
<p>roles:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">:cspan:</span></code> [int] additional columns (<em>morecols</em>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">:rspan:</span></code> [int] additional rows (<em>morerows</em>)</p></li>
</ul>
<p>The example below shows how to use this markup.  The first level of the staged
list is the <em>table-row</em>. In the <em>table-row</em> there is only one markup allowed,
the list of the cells in this <em>table-row</em>. Exceptions are <em>comments</em> ( <code class="docutils literal notranslate"><span class="pre">..</span></code> )
and <em>targets</em> (e.g. a ref to <code class="docutils literal notranslate"><span class="pre">:ref:`last</span> <span class="pre">row</span> <span class="pre">&lt;last</span> <span class="pre">row&gt;`</span></code> / <a class="reference internal" href="#last-row"><span class="std std-ref">last row</span></a>).</p>
<div class="highlight-rst notranslate"><div class="highlight"><pre><span></span><span class="p">..</span> <span class="ow">flat-table</span><span class="p">::</span> table title
   <span class="nc">:widths:</span> 2 1 1 3

   <span class="m">*</span> - head col 1
     <span class="m">-</span> head col 2
     <span class="m">-</span> head col 3
     <span class="m">-</span> head col 4

   <span class="m">*</span> - row 1
     <span class="m">-</span> field 1.1
     <span class="m">-</span> field 1.2 with autospan

   <span class="m">*</span> - row 2
     <span class="m">-</span> field 2.1
     <span class="m">-</span> <span class="na">:rspan:</span><span class="nv">`1`</span> <span class="na">:cspan:</span><span class="nv">`1`</span> field 2.2 - 3.3

   <span class="m">*</span> .. _<span class="nv">`last row`</span>:

     <span class="m">-</span> row 3
</pre></div>
</div>
<p>Rendered as:</p>
<blockquote>
<div><table class="docutils align-default" id="id6">
<caption><span class="caption-text">table title</span><a class="headerlink" href="#id6" title="Link to this table">¶</a></caption>
<tbody>
<tr class="row-odd"><td><p>head col 1</p></td>
<td><p>head col 2</p></td>
<td><p>head col 3</p></td>
<td><p>head col 4</p></td>
</tr>
<tr class="row-even"><td><p>row 1</p></td>
<td><p>field 1.1</p></td>
<td colspan="2"><p>field 1.2 with autospan</p></td>
</tr>
<tr class="row-odd"><td><p>row 2</p></td>
<td><p>field 2.1</p></td>
<td colspan="2" rowspan="2"><p>  field 2.2 - 3.3</p></td>
</tr>
<tr class="row-even"><td><p id="last-row">row 3</p>
</td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
</section>
<section id="cross-referencing">
<h3>Cross-referencing<a class="headerlink" href="#cross-referencing" title="Link to this heading">¶</a></h3>
<p>Cross-referencing from one documentation page to another can be done simply by
writing the path to the document file, no special syntax required. The path can
be either absolute or relative. For absolute paths, start it with
“Documentation/”. For example, to cross-reference to this page, all the
following are valid options, depending on the current document’s directory (note
that the <code class="docutils literal notranslate"><span class="pre">.rst</span></code> extension is required):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>See Documentation/doc-guide/sphinx.rst. This always works.
Take a look at sphinx.rst, which is at this same directory.
Read ../sphinx.rst, which is one directory above.
</pre></div>
</div>
<p>If you want the link to have a different rendered text other than the document’s
title, you need to use Sphinx’s <code class="docutils literal notranslate"><span class="pre">doc</span></code> role. For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>See :doc:`my custom link text for document sphinx &lt;sphinx&gt;`.
</pre></div>
</div>
<p>For most use cases, the former is preferred, as it is cleaner and more suited
for people reading the source files. If you come across a <code class="docutils literal notranslate"><span class="pre">:doc:</span></code> usage that
isn’t adding any value, please feel free to convert it to just the document
path.</p>
<p>For information on cross-referencing to kernel-doc functions or types, see
<a class="reference internal" href="kernel-doc.html"><span class="doc">Writing kernel-doc comments</span></a>.</p>
<section id="referencing-commits">
<h4>Referencing commits<a class="headerlink" href="#referencing-commits" title="Link to this heading">¶</a></h4>
<p>References to git commits are automatically hyperlinked given that they are
written in one of these formats:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>commit 72bf4f1767f0
commit 72bf4f1767f0 (&quot;net: do not leave an empty skb in write queue&quot;)
</pre></div>
</div>
</section>
</section>
</section>
<section id="figures-images">
<span id="sphinx-kfigure"></span><h2>Figures &amp; Images<a class="headerlink" href="#figures-images" title="Link to this heading">¶</a></h2>
<p>If you want to add an image, you should use the <code class="docutils literal notranslate"><span class="pre">kernel-figure</span></code> and
<code class="docutils literal notranslate"><span class="pre">kernel-image</span></code> directives. E.g. to insert a figure with a scalable
image format, use SVG (<a class="reference internal" href="#svg-image-example"><span class="std std-ref">SVG image example</span></a>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-figure::  svg_image.svg
   :alt:    simple SVG image

   SVG image example
</pre></div>
</div>
<figure class="align-default" id="id7">
<img alt="simple SVG image" src="../_images/svg_image.svg" /><figcaption>
<p><span class="caption-text">SVG image example</span><a class="headerlink" href="#id7" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The kernel figure (and image) directive supports <strong>DOT</strong> formatted files, see</p>
<ul class="simple">
<li><p>DOT: <a class="reference external" href="http://graphviz.org/pdf/dotguide.pdf">http://graphviz.org/pdf/dotguide.pdf</a></p></li>
<li><p>Graphviz: <a class="reference external" href="http://www.graphviz.org/content/dot-language">http://www.graphviz.org/content/dot-language</a></p></li>
</ul>
<p>A simple example (<a class="reference internal" href="#hello-dot-file"><span class="std std-ref">DOT’s hello world example</span></a>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-figure::  hello.dot
   :alt:    hello world

   DOT&#39;s hello world example
</pre></div>
</div>
<figure class="align-default" id="id8">
<img alt="hello world" src="../_images/hello.svg" /><figcaption>
<p><span class="caption-text">DOT’s hello world example</span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Embedded <em>render</em> markups (or languages) like Graphviz’s <strong>DOT</strong> are provided by the
<code class="docutils literal notranslate"><span class="pre">kernel-render</span></code> directives.:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-render:: DOT
   :alt: foobar digraph
   :caption: Embedded **DOT** (Graphviz) code

   digraph foo {
    &quot;bar&quot; -&gt; &quot;baz&quot;;
   }
</pre></div>
</div>
<p>How this will be rendered depends on the installed tools. If Graphviz is
installed, you will see a vector image. If not, the raw markup is inserted as
<em>literal-block</em> (<a class="reference internal" href="#hello-dot-render"><span class="std std-ref">Embedded DOT (Graphviz) code</span></a>).</p>
<figure class="align-default" id="id9">
<span id="hello-dot-render"></span><img alt="foobar digraph" src="../_images/DOT-1e38538b2ff52f303e5ecd4abe763316501a0a12.svg" /><figcaption>
<p><span class="caption-text">Embedded <strong>DOT</strong> (Graphviz) code</span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>The <em>render</em> directive has all the options known from the <em>figure</em> directive,
plus option <code class="docutils literal notranslate"><span class="pre">caption</span></code>.  If <code class="docutils literal notranslate"><span class="pre">caption</span></code> has a value, a <em>figure</em> node is
inserted. If not, an <em>image</em> node is inserted. A <code class="docutils literal notranslate"><span class="pre">caption</span></code> is also needed, if
you want to refer to it (<a class="reference internal" href="#hello-svg-render"><span class="std std-ref">Embedded SVG markup</span></a>).</p>
<p>Embedded <strong>SVG</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.. kernel-render:: SVG
   :caption: Embedded **SVG** markup
   :alt: so-nw-arrow

   &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
   &lt;svg xmlns=&quot;http://www.w3.org/2000/svg&quot; version=&quot;1.1&quot; ...&gt;
      ...
   &lt;/svg&gt;
</pre></div>
</div>
<figure class="align-default" id="id10">
<span id="hello-svg-render"></span><img alt="so-nw-arrow" src="../_images/SVG-3bcc8521eb73e7bcc8b0de14afcc31d733ec6b25.svg" /><figcaption>
<p><span class="caption-text">Embedded <strong>SVG</strong> markup</span><a class="headerlink" href="#id10" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/doc-guide/sphinx.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>