<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Documentation for /proc/sys/fs/ &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Documentation for /proc/sys/kernel/" href="kernel.html" />
    <link rel="prev" title="Documentation for /proc/sys/abi/" href="abi.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.9.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Administration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../README.html">Linux kernel release 6.x &lt;http://kernel.org/&gt;</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel-parameters.html">The kernel’s command-line parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../devices.html">Linux allocated devices (4.x+ version)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Documentation for /proc/sys</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html#introduction">Introduction</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../abi.html">Linux ABI description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../features.html">Feature status on all architectures</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw-vuln/index.html">Hardware vulnerabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reporting-regressions.html">Reporting regressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../quickly-build-trimmed-linux.html">How to quickly build a trimmed Linux kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="../verify-bugs-and-bisect-regressions.html">How to verify bugs and bisect regressions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bug-hunting.html">Bug hunting</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bug-bisect.html">Bisecting a bug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tainted-kernels.html">Tainted kernels</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ramoops.html">Ramoops oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dynamic-debug-howto.html">Dynamic debug</a></li>
<li class="toctree-l2"><a class="reference internal" href="../init.html">Explaining the “No working init found.” boot hang message</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kdump/index.html">Documentation for Kdump - The kexec-based Crash Dumping Solution</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf/index.html">Performance monitor support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pstore-blk.html">pstore block oops/panic logger</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysfs-rules.html">Rules on how to access information in sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../workload-tracing.html">Discovering Linux kernel subsystems used by a workload</a></li>
<li class="toctree-l2"><a class="reference internal" href="../acpi/index.html">ACPI Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../aoe/index.html">ATA over Ethernet (AoE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../auxdisplay/index.html">Auxiliary Display Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bcache.html">A block layer cache (bcache)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binderfs.html">The Android binderfs Filesystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../binfmt-misc.html">Kernel Support for miscellaneous Binary Formats (binfmt_misc)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../blockdev/index.html">Block Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../bootconfig.html">Boot Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../braille-console.html">Linux Braille Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../btmrvl.html">btmrvl driver</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cgroup-v1/index.html">Control Groups version 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cgroup-v2.html">Control Group v2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cifs/index.html">CIFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../clearing-warn-once.html">Clearing WARN_ONCE</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cpu-load.html">CPU load</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cputopology.html">How CPU topology info is exported via sysfs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../dell_rbu.html">Dell Remote BIOS Update driver (dell_rbu)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../device-mapper/index.html">Device Mapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../edid.html">EDID</a></li>
<li class="toctree-l2"><a class="reference internal" href="../efi-stub.html">The EFI Boot Stub</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ext4.html">ext4 General Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="../filesystem-monitoring.html">File system Monitoring with fanotify</a></li>
<li class="toctree-l2"><a class="reference internal" href="../nfs/index.html">NFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../gpio/index.html">GPIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="../highuid.html">Notes on the change from 16-bit UIDs to 32-bit UIDs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../hw_random.html">Hardware random number generators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../initrd.html">Using the initial RAM disk (initrd)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../iostats.html">I/O statistics fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="../java.html">Java(tm) Binary Kernel Support for Linux v1.03</a></li>
<li class="toctree-l2"><a class="reference internal" href="../jfs.html">IBM’s Journaled File System (JFS) for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../kernel-per-CPU-kthreads.html">Reducing OS jitter due to per-cpu kthreads</a></li>
<li class="toctree-l2"><a class="reference internal" href="../laptops/index.html">Laptop Drivers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lcd-panel-cgram.html">Parallel port LCD/Keypad Panel support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ldm.html">LDM - Logical Disk Manager (Dynamic Disks)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../lockup-watchdogs.html">Softlockup detector and hardlockup detector (aka nmi_watchdog)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../LSM/index.html">Linux Security Module Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../md.html">RAID arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="../media/index.html">Media subsystem admin and user guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mm/index.html">Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module-signing.html">Kernel module signing facility</a></li>
<li class="toctree-l2"><a class="reference internal" href="../mono.html">Mono(tm) Binary Kernel Support for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../namespaces/index.html">Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../numastat.html">Numa policy hit/miss statistics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../parport.html">Parport</a></li>
<li class="toctree-l2"><a class="reference internal" href="../perf-security.html">Perf events and tool security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pm/index.html">Power Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pmf.html">Set udev rules for PMF Smart PC Builder</a></li>
<li class="toctree-l2"><a class="reference internal" href="../pnp.html">Linux Plug and Play Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rapidio.html">RapidIO Subsystem Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../RAS/main.html">Reliability, Availability and Serviceability (RAS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../RAS/error-decoding.html">Error decoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="../RAS/address-translation.html">Address translation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../rtc.html">Real Time Clock (RTC) Drivers for Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../serial-console.html">Linux Serial Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../svga.html">Video Mode Selection Support 2.13</a></li>
<li class="toctree-l2"><a class="reference internal" href="../syscall-user-dispatch.html">Syscall User Dispatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sysrq.html">Linux Magic System Request Key Hacks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thermal/index.html">Thermal Subsystem</a></li>
<li class="toctree-l2"><a class="reference internal" href="../thunderbolt.html">USB4 and Thunderbolt</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ufs.html">Using UFS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../unicode.html">Unicode support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../vga-softcursor.html">Software cursor for VGA</a></li>
<li class="toctree-l2"><a class="reference internal" href="../video-output.html">Video Output Switcher Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../xfs.html">The SGI XFS Filesystem</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/admin-guide/sysctl/fs.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="documentation-for-proc-sys-fs">
<h1>Documentation for /proc/sys/fs/<a class="headerlink" href="#documentation-for-proc-sys-fs" title="Link to this heading">¶</a></h1>
<p>Copyright (c) 1998, 1999,  Rik van Riel &lt;<a class="reference external" href="mailto:riel&#37;&#52;&#48;nl&#46;linux&#46;org">riel<span>&#64;</span>nl<span>&#46;</span>linux<span>&#46;</span>org</a>&gt;</p>
<p>Copyright (c) 2009,        Shen Feng&lt;<a class="reference external" href="mailto:shen&#37;&#52;&#48;cn&#46;fujitsu&#46;com">shen<span>&#64;</span>cn<span>&#46;</span>fujitsu<span>&#46;</span>com</a>&gt;</p>
<p>For general info and legal blurb, please look in intro.rst.</p>
<hr class="docutils" />
<p>This file contains documentation for the sysctl files and directories
in <code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/</span></code>.</p>
<p>The files in this directory can be used to tune and monitor
miscellaneous and general things in the operation of the Linux
kernel. Since some of the files <em>can</em> be used to screw up your
system, it is advisable to read both documentation and source
before actually making adjustments.</p>
<section id="proc-sys-fs">
<h2>1. /proc/sys/fs<a class="headerlink" href="#proc-sys-fs" title="Link to this heading">¶</a></h2>
<p>Currently, these files might (depending on your configuration)
show up in <code class="docutils literal notranslate"><span class="pre">/proc/sys/fs</span></code>:</p>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#aio-nr-aio-max-nr" id="id1">aio-nr &amp; aio-max-nr</a></p></li>
<li><p><a class="reference internal" href="#dentry-state" id="id2">dentry-state</a></p></li>
<li><p><a class="reference internal" href="#file-max-file-nr" id="id3">file-max &amp; file-nr</a></p></li>
<li><p><a class="reference internal" href="#inode-nr-inode-state" id="id4">inode-nr &amp; inode-state</a></p></li>
<li><p><a class="reference internal" href="#mount-max" id="id5">mount-max</a></p></li>
<li><p><a class="reference internal" href="#nr-open" id="id6">nr_open</a></p></li>
<li><p><a class="reference internal" href="#overflowgid-overflowuid" id="id7">overflowgid &amp; overflowuid</a></p></li>
<li><p><a class="reference internal" href="#pipe-user-pages-hard" id="id8">pipe-user-pages-hard</a></p></li>
<li><p><a class="reference internal" href="#pipe-user-pages-soft" id="id9">pipe-user-pages-soft</a></p></li>
<li><p><a class="reference internal" href="#protected-fifos" id="id10">protected_fifos</a></p></li>
<li><p><a class="reference internal" href="#protected-hardlinks" id="id11">protected_hardlinks</a></p></li>
<li><p><a class="reference internal" href="#protected-regular" id="id12">protected_regular</a></p></li>
<li><p><a class="reference internal" href="#protected-symlinks" id="id13">protected_symlinks</a></p></li>
<li><p><a class="reference internal" href="#suid-dumpable" id="id14">suid_dumpable</a></p></li>
</ul>
</nav>
<section id="aio-nr-aio-max-nr">
<h3><a class="toc-backref" href="#id1" role="doc-backlink">aio-nr &amp; aio-max-nr</a><a class="headerlink" href="#aio-nr-aio-max-nr" title="Link to this heading">¶</a></h3>
<p><code class="docutils literal notranslate"><span class="pre">aio-nr</span></code> shows the current system-wide number of asynchronous io
requests.  <code class="docutils literal notranslate"><span class="pre">aio-max-nr</span></code> allows you to change the maximum value
<code class="docutils literal notranslate"><span class="pre">aio-nr</span></code> can grow to.  If <code class="docutils literal notranslate"><span class="pre">aio-nr</span></code> reaches <code class="docutils literal notranslate"><span class="pre">aio-nr-max</span></code> then
<code class="docutils literal notranslate"><span class="pre">io_setup</span></code> will fail with <code class="docutils literal notranslate"><span class="pre">EAGAIN</span></code>.  Note that raising
<code class="docutils literal notranslate"><span class="pre">aio-max-nr</span></code> does not result in the
pre-allocation or re-sizing of any kernel data structures.</p>
</section>
<section id="dentry-state">
<h3><a class="toc-backref" href="#id2" role="doc-backlink">dentry-state</a><a class="headerlink" href="#dentry-state" title="Link to this heading">¶</a></h3>
<p>This file shows the values in <code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">dentry_stat_t</span></code>, as defined in
<code class="docutils literal notranslate"><span class="pre">fs/dcache.c</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct dentry_stat_t dentry_stat {
      long nr_dentry;
      long nr_unused;
      long age_limit;         /* age in seconds */
      long want_pages;        /* pages requested by system */
      long nr_negative;       /* # of unused negative dentries */
      long dummy;             /* Reserved for future use */
};
</pre></div>
</div>
<p>Dentries are dynamically allocated and deallocated.</p>
<p><code class="docutils literal notranslate"><span class="pre">nr_dentry</span></code> shows the total number of dentries allocated (active
+ unused). <code class="docutils literal notranslate"><span class="pre">nr_unused</span> <span class="pre">shows</span></code> the number of dentries that are not
actively used, but are saved in the LRU list for future reuse.</p>
<p><code class="docutils literal notranslate"><span class="pre">age_limit</span></code> is the age in seconds after which dcache entries
can be reclaimed when memory is short and <code class="docutils literal notranslate"><span class="pre">want_pages</span></code> is
nonzero when <code class="docutils literal notranslate"><span class="pre">shrink_dcache_pages()</span></code> has been called and the
dcache isn’t pruned yet.</p>
<p><code class="docutils literal notranslate"><span class="pre">nr_negative</span></code> shows the number of unused dentries that are also
negative dentries which do not map to any files. Instead,
they help speeding up rejection of non-existing files provided
by the users.</p>
</section>
<section id="file-max-file-nr">
<h3><a class="toc-backref" href="#id3" role="doc-backlink">file-max &amp; file-nr</a><a class="headerlink" href="#file-max-file-nr" title="Link to this heading">¶</a></h3>
<p>The value in <code class="docutils literal notranslate"><span class="pre">file-max</span></code> denotes the maximum number of file-
handles that the Linux kernel will allocate. When you get lots
of error messages about running out of file handles, you might
want to increase this limit.</p>
<p>Historically,the kernel was able to allocate file handles
dynamically, but not to free them again. The three values in
<code class="docutils literal notranslate"><span class="pre">file-nr</span></code> denote the number of allocated file handles, the number
of allocated but unused file handles, and the maximum number of
file handles. Linux 2.6 and later always reports 0 as the number of free
file handles -- this is not an error, it just means that the
number of allocated file handles exactly matches the number of
used file handles.</p>
<p>Attempts to allocate more file descriptors than <code class="docutils literal notranslate"><span class="pre">file-max</span></code> are
reported with <code class="docutils literal notranslate"><span class="pre">printk</span></code>, look for:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>VFS: file-max limit &lt;number&gt; reached
</pre></div>
</div>
<p>in the kernel logs.</p>
</section>
<section id="inode-nr-inode-state">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">inode-nr &amp; inode-state</a><a class="headerlink" href="#inode-nr-inode-state" title="Link to this heading">¶</a></h3>
<p>As with file handles, the kernel allocates the inode structures
dynamically, but can’t free them yet.</p>
<p>The file <code class="docutils literal notranslate"><span class="pre">inode-nr</span></code> contains the first two items from
<code class="docutils literal notranslate"><span class="pre">inode-state</span></code>, so we’ll skip to that file...</p>
<p><code class="docutils literal notranslate"><span class="pre">inode-state</span></code> contains three actual numbers and four dummies.
The actual numbers are, in order of appearance, <code class="docutils literal notranslate"><span class="pre">nr_inodes</span></code>,
<code class="docutils literal notranslate"><span class="pre">nr_free_inodes</span></code> and <code class="docutils literal notranslate"><span class="pre">preshrink</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">nr_inodes</span></code> stands for the number of inodes the system has
allocated.</p>
<p><code class="docutils literal notranslate"><span class="pre">nr_free_inodes</span></code> represents the number of free inodes (?) and
preshrink is nonzero when the
system needs to prune the inode list instead of allocating
more.</p>
</section>
<section id="mount-max">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">mount-max</a><a class="headerlink" href="#mount-max" title="Link to this heading">¶</a></h3>
<p>This denotes the maximum number of mounts that may exist
in a mount namespace.</p>
</section>
<section id="nr-open">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">nr_open</a><a class="headerlink" href="#nr-open" title="Link to this heading">¶</a></h3>
<p>This denotes the maximum number of file-handles a process can
allocate. Default value is 1024*1024 (1048576) which should be
enough for most machines. Actual limit depends on <code class="docutils literal notranslate"><span class="pre">RLIMIT_NOFILE</span></code>
resource limit.</p>
</section>
<section id="overflowgid-overflowuid">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">overflowgid &amp; overflowuid</a><a class="headerlink" href="#overflowgid-overflowuid" title="Link to this heading">¶</a></h3>
<p>Some filesystems only support 16-bit UIDs and GIDs, although in Linux
UIDs and GIDs are 32 bits. When one of these filesystems is mounted
with writes enabled, any UID or GID that would exceed 65535 is translated
to a fixed value before being written to disk.</p>
<p>These sysctls allow you to change the value of the fixed UID and GID.
The default is 65534.</p>
</section>
<section id="pipe-user-pages-hard">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">pipe-user-pages-hard</a><a class="headerlink" href="#pipe-user-pages-hard" title="Link to this heading">¶</a></h3>
<p>Maximum total number of pages a non-privileged user may allocate for pipes.
Once this limit is reached, no new pipes may be allocated until usage goes
below the limit again. When set to 0, no limit is applied, which is the default
setting.</p>
</section>
<section id="pipe-user-pages-soft">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">pipe-user-pages-soft</a><a class="headerlink" href="#pipe-user-pages-soft" title="Link to this heading">¶</a></h3>
<p>Maximum total number of pages a non-privileged user may allocate for pipes
before the pipe size gets limited to a single page. Once this limit is reached,
new pipes will be limited to a single page in size for this user in order to
limit total memory usage, and trying to increase them using <code class="docutils literal notranslate"><span class="pre">fcntl()</span></code> will be
denied until usage goes below the limit again. The default value allows to
allocate up to 1024 pipes at their default size. When set to 0, no limit is
applied.</p>
</section>
<section id="protected-fifos">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">protected_fifos</a><a class="headerlink" href="#protected-fifos" title="Link to this heading">¶</a></h3>
<p>The intent of this protection is to avoid unintentional writes to
an attacker-controlled FIFO, where a program expected to create a regular
file.</p>
<p>When set to “0”, writing to FIFOs is unrestricted.</p>
<p>When set to “1” don’t allow <code class="docutils literal notranslate"><span class="pre">O_CREAT</span></code> open on FIFOs that we don’t own
in world writable sticky directories, unless they are owned by the
owner of the directory.</p>
<p>When set to “2” it also applies to group writable sticky directories.</p>
<p>This protection is based on the restrictions in Openwall.</p>
</section>
<section id="protected-hardlinks">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">protected_hardlinks</a><a class="headerlink" href="#protected-hardlinks" title="Link to this heading">¶</a></h3>
<p>A long-standing class of security issues is the hardlink-based
time-of-check-time-of-use race, most commonly seen in world-writable
directories like <code class="docutils literal notranslate"><span class="pre">/tmp</span></code>. The common method of exploitation of this flaw
is to cross privilege boundaries when following a given hardlink (i.e. a
root process follows a hardlink created by another user). Additionally,
on systems without separated partitions, this stops unauthorized users
from “pinning” vulnerable setuid/setgid files against being upgraded by
the administrator, or linking to special files.</p>
<p>When set to “0”, hardlink creation behavior is unrestricted.</p>
<p>When set to “1” hardlinks cannot be created by users if they do not
already own the source file, or do not have read/write access to it.</p>
<p>This protection is based on the restrictions in Openwall and grsecurity.</p>
</section>
<section id="protected-regular">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">protected_regular</a><a class="headerlink" href="#protected-regular" title="Link to this heading">¶</a></h3>
<p>This protection is similar to <a class="reference internal" href="#protected-fifos">protected_fifos</a>, but it
avoids writes to an attacker-controlled regular file, where a program
expected to create one.</p>
<p>When set to “0”, writing to regular files is unrestricted.</p>
<p>When set to “1” don’t allow <code class="docutils literal notranslate"><span class="pre">O_CREAT</span></code> open on regular files that we
don’t own in world writable sticky directories, unless they are
owned by the owner of the directory.</p>
<p>When set to “2” it also applies to group writable sticky directories.</p>
</section>
<section id="protected-symlinks">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">protected_symlinks</a><a class="headerlink" href="#protected-symlinks" title="Link to this heading">¶</a></h3>
<p>A long-standing class of security issues is the symlink-based
time-of-check-time-of-use race, most commonly seen in world-writable
directories like <code class="docutils literal notranslate"><span class="pre">/tmp</span></code>. The common method of exploitation of this flaw
is to cross privilege boundaries when following a given symlink (i.e. a
root process follows a symlink belonging to another user). For a likely
incomplete list of hundreds of examples across the years, please see:
<a class="reference external" href="https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=/tmp">https://cve.mitre.org/cgi-bin/cvekey.cgi?keyword=/tmp</a></p>
<p>When set to “0”, symlink following behavior is unrestricted.</p>
<p>When set to “1” symlinks are permitted to be followed only when outside
a sticky world-writable directory, or when the uid of the symlink and
follower match, or when the directory owner matches the symlink’s owner.</p>
<p>This protection is based on the restrictions in Openwall and grsecurity.</p>
</section>
<section id="suid-dumpable">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">suid_dumpable</a><a class="headerlink" href="#suid-dumpable" title="Link to this heading">¶</a></h3>
<p>This value can be used to query and set the core dump mode for setuid
or otherwise protected/tainted binaries. The modes are</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p>0</p></td>
<td><p>(default)</p></td>
<td><p>Traditional behaviour. Any process which has changed
privilege levels or is execute only will not be dumped.</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>(debug)</p></td>
<td><p>All processes dump core when possible. The core dump is
owned by the current user and no security is applied. This is
intended for system debugging situations only.
Ptrace is unchecked.
This is insecure as it allows regular users to examine the
memory contents of privileged processes.</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>(suidsafe)</p></td>
<td><p>Any binary which normally would not be dumped is dumped
anyway, but only if the <code class="docutils literal notranslate"><span class="pre">core_pattern</span></code> kernel sysctl (see
<a class="reference internal" href="kernel.html#core-pattern"><span class="std std-ref">Documentation/admin-guide/sysctl/kernel.rst</span></a>)
is set to
either a pipe handler or a fully qualified path. (For more
details on this limitation, see CVE-2006-2451.) This mode is
appropriate when administrators are attempting to debug
problems in a normal environment, and either have a core dump
pipe handler that knows to treat privileged core dumps with
care, or specific directory defined for catching core dumps.
If a core dump happens without a pipe handler or fully
qualified path, a message will be emitted to syslog warning
about the lack of a correct setting.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="proc-sys-fs-binfmt-misc">
<h2>2. /proc/sys/fs/binfmt_misc<a class="headerlink" href="#proc-sys-fs-binfmt-misc" title="Link to this heading">¶</a></h2>
<p>Documentation for the files in <code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/binfmt_misc</span></code> is
in <a class="reference internal" href="../binfmt-misc.html"><span class="doc">Kernel Support for miscellaneous Binary Formats (binfmt_misc)</span></a>.</p>
</section>
<section id="proc-sys-fs-mqueue-posix-message-queues-filesystem">
<h2>3. /proc/sys/fs/mqueue - POSIX message queues filesystem<a class="headerlink" href="#proc-sys-fs-mqueue-posix-message-queues-filesystem" title="Link to this heading">¶</a></h2>
<p>The “mqueue”  filesystem provides  the necessary kernel features to enable the
creation of a  user space  library that  implements  the  POSIX message queues
API (as noted by the  MSG tag in the  POSIX 1003.1-2001 version  of the System
Interfaces specification.)</p>
<p>The “mqueue” filesystem contains values for determining/setting the
amount of resources used by the file system.</p>
<p><code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/mqueue/queues_max</span></code> is a read/write file for
setting/getting the maximum number of message queues allowed on the
system.</p>
<p><code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/mqueue/msg_max</span></code> is a read/write file for
setting/getting the maximum number of messages in a queue value.  In
fact it is the limiting value for another (user) limit which is set in
<code class="docutils literal notranslate"><span class="pre">mq_open</span></code> invocation.  This attribute of a queue must be less than
or equal to <code class="docutils literal notranslate"><span class="pre">msg_max</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/mqueue/msgsize_max</span></code> is a read/write file for
setting/getting the maximum message size value (it is an attribute of
every message queue, set during its creation).</p>
<p><code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/mqueue/msg_default</span></code> is a read/write file for
setting/getting the default number of messages in a queue value if the
<code class="docutils literal notranslate"><span class="pre">attr</span></code> parameter of <code class="docutils literal notranslate"><span class="pre">mq_open(2)</span></code> is <code class="docutils literal notranslate"><span class="pre">NULL</span></code>. If it exceeds
<code class="docutils literal notranslate"><span class="pre">msg_max</span></code>, the default value is initialized to <code class="docutils literal notranslate"><span class="pre">msg_max</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">/proc/sys/fs/mqueue/msgsize_default</span></code> is a read/write file for
setting/getting the default message size value if the <code class="docutils literal notranslate"><span class="pre">attr</span></code>
parameter of <code class="docutils literal notranslate"><span class="pre">mq_open(2)</span></code> is <code class="docutils literal notranslate"><span class="pre">NULL</span></code>. If it exceeds
<code class="docutils literal notranslate"><span class="pre">msgsize_max</span></code>, the default value is initialized to <code class="docutils literal notranslate"><span class="pre">msgsize_max</span></code>.</p>
</section>
<section id="proc-sys-fs-epoll-configuration-options-for-the-epoll-interface">
<h2>4. /proc/sys/fs/epoll - Configuration options for the epoll interface<a class="headerlink" href="#proc-sys-fs-epoll-configuration-options-for-the-epoll-interface" title="Link to this heading">¶</a></h2>
<p>This directory contains configuration options for the epoll(7) interface.</p>
<section id="max-user-watches">
<h3>max_user_watches<a class="headerlink" href="#max-user-watches" title="Link to this heading">¶</a></h3>
<p>Every epoll file descriptor can store a number of files to be monitored
for event readiness. Each one of these monitored files constitutes a “watch”.
This configuration option sets the maximum number of “watches” that are
allowed for each user.
Each “watch” costs roughly 90 bytes on a 32-bit kernel, and roughly 160 bytes
on a 64-bit one.
The current default value for <code class="docutils literal notranslate"><span class="pre">max_user_watches</span></code> is 4% of the
available low memory, divided by the “watch” cost in bytes.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/admin-guide/sysctl/fs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>