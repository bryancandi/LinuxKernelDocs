<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3. Early-stage planning &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=3918102e" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Getting the code right" href="4.Coding.html" />
    <link rel="prev" title="2. How the development process works" href="2.Process.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.12.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="development-process.html">Development process</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1.Intro.html">1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="2.Process.html">2. How the development process works</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Early-stage planning</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#specifying-the-problem">3.1. Specifying the problem</a></li>
<li class="toctree-l3"><a class="reference internal" href="#early-discussion">3.2. Early discussion</a></li>
<li class="toctree-l3"><a class="reference internal" href="#who-do-you-talk-to">3.3. Who do you talk to?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#when-to-post">3.4. When to post?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-official-buy-in">3.5. Getting official buy-in</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="4.Coding.html">4. Getting the code right</a></li>
<li class="toctree-l2"><a class="reference internal" href="5.Posting.html">5. Posting patches</a></li>
<li class="toctree-l2"><a class="reference internal" href="6.Followthrough.html">6. Followthrough</a></li>
<li class="toctree-l2"><a class="reference internal" href="7.AdvancedTopics.html">7. Advanced topics</a></li>
<li class="toctree-l2"><a class="reference internal" href="8.Conclusion.html">8. For more information</a></li>
<li class="toctree-l2"><a class="reference internal" href="8.Conclusion.html#conclusion">9. Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">All development-process docs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="index.html#an-introduction-to-how-kernel-development-works">An introduction to how kernel development works</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="howto.html">HOWTO do Linux kernel development</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l3"><a class="reference internal" href="submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="submit-checklist.html">Linux Kernel patch submission checklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="index.html#tools-and-technical-guides-for-kernel-developers">Tools and technical guides for kernel developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#policy-guides-and-developer-statements">Policy guides and developer statements</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#dealing-with-bugs">Dealing with bugs</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#maintainer-information">Maintainer information</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#other-material">Other material</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/process/3.Early-stage.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->



<div class="language-selection">
English

<ul>

<li><a href="../translations/zh_CN/process/3.Early-stage.html">Chinese (Simplified)</a></li>

<li><a href="../translations/zh_TW/process/3.Early-stage.html">Chinese (Traditional)</a></li>

<li><a href="../translations/it_IT/process/3.Early-stage.html">Italian</a></li>

<li><a href="../translations/sp_SP/process/3.Early-stage.html">Spanish</a></li>

</ul>
</div>
<section id="early-stage-planning">
<span id="development-early-stage"></span><h1><span class="section-number">3. </span>Early-stage planning<a class="headerlink" href="#early-stage-planning" title="Link to this heading">¶</a></h1>
<p>When contemplating a Linux kernel development project, it can be tempting
to jump right in and start coding.  As with any significant project,
though, much of the groundwork for success is best laid before the first
line of code is written.  Some time spent in early planning and
communication can save far more time later on.</p>
<section id="specifying-the-problem">
<h2><span class="section-number">3.1. </span>Specifying the problem<a class="headerlink" href="#specifying-the-problem" title="Link to this heading">¶</a></h2>
<p>Like any engineering project, a successful kernel enhancement starts with a
clear description of the problem to be solved.  In some cases, this step is
easy: when a driver is needed for a specific piece of hardware, for
example.  In others, though, it is tempting to confuse the real problem
with the proposed solution, and that can lead to difficulties.</p>
<p>Consider an example: some years ago, developers working with Linux audio
sought a way to run applications without dropouts or other artifacts caused
by excessive latency in the system.  The solution they arrived at was a
kernel module intended to hook into the Linux Security Module (LSM)
framework; this module could be configured to give specific applications
access to the realtime scheduler.  This module was implemented and sent to
the linux-kernel mailing list, where it immediately ran into problems.</p>
<p>To the audio developers, this security module was sufficient to solve their
immediate problem.  To the wider kernel community, though, it was seen as a
misuse of the LSM framework (which is not intended to confer privileges
onto processes which they would not otherwise have) and a risk to system
stability.  Their preferred solutions involved realtime scheduling access
via the rlimit mechanism for the short term, and ongoing latency reduction
work in the long term.</p>
<p>The audio community, however, could not see past the particular solution
they had implemented; they were unwilling to accept alternatives.  The
resulting disagreement left those developers feeling disillusioned with the
entire kernel development process; one of them went back to an audio list
and posted this:</p>
<blockquote>
<div><p>There are a number of very good Linux kernel developers, but they
tend to get outshouted by a large crowd of arrogant fools. Trying
to communicate user requirements to these people is a waste of
time. They are much too “intelligent” to listen to lesser mortals.</p>
</div></blockquote>
<p>(<a class="reference external" href="https://lwn.net/Articles/131776/">https://lwn.net/Articles/131776/</a>).</p>
<p>The reality of the situation was different; the kernel developers were far
more concerned about system stability, long-term maintenance, and finding
the right solution to the problem than they were with a specific module.
The moral of the story is to focus on the problem - not a specific solution
- and to discuss it with the development community before investing in the
creation of a body of code.</p>
<p>So, when contemplating a kernel development project, one should obtain
answers to a short set of questions:</p>
<blockquote>
<div><ul class="simple">
<li><p>What, exactly, is the problem which needs to be solved?</p></li>
<li><p>Who are the users affected by this problem?  Which use cases should the
solution address?</p></li>
<li><p>How does the kernel fall short in addressing that problem now?</p></li>
</ul>
</div></blockquote>
<p>Only then does it make sense to start considering possible solutions.</p>
</section>
<section id="early-discussion">
<h2><span class="section-number">3.2. </span>Early discussion<a class="headerlink" href="#early-discussion" title="Link to this heading">¶</a></h2>
<p>When planning a kernel development project, it makes great sense to hold
discussions with the community before launching into implementation.  Early
communication can save time and trouble in a number of ways:</p>
<blockquote>
<div><ul class="simple">
<li><p>It may well be that the problem is addressed by the kernel in ways which
you have not understood.  The Linux kernel is large and has a number of
features and capabilities which are not immediately obvious.  Not all
kernel capabilities are documented as well as one might like, and it is
easy to miss things.  Your author has seen the posting of a complete
driver which duplicated an existing driver that the new author had been
unaware of.  Code which reinvents existing wheels is not only wasteful;
it will also not be accepted into the mainline kernel.</p></li>
<li><p>There may be elements of the proposed solution which will not be
acceptable for mainline merging.  It is better to find out about
problems like this before writing the code.</p></li>
<li><p>It’s entirely possible that other developers have thought about the
problem; they may have ideas for a better solution, and may be willing
to help in the creation of that solution.</p></li>
</ul>
</div></blockquote>
<p>Years of experience with the kernel development community have taught a
clear lesson: kernel code which is designed and developed behind closed
doors invariably has problems which are only revealed when the code is
released into the community.  Sometimes these problems are severe,
requiring months or years of effort before the code can be brought up to
the kernel community’s standards.  Some examples include:</p>
<blockquote>
<div><ul class="simple">
<li><p>The Devicescape network stack was designed and implemented for
single-processor systems.  It could not be merged into the mainline
until it was made suitable for multiprocessor systems.  Retrofitting
locking and such into code is a difficult task; as a result, the merging
of this code (now called mac80211) was delayed for over a year.</p></li>
<li><p>The Reiser4 filesystem included a number of capabilities which, in the
core kernel developers’ opinion, should have been implemented in the
virtual filesystem layer instead.  It also included features which could
not easily be implemented without exposing the system to user-caused
deadlocks.  The late revelation of these problems - and refusal to
address some of them - has caused Reiser4 to stay out of the mainline
kernel.</p></li>
<li><p>The AppArmor security module made use of internal virtual filesystem
data structures in ways which were considered to be unsafe and
unreliable.  This concern (among others) kept AppArmor out of the
mainline for years.</p></li>
</ul>
</div></blockquote>
<p>In each of these cases, a great deal of pain and extra work could have been
avoided with some early discussion with the kernel developers.</p>
</section>
<section id="who-do-you-talk-to">
<h2><span class="section-number">3.3. </span>Who do you talk to?<a class="headerlink" href="#who-do-you-talk-to" title="Link to this heading">¶</a></h2>
<p>When developers decide to take their plans public, the next question will
be: where do we start?  The answer is to find the right mailing list(s) and
the right maintainer.  For mailing lists, the best approach is to look in
the MAINTAINERS file for a relevant place to post.  If there is a suitable
subsystem list, posting there is often preferable to posting on
linux-kernel; you are more likely to reach developers with expertise in the
relevant subsystem and the environment may be more supportive.</p>
<p>Finding maintainers can be a bit harder.  Again, the MAINTAINERS file is
the place to start.  That file tends to not always be up to date, though,
and not all subsystems are represented there.  The person listed in the
MAINTAINERS file may, in fact, not be the person who is actually acting in
that role currently.  So, when there is doubt about who to contact, a
useful trick is to use git (and “git log” in particular) to see who is
currently active within the subsystem of interest.  Look at who is writing
patches, and who, if anybody, is attaching Signed-off-by lines to those
patches.  Those are the people who will be best placed to help with a new
development project.</p>
<p>The task of finding the right maintainer is sometimes challenging enough
that the kernel developers have added a script to ease the process:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.../scripts/get_maintainer.pl
</pre></div>
</div>
<p>This script will return the current maintainer(s) for a given file or
directory when given the “-f” option.  If passed a patch on the
command line, it will list the maintainers who should probably receive
copies of the patch.  This is the preferred way (unlike “-f” option) to get the
list of people to Cc for your patches.  There are a number of options
regulating how hard get_maintainer.pl will search for maintainers; please be
careful about using the more aggressive options as you may end up including
developers who have no real interest in the code you are modifying.</p>
<p>If all else fails, talking to Andrew Morton can be an effective way to
track down a maintainer for a specific piece of code.</p>
</section>
<section id="when-to-post">
<h2><span class="section-number">3.4. </span>When to post?<a class="headerlink" href="#when-to-post" title="Link to this heading">¶</a></h2>
<p>If possible, posting your plans during the early stages can only be
helpful.  Describe the problem being solved and any plans that have been
made on how the implementation will be done.  Any information you can
provide can help the development community provide useful input on the
project.</p>
<p>One discouraging thing which can happen at this stage is not a hostile
reaction, but, instead, little or no reaction at all.  The sad truth of the
matter is (1) kernel developers tend to be busy, (2) there is no shortage
of people with grand plans and little code (or even prospect of code) to
back them up, and (3) nobody is obligated to review or comment on ideas
posted by others.  Beyond that, high-level designs often hide problems
which are only revealed when somebody actually tries to implement those
designs; for that reason, kernel developers would rather see the code.</p>
<p>If a request-for-comments posting yields little in the way of comments, do
not assume that it means there is no interest in the project.
Unfortunately, you also cannot assume that there are no problems with your
idea.  The best thing to do in this situation is to proceed, keeping the
community informed as you go.</p>
</section>
<section id="getting-official-buy-in">
<h2><span class="section-number">3.5. </span>Getting official buy-in<a class="headerlink" href="#getting-official-buy-in" title="Link to this heading">¶</a></h2>
<p>If your work is being done in a corporate environment - as most Linux
kernel work is - you must, obviously, have permission from suitably
empowered managers before you can post your company’s plans or code to a
public mailing list.  The posting of code which has not been cleared for
release under a GPL-compatible license can be especially problematic; the
sooner that a company’s management and legal staff can agree on the posting
of a kernel development project, the better off everybody involved will be.</p>
<p>Some readers may be thinking at this point that their kernel work is
intended to support a product which does not yet have an officially
acknowledged existence.  Revealing their employer’s plans on a public
mailing list may not be a viable option.  In cases like this, it is worth
considering whether the secrecy is really necessary; there is often no real
need to keep development plans behind closed doors.</p>
<p>That said, there are also cases where a company legitimately cannot
disclose its plans early in the development process.  Companies with
experienced kernel developers may choose to proceed in an open-loop manner
on the assumption that they will be able to avoid serious integration
problems later.  For companies without that sort of in-house expertise, the
best option is often to hire an outside developer to review the plans under
a non-disclosure agreement.  The Linux Foundation operates an NDA program
designed to help with this sort of situation; more information can be found
at:</p>
<blockquote>
<div><p><a class="reference external" href="https://www.linuxfoundation.org/nda/">https://www.linuxfoundation.org/nda/</a></p>
</div></blockquote>
<p>This kind of review is often enough to avoid serious problems later on
without requiring public disclosure of the project.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/process/3.Early-stage.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>