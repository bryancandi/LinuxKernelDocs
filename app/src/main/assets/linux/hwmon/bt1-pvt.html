<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Kernel driver bt1-pvt &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=3918102e" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Kernel driver ChipCap2" href="chipcap2.html" />
    <link rel="prev" title="Kernel driver bpa-rs600" href="bpa-rs600.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.12.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subsystem-apis.html#human-interfaces">Human interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../subsystem-apis.html#other-subsystems">Other subsystems</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../accounting/index.html">Accounting</a></li>
<li class="toctree-l3"><a class="reference internal" href="../cpu-freq/index.html">CPUFreq - CPU frequency and voltage scaling code in the Linux(TM) kernel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../fpga/index.html">FPGA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../i2c/index.html">I2C/SMBus Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../iio/index.html">Industrial I/O</a></li>
<li class="toctree-l3"><a class="reference internal" href="../pcmcia/index.html">PCMCIA</a></li>
<li class="toctree-l3"><a class="reference internal" href="../spi/index.html">Serial Peripheral Interface (SPI)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../w1/index.html">1-Wire Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../watchdog/index.html">Watchdog Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../virt/index.html">Virtualization Support</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Hardware Monitoring</a></li>
<li class="toctree-l3"><a class="reference internal" href="../accel/index.html">Compute Accelerators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../crypto/index.html">Crypto API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PCI/index.html">PCI Bus Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../peci/index.html">PECI Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../wmi/index.html">WMI Subsystem</a></li>
<li class="toctree-l3"><a class="reference internal" href="../tee/index.html">TEE Subsystem</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/hwmon/bt1-pvt.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="kernel-driver-bt1-pvt">
<h1>Kernel driver bt1-pvt<a class="headerlink" href="#kernel-driver-bt1-pvt" title="Link to this heading">¶</a></h1>
<p>Supported chips:</p>
<blockquote>
<div><ul>
<li><p>Baikal-T1 PVT sensor (in SoC)</p>
<p>Prefix: ‘bt1-pvt’</p>
<p>Addresses scanned: -</p>
<p>Datasheet: Provided by BAIKAL ELECTRONICS upon request and under NDA</p>
</li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>Authors:</dt><dd><p>Maxim Kaurkin &lt;<a class="reference external" href="mailto:maxim&#46;kaurkin&#37;&#52;&#48;baikalelectronics&#46;ru">maxim<span>&#46;</span>kaurkin<span>&#64;</span>baikalelectronics<span>&#46;</span>ru</a>&gt;
Serge Semin &lt;<a class="reference external" href="mailto:Sergey&#46;Semin&#37;&#52;&#48;baikalelectronics&#46;ru">Sergey<span>&#46;</span>Semin<span>&#64;</span>baikalelectronics<span>&#46;</span>ru</a>&gt;</p>
</dd>
</dl>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>This driver implements support for the hardware monitoring capabilities of the
embedded into Baikal-T1 process, voltage and temperature sensors. PVT IP-core
consists of one temperature and four voltage sensors, which can be used to
monitor the chip internal environment like heating, supply voltage and
transistors performance. The driver can optionally provide the hwmon alarms
for each sensor the PVT controller supports. The alarms functionality is made
compile-time configurable due to the hardware interface implementation
peculiarity, which is connected with an ability to convert data from only one
sensor at a time. Additional limitation is that the controller performs the
thresholds checking synchronously with the data conversion procedure. Due to
these in order to have the hwmon alarms automatically detected the driver code
must switch from one sensor to another, read converted data and manually check
the threshold status bits. Depending on the measurements timeout settings
(update_interval sysfs node value) this design may cause additional burden on
the system performance. So in case if alarms are unnecessary in your system
design it’s recommended to have them disabled to prevent the PVT IRQs being
periodically raised to get the data cache/alarms status up to date. By default
in alarm-less configuration the data conversion is performed by the driver
on demand when read operation is requested via corresponding _input-file.</p>
</section>
<section id="temperature-monitoring">
<h2>Temperature Monitoring<a class="headerlink" href="#temperature-monitoring" title="Link to this heading">¶</a></h2>
<p>Temperature is measured with 10-bit resolution and reported in millidegree
Celsius. The driver performs all the scaling by itself therefore reports true
temperatures that don’t need any user-space adjustments. While the data
translation formulae isn’t linear, which gives us non-linear discreteness,
it’s close to one, but giving a bit better accuracy for higher temperatures.
The temperature input is mapped as follows (the last column indicates the input
ranges):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>temp1: CPU embedded diode       -48.38C - +147.438C
</pre></div>
</div>
<p>In case if the alarms kernel config is enabled in the driver the temperature input
has associated min and max limits which trigger an alarm when crossed.</p>
</section>
<section id="voltage-monitoring">
<h2>Voltage Monitoring<a class="headerlink" href="#voltage-monitoring" title="Link to this heading">¶</a></h2>
<p>The voltage inputs are also sampled with 10-bit resolution and reported in
millivolts. But in this case the data translation formulae is linear, which
provides a constant measurements discreteness. The data scaling is also
performed by the driver, so returning true millivolts. The voltage inputs are
mapped as follows (the last column indicates the input ranges):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>in0: VDD                (processor core)                0.62V - 1.168V
in1: Low-Vt             (low voltage threshold)         0.62V - 1.168V
in2: High-Vt            (high voltage threshold)        0.62V - 1.168V
in3: Standard-Vt        (standard voltage threshold)    0.62V - 1.168V
</pre></div>
</div>
<p>In case if the alarms config is enabled in the driver the voltage inputs
have associated min and max limits which trigger an alarm when crossed.</p>
</section>
<section id="sysfs-attributes">
<h2>Sysfs Attributes<a class="headerlink" href="#sysfs-attributes" title="Link to this heading">¶</a></h2>
<p>Following is a list of all sysfs attributes that the driver provides, their
permissions and a short description:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Perm</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>update_interval</p></td>
<td><p>RW</p></td>
<td><p>Measurements update interval per
sensor.</p></td>
</tr>
<tr class="row-odd"><td><p>temp1_type</p></td>
<td><p>RO</p></td>
<td><p>Sensor type (always 1 as CPU embedded
diode).</p></td>
</tr>
<tr class="row-even"><td><p>temp1_label</p></td>
<td><p>RO</p></td>
<td><p>CPU Core Temperature sensor.</p></td>
</tr>
<tr class="row-odd"><td><p>temp1_input</p></td>
<td><p>RO</p></td>
<td><p>Measured temperature in millidegree
Celsius.</p></td>
</tr>
<tr class="row-even"><td><p>temp1_min</p></td>
<td><p>RW</p></td>
<td><p>Low limit for temp input.</p></td>
</tr>
<tr class="row-odd"><td><p>temp1_max</p></td>
<td><p>RW</p></td>
<td><p>High limit for temp input.</p></td>
</tr>
<tr class="row-even"><td><p>temp1_min_alarm</p></td>
<td><p>RO</p></td>
<td><p>Temperature input alarm. Returns 1 if
temperature input went below min limit,
0 otherwise.</p></td>
</tr>
<tr class="row-odd"><td><p>temp1_max_alarm</p></td>
<td><p>RO</p></td>
<td><p>Temperature input alarm. Returns 1 if
temperature input went above max limit,
0 otherwise.</p></td>
</tr>
<tr class="row-even"><td><p>temp1_offset</p></td>
<td><p>RW</p></td>
<td><p>Temperature offset in millidegree
Celsius which is added to the
temperature reading by the chip. It can
be used to manually adjust the
temperature measurements within 7.130
degrees Celsius.</p></td>
</tr>
<tr class="row-odd"><td><p>in[0-3]_label</p></td>
<td><p>RO</p></td>
<td><p>CPU Voltage sensor (either core or
low/high/standard thresholds).</p></td>
</tr>
<tr class="row-even"><td><p>in[0-3]_input</p></td>
<td><p>RO</p></td>
<td><p>Measured voltage in millivolts.</p></td>
</tr>
<tr class="row-odd"><td><p>in[0-3]_min</p></td>
<td><p>RW</p></td>
<td><p>Low limit for voltage input.</p></td>
</tr>
<tr class="row-even"><td><p>in[0-3]_max</p></td>
<td><p>RW</p></td>
<td><p>High limit for voltage input.</p></td>
</tr>
<tr class="row-odd"><td><p>in[0-3]_min_alarm</p></td>
<td><p>RO</p></td>
<td><p>Voltage input alarm. Returns 1 if
voltage input went below min limit,
0 otherwise.</p></td>
</tr>
<tr class="row-even"><td><p>in[0-3]_max_alarm</p></td>
<td><p>RO</p></td>
<td><p>Voltage input alarm. Returns 1 if
voltage input went above max limit,
0 otherwise.</p></td>
</tr>
</tbody>
</table>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../_sources/hwmon/bt1-pvt.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>