<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DCN Blocks &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=3918102e" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Multiplane Overlay (MPO)" href="mpo-overview.html" />
    <link rel="prev" title="Display Core Next (DCN)" href="dcn-overview.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.12.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../subsystem-apis.html#human-interfaces">Human interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../input/index.html">Input Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../sound/index.html">Sound Subsystem Documentation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../index.html">GPU Driver Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../leds/index.html">LEDs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/gpu/amdgpu/display/dcn-blocks.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="dcn-blocks">
<h1>DCN Blocks<a class="headerlink" href="#dcn-blocks" title="Link to this heading">¶</a></h1>
<p>In this section, you will find some extra details about some of the DCN blocks
and the code documentation when it is automatically generated.</p>
<section id="dchubbub">
<h2>DCHUBBUB<a class="headerlink" href="#dchubbub" title="Link to this heading">¶</a></h2>
<p>There is only one common DCHUBBUB. It contains the common request and return
blocks for the Data Fabric Interface that are not clock/power gated.</p>
</section>
<section id="hubp">
<h2>HUBP<a class="headerlink" href="#hubp" title="Link to this heading">¶</a></h2>
<p>Display Controller Hub (DCHUB) is the gateway between the Scalable Data Port
(SDP) and DCN. This component has multiple features, such as memory
arbitration, rotation, and cursor manipulation.</p>
<p>There is one HUBP allocated per pipe, which fetches data and converts
different pixel formats (i.e. ARGB8888, NV12, etc) into linear, interleaved
and fixed-depth streams of pixel data.</p>
</section>
<section id="dpp">
<h2>DPP<a class="headerlink" href="#dpp" title="Link to this heading">¶</a></h2>
<p>The DPP (Display Pipe and Plane) block is the unified display data
processing engine in DCN for processing graphic or video data on per DPP
rectangle base. This rectangle can be a part of SLS (Single Large Surface),
or a layer to be blended with other DPP, or a rectangle associated with a
display tile.</p>
<p>It provides various functions including:
- graphic color keyer
- graphic cursor compositing
- graphic or video image source to destination scaling
- image sharping
- video format conversion from 4:2:0 or 4:2:2 to 4:4:4
- Color Space Conversion
- Host LUT gamma adjustment
- Color Gamut Remap
- brightness and contrast adjustment.</p>
<p>DPP pipe consists of Converter and Cursor (CNVC), Scaler (DSCL), Color
Management (CM), Output Buffer (OBUF) and Digital Bypass (DPB) module
connected in a video/graphics pipeline.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.cnv_alpha_2bit_lut">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">cnv_alpha_2bit_lut</span></span></span><a class="headerlink" href="#c.cnv_alpha_2bit_lut" title="Link to this definition">¶</a><br /></dt>
<dd><p>Set the 8bit alpha values based on the 2 bit alpha</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct cnv_alpha_2bit_lut {
    int lut0;
    int lut1;
    int lut2;
    int lut3;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">lut0</span></code></dt><dd><p>ALPHA_2BIT_LUT. ALPHA_2BIT_LUT0. Default: 0b00000000</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lut1</span></code></dt><dd><p>ALPHA_2BIT_LUT. ALPHA_2BIT_LUT1. Default: 0b01010101</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lut2</span></code></dt><dd><p>ALPHA_2BIT_LUT. ALPHA_2BIT_LUT2. Default: 0b10101010</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lut3</span></code></dt><dd><p>ALPHA_2BIT_LUT. ALPHA_2BIT_LUT3. Default: 0b11111111</p>
</dd>
</dl>
</div>
</section>
<section id="mpc">
<h2>MPC<a class="headerlink" href="#mpc" title="Link to this heading">¶</a></h2>
<p>Multiple Pipe/Plane Combiner (MPC) is a component in the hardware pipeline
that performs blending of multiple planes, using global and per-pixel alpha.
It also performs post-blending color correction operations according to the
hardware capabilities, such as color transformation matrix and gamma 1D and
3D LUT.</p>
<p>MPC receives output from all DPP pipes and combines them to multiple outputs
supporting “M MPC inputs -&gt; N MPC outputs” flexible composition
architecture. It features:</p>
<ul class="simple">
<li><p>Programmable blending structure to allow software controlled blending and
cascading;</p></li>
<li><p>Programmable window location of each DPP in active region of display;</p></li>
<li><p>Combining multiple DPP pipes in one active region when a single DPP pipe
cannot process very large surface;</p></li>
<li><p>Combining multiple DPP from different SLS with blending;</p></li>
<li><p>Stereo formats from single DPP in top-bottom or side-by-side modes;</p></li>
<li><p>Stereo formats from 2 DPPs;</p></li>
<li><p>Alpha blending of multiple layers from different DPP pipes;</p></li>
<li><p>Programmable background color;</p></li>
</ul>
<dl class="c struct">
<dt class="sig sig-object c" id="c.mpcc">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mpcc</span></span></span><a class="headerlink" href="#c.mpcc" title="Link to this definition">¶</a><br /></dt>
<dd><p>MPCC connection and blending configuration for a single MPCC instance.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct mpcc {
    int mpcc_id;
    int dpp_id;
    struct mpcc *mpcc_bot;
    struct mpcc_blnd_cfg blnd_cfg;
    struct mpcc_sm_cfg sm_cfg;
    bool shared_bottom;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">mpcc_id</span></code></dt><dd><p>MPCC physical instance.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dpp_id</span></code></dt><dd><p>DPP input to this MPCC</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mpcc_bot</span></code></dt><dd><p>Pointer to bottom layer MPCC. NULL when not connected.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">blnd_cfg</span></code></dt><dd><p>The blending configuration for this MPCC.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sm_cfg</span></code></dt><dd><p>stereo mix setting for this MPCC</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">shared_bottom</span></code></dt><dd><p>If MPCC output to both OPP and DWB endpoints, true. Otherwise, false.</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>This struct is used as a node in an MPC tree.</p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.mpc_tree">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mpc_tree</span></span></span><a class="headerlink" href="#c.mpc_tree" title="Link to this definition">¶</a><br /></dt>
<dd><p>MPC tree represents all MPCC connections for a pipe.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct mpc_tree {
    int opp_id;
    struct mpcc *opp_list;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">opp_id</span></code></dt><dd><p>The OPP instance that owns this MPC tree.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">opp_list</span></code></dt><dd><p>the top MPCC layer of the MPC tree that outputs to OPP endpoint</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<dl class="c struct">
<dt class="sig sig-object c" id="c.mpc_funcs">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">mpc_funcs</span></span></span><a class="headerlink" href="#c.mpc_funcs" title="Link to this definition">¶</a><br /></dt>
<dd><p>funcs</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct mpc_funcs {
    void (*read_mpcc_state)(struct mpc *mpc,int mpcc_inst, struct mpcc_state *s);
    struct mpcc* (*insert_plane)(struct mpc *mpc,struct mpc_tree *tree,struct mpcc_blnd_cfg *blnd_cfg,struct mpcc_sm_cfg *sm_cfg,struct mpcc *insert_above_mpcc,int dpp_id, int mpcc_id);
    void (*remove_mpcc)(struct mpc *mpc,struct mpc_tree *tree, struct mpcc *mpcc);
    void (*mpc_init)(struct mpc *mpc);
    void (*mpc_init_single_inst)(struct mpc *mpc, unsigned int mpcc_id);
    void (*update_blending)(struct mpc *mpc,struct mpcc_blnd_cfg *blnd_cfg, int mpcc_id);
    void (*cursor_lock)(struct mpc *mpc,int opp_id, bool lock);
    struct mpcc* (*insert_plane_to_secondary)(struct mpc *mpc,struct mpc_tree *tree,struct mpcc_blnd_cfg *blnd_cfg,struct mpcc_sm_cfg *sm_cfg,struct mpcc *insert_above_mpcc,int dpp_id, int mpcc_id);
    void (*remove_mpcc_from_secondary)(struct mpc *mpc,struct mpc_tree *tree, struct mpcc *mpcc);
    struct mpcc* (*get_mpcc_for_dpp_from_secondary)(struct mpc_tree *tree, int dpp_id);
    struct mpcc* (*get_mpcc_for_dpp)(struct mpc_tree *tree, int dpp_id);
    void (*wait_for_idle)(struct mpc *mpc, int id);
    void (*assert_mpcc_idle_before_connect)(struct mpc *mpc, int mpcc_id);
    void (*init_mpcc_list_from_hw)(struct mpc *mpc, struct mpc_tree *tree);
    void (*set_denorm)(struct mpc *mpc,int opp_id, enum dc_color_depth output_depth);
    void (*set_denorm_clamp)(struct mpc *mpc,int opp_id, struct mpc_denorm_clamp denorm_clamp);
    void (*set_output_csc)(struct mpc *mpc,int opp_id,const uint16_t *regval, enum mpc_output_csc_mode ocsc_mode);
    void (*set_ocsc_default)(struct mpc *mpc,int opp_id,enum dc_color_space color_space, enum mpc_output_csc_mode ocsc_mode);
    void (*set_output_gamma)(struct mpc *mpc,int mpcc_id, const struct pwl_params *params);
    void (*power_on_mpc_mem_pwr)(struct mpc *mpc,int mpcc_id, bool power_on);
    void (*set_dwb_mux)(struct mpc *mpc,int dwb_id, int mpcc_id);
    void (*disable_dwb_mux)(struct mpc *mpc, int dwb_id);
    bool (*is_dwb_idle)(struct mpc *mpc, int dwb_id);
    void (*set_out_rate_control)(struct mpc *mpc,int opp_id,bool enable,bool rate_2x_mode, struct mpc_dwb_flow_control *flow_control);
    void (*set_gamut_remap)(struct mpc *mpc,int mpcc_id, const struct mpc_grph_gamut_adjustment *adjust);
    bool (*program_1dlut)(struct mpc *mpc,const struct pwl_params *params, uint32_t rmu_idx);
    bool (*program_shaper)(struct mpc *mpc,const struct pwl_params *params, uint32_t rmu_idx);
    uint32_t (*acquire_rmu)(struct mpc *mpc, int mpcc_id, int rmu_idx);
    bool (*program_3dlut)(struct mpc *mpc,const struct tetrahedral_params *params, int rmu_idx);
    int (*release_rmu)(struct mpc *mpc, int mpcc_id);
    unsigned int (*get_mpc_out_mux)(struct mpc *mpc, int opp_id);
    void (*set_bg_color)(struct mpc *mpc,struct tg_color *bg_color, int mpcc_id);
    void (*set_mpc_mem_lp_mode)(struct mpc *mpc);
    void (*set_movable_cm_location)(struct mpc *mpc, enum mpcc_movable_cm_location location, int mpcc_id);
    void (*update_3dlut_fast_load_select)(struct mpc *mpc, int mpcc_id, int hubp_idx);
    void (*get_3dlut_fast_load_status)(struct mpc *mpc, int mpcc_id, uint32_t *done, uint32_t *soft_underflow, uint32_t *hard_underflow);
    void (*populate_lut)(struct mpc *mpc, const enum MCM_LUT_ID id, const union mcm_lut_params params, bool lut_bank_a, int mpcc_id);
    void (*program_lut_read_write_control)(struct mpc *mpc, const enum MCM_LUT_ID id, bool lut_bank_a, int mpcc_id);
    void (*program_lut_mode)(struct mpc *mpc, const enum MCM_LUT_ID id, const enum MCM_LUT_XABLE xable, bool lut_bank_a, int mpcc_id);
    void (*program_3dlut_size)(struct mpc *mpc, bool is_17x17x17, int mpcc_id);
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl>
<dt><code class="docutils literal notranslate"><span class="pre">read_mpcc_state</span></code></dt><dd><p>Read register content from given MPCC physical instance.</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in/out] mpc - MPC context</p></li>
<li><p>[in] mpcc_instance - MPC context instance</p></li>
<li><p>[in] mpcc_state - MPC context state</p></li>
</ul>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">insert_plane</span></code></dt><dd><p>Insert DPP into MPC tree based on specified blending position.
Only used for planes that are part of blending chain for OPP output</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in/out] mpc  - MPC context.</p></li>
<li><p>[in/out] tree - MPC tree structure that plane will be added to.</p></li>
<li><p>[in] blnd_cfg - MPCC blending configuration for the new blending layer.</p></li>
<li><dl class="simple">
<dt>[in] sm_cfg   - MPCC stereo mix configuration for the new blending layer.</dt><dd><p>stereo mix must disable for the very bottom layer of the tree config.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>[in] insert_above_mpcc - Insert new plane above this MPCC.</dt><dd><p>If NULL, insert as bottom plane.</p>
</dd>
</dl>
</li>
<li><p>[in] dpp_id  - DPP instance for the plane to be added.</p></li>
<li><p>[in] mpcc_id - The MPCC physical instance to use for blending.</p></li>
</ul>
<p>Return:</p>
<p><a class="reference internal" href="#c.mpcc" title="mpcc"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mpcc</span></code></a>* - MPCC that was added.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remove_mpcc</span></code></dt><dd><p>Remove a specified MPCC from the MPC tree.</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in/out] mpc   - MPC context.</p></li>
<li><p>[in/out] tree  - MPC tree structure that plane will be removed from.</p></li>
<li><p>[in/out] mpcc  - MPCC to be removed from tree.</p></li>
</ul>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mpc_init</span></code></dt><dd><p>Reset the MPCC HW status by disconnecting all muxes.</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in/out] mpc - MPC context.</p></li>
</ul>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mpc_init_single_inst</span></code></dt><dd><p>Initialize given MPCC physical instance.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] mpcc_id - The MPCC physical instance to be initialized.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">update_blending</span></code></dt><dd><p>Update the blending configuration for a specified MPCC.</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in/out] mpc - MPC context.</p></li>
<li><p>[in] blnd_cfg - MPCC blending configuration.</p></li>
<li><p>[in] mpcc_id  - The MPCC physical instance.</p></li>
</ul>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cursor_lock</span></code></dt><dd><p>Lock cursor updates for the specified OPP. OPP defines the set of
MPCC that are locked together for cursor.</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in] mpc - MPC context.</p></li>
<li><p>[in] opp_id  - The OPP to lock cursor updates on</p></li>
<li><p>[in] lock - lock/unlock the OPP</p></li>
</ul>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">insert_plane_to_secondary</span></code></dt><dd><p>Add DPP into secondary MPC tree based on specified blending
position.  Only used for planes that are part of blending chain for
DWB output</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in/out] mpc  - MPC context.</p></li>
<li><p>[in/out] tree - MPC tree structure that plane will be added to.</p></li>
<li><p>[in] blnd_cfg - MPCC blending configuration for the new blending layer.</p></li>
<li><dl class="simple">
<dt>[in] sm_cfg   - MPCC stereo mix configuration for the new blending layer.</dt><dd><p>stereo mix must disable for the very bottom layer of the tree config.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>[in] insert_above_mpcc - Insert new plane above this MPCC.  If</dt><dd><p>NULL, insert as bottom plane.</p>
</dd>
</dl>
</li>
<li><p>[in] dpp_id - DPP instance for the plane to be added.</p></li>
<li><p>[in] mpcc_id - The MPCC physical instance to use for blending.</p></li>
</ul>
<p>Return:</p>
<p><a class="reference internal" href="#c.mpcc" title="mpcc"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mpcc</span></code></a>* - MPCC that was added.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remove_mpcc_from_secondary</span></code></dt><dd><p>Remove a specified DPP from the ‘secondary’ MPC tree.</p>
<p>Parameters:</p>
<ul class="simple">
<li><p>[in/out] mpc  - MPC context.</p></li>
<li><p>[in/out] tree - MPC tree structure that plane will be removed from.</p></li>
<li><p>[in]     mpcc - MPCC to be removed from tree.</p></li>
</ul>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_mpcc_for_dpp_from_secondary</span></code></dt><dd><p>Find, if it exists, a MPCC from a given ‘secondary’ MPC tree that
is associated with specified plane.</p>
<p>Parameters:
- [in/out] tree - MPC tree structure to search for plane.
- [in] dpp_id - DPP to be searched.</p>
<p>Return:</p>
<p><a class="reference internal" href="#c.mpcc" title="mpcc"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mpcc</span></code></a>* - pointer to plane or NULL if no plane found.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_mpcc_for_dpp</span></code></dt><dd><p>Find, if it exists, a MPCC from a given MPC tree that
is associated with specified plane.</p>
<p>Parameters:
- [in/out] tree - MPC tree structure to search for plane.
- [in] dpp_id - DPP to be searched.</p>
<p>Return:</p>
<p><a class="reference internal" href="#c.mpcc" title="mpcc"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mpcc</span></code></a>* - pointer to plane or NULL if no plane found.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">wait_for_idle</span></code></dt><dd><p>Wait for a MPCC in MPC context to enter idle state.</p>
<p>Parameters:
- [in/out] mpc - MPC Context.
- [in] id - MPCC to wait for idle state.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">assert_mpcc_idle_before_connect</span></code></dt><dd><p>Assert if MPCC in MPC context is in idle state.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] id - MPCC to assert idle state.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">init_mpcc_list_from_hw</span></code></dt><dd><p>Iterate through the MPCC array from a given MPC context struct
and configure each MPCC according to its registers’ values.</p>
<p>Parameters:
- [in/out] mpc - MPC context to initialize MPCC array.
- [in/out] tree - MPC tree structure containing MPCC contexts to initialize.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_denorm</span></code></dt><dd><p>Set corresponding OPP DENORM_CONTROL register value to specific denorm_mode
based on given color depth.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] opp_id - Corresponding OPP to update register.
- [in] output_depth - Arbitrary color depth to set denorm_mode.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_denorm_clamp</span></code></dt><dd><p>Set denorm clamp values on corresponding OPP DENORM CONTROL register.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] opp_id - Corresponding OPP to update register.
- [in] denorm_clamp - Arbitrary denorm clamp to be set.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_output_csc</span></code></dt><dd><p>Set the Output Color Space Conversion matrix
with given values and mode.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] opp_id - Corresponding OPP to update register.
- [in] regval - Values to set in CSC matrix.
- [in] ocsc_mode - Mode to set CSC.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_ocsc_default</span></code></dt><dd><p>Set the Output Color Space Conversion matrix
to default values according to color space.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] opp_id - Corresponding OPP to update register.
- [in] color_space - OCSC color space.
- [in] ocsc_mode - Mode to set CSC.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_output_gamma</span></code></dt><dd><p>Set Output Gamma with given curve parameters.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] mpcc_id - Corresponding MPC to update registers.
- [in] params - Parameters.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">power_on_mpc_mem_pwr</span></code></dt><dd><p>Power on/off memory LUT for given MPCC.
Powering on enables LUT to be updated.
Powering off allows entering low power mode.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] mpcc_id - MPCC to power on.
- [in] power_on</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_dwb_mux</span></code></dt><dd><p>Set corresponding Display Writeback mux
MPC register field to given MPCC id.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] dwb_id - DWB to be set.
- [in] mpcc_id - MPCC id to be stored in DWB mux register.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">disable_dwb_mux</span></code></dt><dd><p>Reset corresponding Display Writeback mux
MPC register field.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] dwb_id - DWB to be set.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">is_dwb_idle</span></code></dt><dd><p>Check DWB status on MPC_DWB0_MUX_STATUS register field.
Return if it is null.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] dwb_id - DWB to be checked.</p>
<p>Return:</p>
<p>bool - wheter DWB is idle or not</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_out_rate_control</span></code></dt><dd><p>Set display output rate control.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] opp_id - OPP to be set.
- [in] enable
- [in] rate_2x_mode
- [in] flow_control</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_gamut_remap</span></code></dt><dd><p>Set post-blending CTM for given MPCC.</p>
<p>Parameters:
- [in] mpc - MPC context.
- [in] mpcc_id - MPCC to set gamut map.
- [in] adjust</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">program_1dlut</span></code></dt><dd><p>Set 1 dimensional Lookup Table.</p>
<p>Parameters:
- [in/out] mpc - MPC context
- [in] params - curve parameters for the LUT configuration
- [in] rmu_idx</p>
<p>bool - wheter LUT was set (set with given parameters) or not (params is NULL and LUT is disabled).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">program_shaper</span></code></dt><dd><p>Set shaper.</p>
<p>Parameters:
- [in/out] mpc - MPC context
- [in] params - curve parameters to be set
- [in] rmu_idx</p>
<p>Return:</p>
<p>bool - wheter shaper was set (set with given parameters) or not (params is NULL and LUT is disabled).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">acquire_rmu</span></code></dt><dd><p>Set given MPCC to be multiplexed to given RMU unit.</p>
<p>Parameters:
- [in/out] mpc - MPC context
- [in] mpcc_id - MPCC
- [in] rmu_idx - Given RMU unit to set MPCC to be multiplexed to.</p>
<p>Return:</p>
<p>unit32_t - rmu_idx if operation was successful, -1 else.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">program_3dlut</span></code></dt><dd><p>Set 3 dimensional Lookup Table.</p>
<p>Parameters:
- [in/out] mpc - MPC context
- [in] params - tetrahedral parameters for the LUT configuration
- [in] rmu_idx</p>
<p>bool - wheter LUT was set (set with given parameters) or not (params is NULL and LUT is disabled).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">release_rmu</span></code></dt><dd><p>For a given MPCC, release the RMU unit it muliplexes to.</p>
<p>Parameters:
- [in/out] mpc - MPC context
- [in] mpcc_id - MPCC</p>
<p>Return:</p>
<p>int - a valid rmu_idx representing released RMU unit or -1 if there was no RMU unit to release.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_mpc_out_mux</span></code></dt><dd><p>Return MPC out mux.</p>
<p>Parameters:
- [in] mpc - MPC context.
- [in] opp_id - OPP</p>
<p>Return:</p>
<p>unsigned int - Out Mux</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_bg_color</span></code></dt><dd><p>Find corresponding bottommost MPCC and
set its bg color.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] bg_color - background color to be set.
- [in] mpcc_id</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_mpc_mem_lp_mode</span></code></dt><dd><p>Set mpc_mem_lp_mode.</p>
<p>Parameters:
- [in/out] mpc - MPC context.</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_movable_cm_location</span></code></dt><dd><p>Set Movable CM Location.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] location
- [in] mpcc_id</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">update_3dlut_fast_load_select</span></code></dt><dd><p>Update 3D LUT fast load select.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] mpcc_id
- [in] hubp_idx</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">get_3dlut_fast_load_status</span></code></dt><dd><p>Get 3D LUT fast load status and reference them with done, soft_underflow and hard_underflow pointers.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] mpcc_id
- [in/out] done
- [in/out] soft_underflow
- [in/out] hard_underflow</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">populate_lut</span></code></dt><dd><p>Populate LUT with given tetrahedral parameters.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] id
- [in] params
- [in] lut_bank_a
- [in] mpcc_id</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">program_lut_read_write_control</span></code></dt><dd><p>Program LUT RW control.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] id
- [in] lut_bank_a
- [in] mpcc_id</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">program_lut_mode</span></code></dt><dd><p>Program LUT mode.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] id
- [in] xable
- [in] lut_bank_a
- [in] mpcc_id</p>
<p>Return:</p>
<p>void</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">program_3dlut_size</span></code></dt><dd><p>Program 3D LUT size.</p>
<p>Parameters:
- [in/out] mpc - MPC context.
- [in] is_17x17x17 - is 3dlut 17x17x17
- [in] mpcc_id</p>
<p>Return:</p>
<p>void</p>
</dd>
</dl>
</div>
</section>
<section id="opp">
<h2>OPP<a class="headerlink" href="#opp" title="Link to this heading">¶</a></h2>
<p>The Output Plane Processor (OPP) block groups have functions that format
pixel streams such that they are suitable for display at the display device.
The key functions contained in the OPP are:</p>
<ul class="simple">
<li><p>Adaptive Backlight Modulation (ABM)</p></li>
<li><p>Formatter (FMT) which provide pixel-by-pixel operations for format the
incoming pixel stream.</p></li>
<li><p>Output Buffer that provide pixel replication, and overlapping.</p></li>
<li><p>Interface between MPC and OPTC.</p></li>
<li><p>Clock and reset generation.</p></li>
<li><p>CRC generation.</p></li>
</ul>
<dl class="c struct">
<dt class="sig sig-object c" id="c.pwl_float_data">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">pwl_float_data</span></span></span><a class="headerlink" href="#c.pwl_float_data" title="Link to this definition">¶</a><br /></dt>
<dd><p>Fixed point RGB color</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct pwl_float_data {
    struct fixed31_32 r;
    struct fixed31_32 g;
    struct fixed31_32 b;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">r</span></code></dt><dd><p>Component Red.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">g</span></code></dt><dd><p>Component Green.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">b</span></code></dt><dd><p>Component Blue.</p>
</dd>
</dl>
</div>
</section>
<section id="dio">
<h2>DIO<a class="headerlink" href="#dio" title="Link to this heading">¶</a></h2>
<p>Display Input Output (DIO), is the display input and output unit in DCN. It
includes output encoders to support different display output, like
DisplayPort, HDMI, DVI interface, and others. It also includes the control
and status channels for these interfaces.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.can_use_dio_link_hwss">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">can_use_dio_link_hwss</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">dc_link</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">link</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">link_resource</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">link_res</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.can_use_dio_link_hwss" title="Link to this definition">¶</a><br /></dt>
<dd><p>Check if the link_hwss is accessible</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">dc_link</span> <span class="pre">*link</span></code></dt><dd><p>Reference a link struct containing one or more sinks and the
connective status.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">link_resource</span> <span class="pre">*link_res</span></code></dt><dd><p>Mappable hardware resource used to enable a link.</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>Return true if the link encoder is accessible from link.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.get_dio_link_hwss">
<span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">link_hwss</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">get_dio_link_hwss</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.get_dio_link_hwss" title="Link to this definition">¶</a><br /></dt>
<dd><p>Return link_hwss reference</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt><dd><p>no arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function behaves like a get function to return the link_hwss populated
in the link_hwss_dio.c file.</p>
<p><strong>Return</strong></p>
<p>Return the reference to the filled struct of link_hwss.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../_sources/gpu/amdgpu/display/dcn-blocks.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>