<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Multi-tile Devices &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=888ff710"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Debugging" href="xe_debugging.html" />
    <link rel="prev" title="Firmware" href="xe_firmware.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.13.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../subsystem-apis.html#human-interfaces">Human interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../input/index.html">Input Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sound/index.html">Sound Subsystem Documentation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">GPU Driver Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/gpu/xe/xe_tile.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="multi-tile-devices">
<h1>Multi-tile Devices<a class="headerlink" href="#multi-tile-devices" title="Link to this heading">¶</a></h1>
<p>Different vendors use the term “tile” a bit differently, but in the Intel
world, a ‘tile’ is pretty close to what most people would think of as being
a complete GPU.  When multiple GPUs are placed behind a single PCI device,
that’s what is referred to as a “multi-tile device.”  In such cases, pretty
much all hardware is replicated per-tile, although certain responsibilities
like PCI communication, reporting of interrupts to the OS, etc. are handled
solely by the “root tile.”  A multi-tile platform takes care of tying the
tiles together in a way such that interrupt notifications from remote tiles
are forwarded to the root tile, the per-tile vram is combined into a single
address space, etc.</p>
<p>In contrast, a “GT” (which officially stands for “Graphics Technology”) is
the subset of a GPU/tile that is responsible for implementing graphics
and/or media operations.  The GT is where a lot of the driver implementation
happens since it’s where the hardware engines, the execution units, and the
GuC all reside.</p>
<p>Historically most Intel devices were single-tile devices that contained a
single GT.  PVC is an example of an Intel platform built on a multi-tile
design (i.e., multiple GPUs behind a single PCI device); each PVC tile only
has a single GT.  In contrast, platforms like MTL that have separate chips
for render and media IP are still only a single logical GPU, but the
graphics and media IP blocks are each exposed as a separate GT within that
single GPU.  This is important from a software perspective because multi-GT
platforms like MTL only replicate a subset of the GPU hardware and behave
differently than multi-tile platforms like PVC where nearly everything is
replicated.</p>
<dl class="simple">
<dt>Per-tile functionality (shared by all GTs within the tile):</dt><dd><ul class="simple">
<li><p>Complete 4MB MMIO space (containing SGunit/SoC registers, GT
registers, display registers, etc.)</p></li>
<li><p>Global GTT</p></li>
<li><p>VRAM (if discrete)</p></li>
<li><p>Interrupt flows</p></li>
<li><p>Migration context</p></li>
<li><p>kernel batchbuffer pool</p></li>
<li><p>Primary GT</p></li>
<li><p>Media GT (if media version &gt;= 13)</p></li>
</ul>
</dd>
<dt>Per-GT functionality:</dt><dd><ul class="simple">
<li><p>GuC</p></li>
<li><p>Hardware engines</p></li>
<li><p>Programmable hardware units (subslices, EUs)</p></li>
<li><p>GSI subset of registers (multiple copies of these registers reside
within the complete MMIO space provided by the tile, but at different
offsets --- 0 for render, 0x380000 for media)</p></li>
<li><p>Multicast register steering</p></li>
<li><p>TLBs to cache page table translations</p></li>
<li><p>Reset capability</p></li>
<li><p>Low-level power management (e.g., C6)</p></li>
<li><p>Clock frequency</p></li>
<li><p>MOCS and PAT programming</p></li>
</ul>
</dd>
</dl>
<section id="internal-api">
<h2>Internal API<a class="headerlink" href="#internal-api" title="Link to this heading">¶</a></h2>
<dl class="c function">
<dt class="sig sig-object c" id="c.xe_tile_alloc">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_tile_alloc</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_tile</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tile</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xe_tile_alloc" title="Link to this definition">¶</a><br /></dt>
<dd><p>Perform per-tile memory allocation</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_tile</span> <span class="pre">*tile</span></code></dt><dd><p>Tile to perform allocations for</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Allocates various per-tile data structures using DRM-managed allocations.
Does not touch the hardware.</p>
<p>Returns -ENOMEM if allocations fail, otherwise 0.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.xe_tile_init_early">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_tile_init_early</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_tile</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tile</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_device</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">xe</span></span>, <span class="n"><span class="pre">u8</span></span><span class="w"> </span><span class="n"><span class="pre">id</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xe_tile_init_early" title="Link to this definition">¶</a><br /></dt>
<dd><p>Initialize the tile and primary GT</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_tile</span> <span class="pre">*tile</span></code></dt><dd><p>Tile to initialize</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_device</span> <span class="pre">*xe</span></code></dt><dd><p>Parent Xe device</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">id</span></code></dt><dd><p>Tile ID</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Initializes per-tile resources that don’t require any interactions with the
hardware or any knowledge about the Graphics/Media IP version.</p>
<p><strong>Return</strong></p>
<p>0 on success, negative error code on error.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.xe_tile_init_noalloc">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_tile_init_noalloc</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_tile</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tile</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xe_tile_init_noalloc" title="Link to this definition">¶</a><br /></dt>
<dd><p>Init tile up to the point where allocations can happen.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_tile</span> <span class="pre">*tile</span></code></dt><dd><p>The tile to initialize.</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function prepares the tile to allow memory allocations to VRAM, but is
not allowed to allocate memory itself. This state is useful for display
readout, because the inherited display framebuffer will otherwise be
overwritten as it is usually put at the start of VRAM.</p>
<p>Note that since this is tile initialization, it should not perform any
GT-specific operations, and thus does not need to hold GT forcewake.</p>
<p><strong>Return</strong></p>
<p>0 on success, negative error code on error.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../_sources/gpu/xe/xe_tile.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>