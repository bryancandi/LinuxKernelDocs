<!DOCTYPE html>

<html lang="en" data-content_root="../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Register Table Processing &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css?v=3918102e" />
    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Firmware" href="xe_firmware.html" />
    <link rel="prev" title="Hardware workarounds" href="xe_wa.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/logo.svg" alt="Logo of The Linux Kernel"/>
            </a></p>
<h1 class="logo"><a href="../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.12.0</p>







<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../subsystem-apis.html">Subsystems</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../subsystem-apis.html#human-interfaces">Human interfaces</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../input/index.html">Input Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../hid/index.html">Human Interface Devices (HID)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../sound/index.html">Sound Subsystem Documentation</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">GPU Driver Developer’s Guide</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fb/index.html">Frame Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../leds/index.html">LEDs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#networking-interfaces">Networking interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../subsystem-apis.html#other-subsystems">Other subsystems</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../_sources/gpu/xe/xe_rtp.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="register-table-processing">
<h1>Register Table Processing<a class="headerlink" href="#register-table-processing" title="Link to this heading">¶</a></h1>
<p>Internal infrastructure to define how registers should be updated based on
rules and actions. This can be used to define tables with multiple entries
(one per register) that will be walked over at some point in time to apply
the values to the registers that have matching rules.</p>
<section id="internal-api">
<h2>Internal API<a class="headerlink" href="#internal-api" title="Link to this heading">¶</a></h2>
<dl class="c struct">
<dt class="sig sig-object c" id="c.xe_rtp_action">
<span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_rtp_action</span></span></span><a class="headerlink" href="#c.xe_rtp_action" title="Link to this definition">¶</a><br /></dt>
<dd><p>action to take for any matching rule</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Definition</strong>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct xe_rtp_action {
    struct xe_reg           reg;
    u32 clr_bits;
    u32 set_bits;
#define XE_RTP_NOCHECK          .read_mask = 0;
    u32 read_mask;
#define XE_RTP_ACTION_FLAG_ENGINE_BASE          BIT(0);
    u8 flags;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">reg</span></code></dt><dd><p>Register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clr_bits</span></code></dt><dd><p>bits to clear when updating register. It’s always a
superset of bits being modified</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">set_bits</span></code></dt><dd><p>bits to set when updating register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_mask</span></code></dt><dd><p>mask for bits to consider when reading value back</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">flags</span></code></dt><dd><p>flags to apply on rule evaluation or action</p>
</dd>
</dl>
</div>
<p><strong>Description</strong></p>
<p>This struct records what action should be taken in a register that has a
matching rule. Example of actions: set/clear bits.</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_PLATFORM">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_PLATFORM</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_PLATFORM" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_PLATFORM</span> <span class="pre">(plat_)</span></code></p>
<blockquote>
<div><p>Create rule matching platform</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">plat_</span></code></dt><dd><p>platform to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_SUBPLATFORM">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_SUBPLATFORM</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_SUBPLATFORM" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_SUBPLATFORM</span> <span class="pre">(plat_,</span> <span class="pre">sub_)</span></code></p>
<blockquote>
<div><p>Create rule matching platform and sub-platform</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">plat_</span></code></dt><dd><p>platform to match</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sub_</span></code></dt><dd><p>sub-platform to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_GRAPHICS_STEP">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_GRAPHICS_STEP</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_GRAPHICS_STEP" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_GRAPHICS_STEP</span> <span class="pre">(start_,</span> <span class="pre">end_)</span></code></p>
<blockquote>
<div><p>Create rule matching graphics stepping</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">start_</span></code></dt><dd><p>First stepping matching the rule</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">end_</span></code></dt><dd><p>First stepping that does not match the rule</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that the range matching this rule is [ <strong>start_</strong>, <strong>end_</strong> ), i.e. inclusive
on the left, exclusive on the right.</p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_MEDIA_STEP">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_MEDIA_STEP</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_MEDIA_STEP" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_MEDIA_STEP</span> <span class="pre">(start_,</span> <span class="pre">end_)</span></code></p>
<blockquote>
<div><p>Create rule matching media stepping</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">start_</span></code></dt><dd><p>First stepping matching the rule</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">end_</span></code></dt><dd><p>First stepping that does not match the rule</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that the range matching this rule is [ <strong>start_</strong>, <strong>end_</strong> ), i.e. inclusive
on the left, exclusive on the right.</p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_ENGINE_CLASS">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_ENGINE_CLASS</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_ENGINE_CLASS" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_ENGINE_CLASS</span> <span class="pre">(cls_)</span></code></p>
<blockquote>
<div><p>Create rule matching an engine class</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">cls_</span></code></dt><dd><p>Engine class to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_FUNC">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_FUNC</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_FUNC" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_FUNC</span> <span class="pre">(func__)</span></code></p>
<blockquote>
<div><p>Create rule using callback function for match</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">func__</span></code></dt><dd><p>Function to call to decide if rule matches</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>This allows more complex checks to be performed. The <code class="docutils literal notranslate"><span class="pre">XE_RTP</span></code>
infrastructure will simply call the function <strong>func_</strong> passed to decide if this
rule matches the device.</p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_GRAPHICS_VERSION">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_GRAPHICS_VERSION</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_GRAPHICS_VERSION" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_GRAPHICS_VERSION</span> <span class="pre">(ver__)</span></code></p>
<blockquote>
<div><p>Create rule matching graphics version</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ver__</span></code></dt><dd><p>Graphics IP version to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_GRAPHICS_VERSION_RANGE">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_GRAPHICS_VERSION_RANGE</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_GRAPHICS_VERSION_RANGE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_GRAPHICS_VERSION_RANGE</span> <span class="pre">(ver_start__,</span> <span class="pre">ver_end__)</span></code></p>
<blockquote>
<div><p>Create rule matching a range of graphics version</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ver_start__</span></code></dt><dd><p>First graphics IP version to match</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ver_end__</span></code></dt><dd><p>Last graphics IP version to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that the range matching this rule is [ <strong>ver_start__</strong>, <strong>ver_end__</strong> ], i.e.
inclusive on boths sides</p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_GRAPHICS_VERSION_ANY_GT">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_GRAPHICS_VERSION_ANY_GT</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_GRAPHICS_VERSION_ANY_GT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_GRAPHICS_VERSION_ANY_GT</span> <span class="pre">(ver__)</span></code></p>
<blockquote>
<div><p>Create rule matching graphics version on any GT</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ver__</span></code></dt><dd><p>Graphics IP version to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Like XE_RTP_RULE_GRAPHICS_VERSION, but it matches even if the current GT
being checked is not of the graphics type. It allows to add RTP entries to
another GT when the device contains a Graphics IP with that version.</p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_MEDIA_VERSION">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_MEDIA_VERSION</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_MEDIA_VERSION" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_MEDIA_VERSION</span> <span class="pre">(ver__)</span></code></p>
<blockquote>
<div><p>Create rule matching media version</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ver__</span></code></dt><dd><p>Media IP version to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_MEDIA_VERSION_RANGE">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_MEDIA_VERSION_RANGE</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_MEDIA_VERSION_RANGE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_MEDIA_VERSION_RANGE</span> <span class="pre">(ver_start__,</span> <span class="pre">ver_end__)</span></code></p>
<blockquote>
<div><p>Create rule matching a range of media version</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ver_start__</span></code></dt><dd><p>First media IP version to match</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">ver_end__</span></code></dt><dd><p>Last media IP version to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Note that the range matching this rule is [ <strong>ver_start__</strong>, <strong>ver_end__</strong> ], i.e.
inclusive on boths sides</p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_MEDIA_VERSION_ANY_GT">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_MEDIA_VERSION_ANY_GT</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_MEDIA_VERSION_ANY_GT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_MEDIA_VERSION_ANY_GT</span> <span class="pre">(ver__)</span></code></p>
<blockquote>
<div><p>Create rule matching media version on any GT</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">ver__</span></code></dt><dd><p>Media IP version to match</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Like XE_RTP_RULE_MEDIA_VERSION, but it matches even if the current GT being
checked is not of the media type. It allows to add RTP entries to another
GT when the device contains a Media IP with that version.</p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_IS_INTEGRATED">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_IS_INTEGRATED</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_IS_INTEGRATED" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_IS_INTEGRATED</span> <span class="pre">()</span></code></p>
<blockquote>
<div><p>Create a rule matching integrated graphics devices</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<p><strong>Description</strong></p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_IS_DISCRETE">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_IS_DISCRETE</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_IS_DISCRETE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_IS_DISCRETE</span> <span class="pre">()</span></code></p>
<blockquote>
<div><p>Create a rule matching discrete graphics devices</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<p><strong>Description</strong></p>
<p>Refer to <a class="reference internal" href="#c.XE_RTP_RULES" title="XE_RTP_RULES"><code class="xref c c-func docutils literal notranslate"><span class="pre">XE_RTP_RULES()</span></code></a> for expected usage.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULE_OR">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULE_OR</span></span></span><a class="headerlink" href="#c.XE_RTP_RULE_OR" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULE_OR</span> <span class="pre">()</span></code></p>
<blockquote>
<div><p>Create an OR condition for rtp rules</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<p><strong>Description</strong></p>
<p>RTP rules are AND’ed when evaluated and all of them need to match.
XE_RTP_RULE_OR allows to create set of rules where any of them matching is
sufficient for the action to trigger. Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">xe_rtp_entry_sr</span><span class="w"> </span><span class="n">entries</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">XE_RTP_NAME</span><span class="p">(</span><span class="s">&quot;test-entry&quot;</span><span class="p">),</span>
<span class="w">          </span><span class="n">XE_RTP_RULES</span><span class="p">(</span><span class="n">PLATFORM</span><span class="p">(</span><span class="n">DG2</span><span class="p">),</span><span class="w"> </span><span class="n">OR</span><span class="p">,</span><span class="w"> </span><span class="n">PLATFORM</span><span class="p">(</span><span class="n">TIGERLAKE</span><span class="p">)),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ACTION_WR">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ACTION_WR</span></span></span><a class="headerlink" href="#c.XE_RTP_ACTION_WR" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_WR</span> <span class="pre">(reg_,</span> <span class="pre">val_,</span> <span class="pre">...)</span></code></p>
<blockquote>
<div><p>Helper to write a value to the register, overriding all the bits</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">reg_</span></code></dt><dd><p>Register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">val_</span></code></dt><dd><p>Value to set</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Additional fields to override in the <a class="reference internal" href="#c.xe_rtp_action" title="xe_rtp_action"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_action</span></code></a> entry</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>The correspondent notation in bspec is:</p>
<blockquote>
<div><p>REGNAME = VALUE</p>
</div></blockquote>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ACTION_SET">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ACTION_SET</span></span></span><a class="headerlink" href="#c.XE_RTP_ACTION_SET" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_SET</span> <span class="pre">(reg_,</span> <span class="pre">val_,</span> <span class="pre">...)</span></code></p>
<blockquote>
<div><p>Set bits from <strong>val_</strong> in the register.</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">reg_</span></code></dt><dd><p>Register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">val_</span></code></dt><dd><p>Bits to set in the register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Additional fields to override in the <a class="reference internal" href="#c.xe_rtp_action" title="xe_rtp_action"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_action</span></code></a> entry</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>For masked registers this translates to a single write, while for other
registers it’s a RMW. The correspondent bspec notation is (example for bits 2
and 5, but could be any):</p>
<blockquote>
<div><p>REGNAME[2] = 1
REGNAME[5] = 1</p>
</div></blockquote>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ACTION_CLR">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ACTION_CLR</span></span></span><a class="headerlink" href="#c.XE_RTP_ACTION_CLR" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_CLR</span> <span class="pre">(reg_,</span> <span class="pre">val_,</span> <span class="pre">...)</span></code></p>
<blockquote>
<div><p>Clear bits from <strong>val_</strong> in the register.</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">reg_</span></code></dt><dd><p>Register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">val_</span></code></dt><dd><p>Bits to clear in the register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Additional fields to override in the <a class="reference internal" href="#c.xe_rtp_action" title="xe_rtp_action"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_action</span></code></a> entry</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>For masked registers this translates to a single write, while for other
registers it’s a RMW. The correspondent bspec notation is (example for bits 2
and 5, but could be any):</p>
<blockquote>
<div><p>REGNAME[2] = 0
REGNAME[5] = 0</p>
</div></blockquote>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ACTION_FIELD_SET">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ACTION_FIELD_SET</span></span></span><a class="headerlink" href="#c.XE_RTP_ACTION_FIELD_SET" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_FIELD_SET</span> <span class="pre">(reg_,</span> <span class="pre">mask_bits_,</span> <span class="pre">val_,</span> <span class="pre">...)</span></code></p>
<blockquote>
<div><p>Set a bit range</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">reg_</span></code></dt><dd><p>Register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mask_bits_</span></code></dt><dd><p>Mask of bits to be changed in the register, forming a field</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">val_</span></code></dt><dd><p>Value to set in the field denoted by <strong>mask_bits_</strong></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Additional fields to override in the <a class="reference internal" href="#c.xe_rtp_action" title="xe_rtp_action"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_action</span></code></a> entry</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>For masked registers this translates to a single write, while for other
registers it’s a RMW. The correspondent bspec notation is:</p>
<blockquote>
<div><p>REGNAME[&lt;end&gt;:&lt;start&gt;] = VALUE</p>
</div></blockquote>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ACTION_WHITELIST">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ACTION_WHITELIST</span></span></span><a class="headerlink" href="#c.XE_RTP_ACTION_WHITELIST" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_WHITELIST</span> <span class="pre">(reg_,</span> <span class="pre">val_,</span> <span class="pre">...)</span></code></p>
<blockquote>
<div><p>Add register to userspace whitelist</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">reg_</span></code></dt><dd><p>Register</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">val_</span></code></dt><dd><p>Whitelist-specific flags to set</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Additional fields to override in the <a class="reference internal" href="#c.xe_rtp_action" title="xe_rtp_action"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_action</span></code></a> entry</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Add a register to the whitelist, allowing userspace to modify the ster with
regular user privileges.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_NAME">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_NAME</span></span></span><a class="headerlink" href="#c.XE_RTP_NAME" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_NAME</span> <span class="pre">(s_)</span></code></p>
<blockquote>
<div><p>Helper to set the name in xe_rtp_entry</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">s_</span></code></dt><dd><p>Name describing this rule, often a HW-specific number</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>TODO: maybe move this behind a debug config?</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ENTRY_FLAG">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ENTRY_FLAG</span></span></span><a class="headerlink" href="#c.XE_RTP_ENTRY_FLAG" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ENTRY_FLAG</span> <span class="pre">(...)</span></code></p>
<blockquote>
<div><p>Helper to add multiple flags to a struct xe_rtp_entry_sr</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Entry flags, without the <code class="docutils literal notranslate"><span class="pre">XE_RTP_ENTRY_FLAG_</span></code> prefix</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper to automatically add a <code class="docutils literal notranslate"><span class="pre">XE_RTP_ENTRY_FLAG_</span></code> prefix to the flags
when defining struct xe_rtp_entry entries. Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">xe_rtp_entry_sr</span><span class="w"> </span><span class="n">wa_entries</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">XE_RTP_NAME</span><span class="p">(</span><span class="s">&quot;test-entry&quot;</span><span class="p">),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">          </span><span class="n">XE_RTP_ENTRY_FLAG</span><span class="p">(</span><span class="n">FOREACH_ENGINE</span><span class="p">),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ACTION_FLAG">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ACTION_FLAG</span></span></span><a class="headerlink" href="#c.XE_RTP_ACTION_FLAG" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_FLAG</span> <span class="pre">(...)</span></code></p>
<blockquote>
<div><p>Helper to add multiple flags to a <a class="reference internal" href="#c.xe_rtp_action" title="xe_rtp_action"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_action</span></code></a></p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Action flags, without the <code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_FLAG_</span></code> prefix</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Helper to automatically add a <code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTION_FLAG_</span></code> prefix to the flags
when defining <a class="reference internal" href="#c.xe_rtp_action" title="xe_rtp_action"><code class="xref c c-struct docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_action</span></code></a> entries. Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">xe_rtp_entry_sr</span><span class="w"> </span><span class="n">wa_entries</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">XE_RTP_NAME</span><span class="p">(</span><span class="s">&quot;test-entry&quot;</span><span class="p">),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">          </span><span class="n">XE_RTP_ACTION_SET</span><span class="p">(...,</span><span class="w"> </span><span class="n">XE_RTP_ACTION_FLAG</span><span class="p">(</span><span class="n">FOREACH_ENGINE</span><span class="p">)),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_RULES">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_RULES</span></span></span><a class="headerlink" href="#c.XE_RTP_RULES" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_RULES</span> <span class="pre">(...)</span></code></p>
<blockquote>
<div><p>Helper to set multiple rules to a struct xe_rtp_entry_sr entry</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Rules</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>At least one rule is needed and up to 12 are supported. Multiple rules are
AND’ed together, i.e. all the rules must evaluate to true for the entry to
be processed. See XE_RTP_MATCH_* for the possible match rules. Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">xe_rtp_entry_sr</span><span class="w"> </span><span class="n">wa_entries</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">XE_RTP_NAME</span><span class="p">(</span><span class="s">&quot;test-entry&quot;</span><span class="p">),</span>
<span class="w">          </span><span class="n">XE_RTP_RULES</span><span class="p">(</span><span class="n">SUBPLATFORM</span><span class="p">(</span><span class="n">DG2</span><span class="p">,</span><span class="w"> </span><span class="n">G10</span><span class="p">),</span><span class="w"> </span><span class="n">GRAPHICS_STEP</span><span class="p">(</span><span class="n">A0</span><span class="p">,</span><span class="w"> </span><span class="n">B0</span><span class="p">)),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.XE_RTP_ACTIONS">
<span class="sig-name descname"><span class="n"><span class="pre">XE_RTP_ACTIONS</span></span></span><a class="headerlink" href="#c.XE_RTP_ACTIONS" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">XE_RTP_ACTIONS</span> <span class="pre">(...)</span></code></p>
<blockquote>
<div><p>Helper to set multiple actions to a struct xe_rtp_entry_sr</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>Actions to be taken</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>At least one action is needed and up to 12 are supported. See XE_RTP_ACTION_*
for the possible actions. Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">xe_rtp_entry_sr</span><span class="w"> </span><span class="n">wa_entries</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="n">XE_RTP_NAME</span><span class="p">(</span><span class="s">&quot;test-entry&quot;</span><span class="p">),</span>
<span class="w">          </span><span class="n">XE_RTP_RULES</span><span class="p">(...),</span>
<span class="w">          </span><span class="n">XE_RTP_ACTIONS</span><span class="p">(</span><span class="n">SET</span><span class="p">(..),</span><span class="w"> </span><span class="n">SET</span><span class="p">(...),</span><span class="w"> </span><span class="n">CLR</span><span class="p">(...)),</span>
<span class="w">          </span><span class="p">...</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.xe_rtp_match_even_instance">
<span class="kt"><span class="pre">bool</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_rtp_match_even_instance</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_gt</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">gt</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_hw_engine</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">hwe</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xe_rtp_match_even_instance" title="Link to this definition">¶</a><br /></dt>
<dd><p>Match if engine instance is even</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">xe_gt</span> <span class="pre">*gt</span></code></dt><dd><p>GT structure</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">xe_hw_engine</span> <span class="pre">*hwe</span></code></dt><dd><p>Engine instance</p>
</dd>
</dl>
<p><strong>Return</strong></p>
<p>true if engine instance is even, false otherwise</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.xe_rtp_process_ctx_enable_active_tracking">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_rtp_process_ctx_enable_active_tracking</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_rtp_process_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">long</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">active_entries</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">n_entries</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xe_rtp_process_ctx_enable_active_tracking" title="Link to this definition">¶</a><br /></dt>
<dd><p>Enable tracking of active entries</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_process_ctx</span> <span class="pre">*ctx</span></code></dt><dd><p>The context for processing the table</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">long</span> <span class="pre">*active_entries</span></code></dt><dd><p>bitmap to store the active entries</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">n_entries</span></code></dt><dd><p>number of entries to be processed</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Set additional metadata to track what entries are considered “active”, i.e.
their rules match the condition. Bits are never cleared: entries with
matching rules set the corresponding bit in the bitmap.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.xe_rtp_process_to_sr">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_rtp_process_to_sr</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_rtp_process_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_rtp_entry_sr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">entries</span></span>, <span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_reg_sr</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sr</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xe_rtp_process_to_sr" title="Link to this definition">¶</a><br /></dt>
<dd><p>Process all rtp <strong>entries</strong>, adding the matching ones to the save-restore argument.</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_process_ctx</span> <span class="pre">*ctx</span></code></dt><dd><p>The context for processing the table, with one of device, gt or hwe</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">xe_rtp_entry_sr</span> <span class="pre">*entries</span></code></dt><dd><p>Table with RTP definitions</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_reg_sr</span> <span class="pre">*sr</span></code></dt><dd><p>Save-restore struct where matching rules execute the action. This can be
viewed as the “coalesced view” of multiple the tables. The bits for each
register set are expected not to collide with previously added entries</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Walk the table pointed by <strong>entries</strong> (with an empty sentinel) and add all
entries with matching rules to <strong>sr</strong>. If <strong>hwe</strong> is not NULL, its mmio_base is
used to calculate the right register offset</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.xe_rtp_process">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">xe_rtp_process</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_rtp_process_ctx</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">ctx</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="k"><span class="pre">struct</span></span><span class="w"> </span><span class="n"><span class="pre">xe_rtp_entry</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">entries</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.xe_rtp_process" title="Link to this definition">¶</a><br /></dt>
<dd><p>Process all rtp <strong>entries</strong>, without running any action</p>
</dd></dl>

<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">xe_rtp_process_ctx</span> <span class="pre">*ctx</span></code></dt><dd><p>The context for processing the table, with one of device, gt or hwe</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">xe_rtp_entry</span> <span class="pre">*entries</span></code></dt><dd><p>Table with RTP definitions</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>Walk the table pointed by <strong>entries</strong> (with an empty sentinel), executing the
rules. One difference from <a class="reference internal" href="#c.xe_rtp_process_to_sr" title="xe_rtp_process_to_sr"><code class="xref c c-func docutils literal notranslate"><span class="pre">xe_rtp_process_to_sr()</span></code></a>: there is no action
associated with each entry since this uses struct xe_rtp_entry. Its main use
is for marking active workarounds via
<a class="reference internal" href="#c.xe_rtp_process_ctx_enable_active_tracking" title="xe_rtp_process_ctx_enable_active_tracking"><code class="xref c c-func docutils literal notranslate"><span class="pre">xe_rtp_process_ctx_enable_active_tracking()</span></code></a>.</p>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &#169;The kernel development community.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 7.4.7</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../_sources/gpu/xe/xe_rtp.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>