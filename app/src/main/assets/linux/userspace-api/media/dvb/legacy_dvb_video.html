<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>6.2.3.1. DVB Video Device &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=a152c8ac" />
    <script src="../../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="6.2.3.2. DVB Audio Device" href="legacy_dvb_audio.html" />
    <link rel="prev" title="6.2. Legacy DVB MPEG Decoder APIs" href="legacy_dvb_decoder_api.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.13.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">Locking</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rust/index.html">Rust</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Userspace API</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../index.html#system-calls">System calls</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#security-related-interfaces">Security-related interfaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../index.html#devices-and-i-o">Devices and I/O</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../accelerators/ocxl.html">OpenCAPI (Open Coherent Accelerator Processor Interface)</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dma-buf-alloc-exchange.html">Exchanging pixel buffers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../gpio/index.html">GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../iommufd.html">IOMMUFD</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">Linux Media Infrastructure userspace API</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../dcdbas.html">Dell Systems Management Base Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../vduse.html">VDUSE - “vDPA Device in Userspace”</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../isapnp.html">ISA Plug &amp; Play support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#everything-else">Everything else</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/userspace-api/media/dvb/legacy_dvb_video.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="dvb-video-device">
<span id="dvb-video"></span><h1><span class="section-number">6.2.3.1. </span>DVB Video Device<a class="headerlink" href="#dvb-video-device" title="Link to this heading">¶</a></h1>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>The DVB video device controls the MPEG2 video decoder of the DVB
hardware. It can be accessed through <code class="docutils literal notranslate"><span class="pre">/dev/dvb/adapter0/video0</span></code>. Data
types and ioctl definitions can be accessed by including
<code class="docutils literal notranslate"><span class="pre">linux/dvb/video.h</span></code> in your application.</p>
<p>Note that the DVB video device only controls decoding of the MPEG video
stream, not its presentation on the TV or computer screen. On PCs this
is typically handled by an associated video4linux device, e.g.
<code class="docutils literal notranslate"><span class="pre">/dev/video</span></code>, which allows scaling and defining output windows.</p>
<p>Most DVB cards don’t have their own MPEG decoder, which results in the
omission of the audio and video device as well as the video4linux
device.</p>
<p>These ioctls were also used by V4L2 to control MPEG decoders implemented
in V4L2. The use of these ioctls for that purpose has been made obsolete
and proper V4L2 ioctls or controls have been created to replace that
functionality. Use <a class="reference internal" href="../v4l/video.html#video"><span class="std std-ref">V4L2 ioctls</span></a> for new drivers!</p>
<section id="video-data-types">
<h2><span class="section-number">6.2.3.1.1. </span>Video Data Types<a class="headerlink" href="#video-data-types" title="Link to this heading">¶</a></h2>
<section id="video-format-t">
<h3><span class="section-number">6.2.3.1.1.1. </span>video_format_t<a class="headerlink" href="#video-format-t" title="Link to this heading">¶</a></h3>
<section id="synopsis">
<h4><span class="section-number">6.2.3.1.1.1.1. </span>Synopsis<a class="headerlink" href="#synopsis" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">VIDEO_FORMAT_4_3</span><span class="p">,</span>
<span class="w">    </span><span class="n">VIDEO_FORMAT_16_9</span><span class="p">,</span>
<span class="w">    </span><span class="n">VIDEO_FORMAT_221_1</span>
<span class="p">}</span><span class="w"> </span><span class="n">video_format_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="constants">
<h4><span class="section-number">6.2.3.1.1.1.2. </span>Constants<a class="headerlink" href="#constants" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_FORMAT_4_3</span></code></p></td>
<td><p>Select 4:3 format.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_FORMAT_16_9</span></code></p></td>
<td><p>Select 16:9 format.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_FORMAT_221_1</span></code></p></td>
<td><p>Select 2.21:1 format.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="description">
<h4><span class="section-number">6.2.3.1.1.1.3. </span>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">video_format_t</span></code> data type
is used in the <a class="reference internal" href="#video-set-format">VIDEO_SET_FORMAT</a> function to tell the driver which
aspect ratio the output hardware (e.g. TV) has. It is also used in the
data structures <a class="reference internal" href="#video-status">video_status</a> returned by <a class="reference internal" href="#video-get-status">VIDEO_GET_STATUS</a>
and <a class="reference internal" href="#video-event">video_event</a> returned by <a class="reference internal" href="#video-get-event">VIDEO_GET_EVENT</a> which report
about the display format of the current video stream.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-displayformat-t">
<h3><span class="section-number">6.2.3.1.1.2. </span>video_displayformat_t<a class="headerlink" href="#video-displayformat-t" title="Link to this heading">¶</a></h3>
<section id="id1">
<h4><span class="section-number">6.2.3.1.1.2.1. </span>Synopsis<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">VIDEO_PAN_SCAN</span><span class="p">,</span>
<span class="w">    </span><span class="n">VIDEO_LETTER_BOX</span><span class="p">,</span>
<span class="w">    </span><span class="n">VIDEO_CENTER_CUT_OUT</span>
<span class="p">}</span><span class="w"> </span><span class="n">video_displayformat_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id2">
<h4><span class="section-number">6.2.3.1.1.2.2. </span>Constants<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_PAN_SCAN</span></code></p></td>
<td><p>Use pan and scan format.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_LETTER_BOX</span></code></p></td>
<td><p>Use letterbox format.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CENTER_CUT_OUT</span></code></p></td>
<td><p>Use center cut out format.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id3">
<h4><span class="section-number">6.2.3.1.1.2.3. </span>Description<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h4>
<p>In case the display format of the video stream and of the display
hardware differ the application has to specify how to handle the
cropping of the picture. This can be done using the
<a class="reference internal" href="#video-set-display-format">VIDEO_SET_DISPLAY_FORMAT</a> call which accepts this enum as argument.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-size-t">
<h3><span class="section-number">6.2.3.1.1.3. </span>video_size_t<a class="headerlink" href="#video-size-t" title="Link to this heading">¶</a></h3>
<section id="id4">
<h4><span class="section-number">6.2.3.1.1.3.1. </span>Synopsis<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">w</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">h</span><span class="p">;</span>
<span class="w">    </span><span class="n">video_format_t</span><span class="w"> </span><span class="n">aspect_ratio</span><span class="p">;</span>
<span class="p">}</span><span class="w"> </span><span class="n">video_size_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="variables">
<h4><span class="section-number">6.2.3.1.1.3.2. </span>Variables<a class="headerlink" href="#variables" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">w</span></code></p></td>
<td><p>Video width in pixels.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">h</span></code></p></td>
<td><p>Video height in pixels.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#video-format-t">video_format_t</a> <code class="docutils literal notranslate"><span class="pre">aspect_ratio</span></code></p></td>
<td><p>Aspect ratio.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id5">
<h4><span class="section-number">6.2.3.1.1.3.3. </span>Description<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h4>
<p>Used in the struct <a class="reference internal" href="#video-event">video_event</a>. It stores the resolution and
aspect ratio of the video.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-stream-source-t">
<h3><span class="section-number">6.2.3.1.1.4. </span>video_stream_source_t<a class="headerlink" href="#video-stream-source-t" title="Link to this heading">¶</a></h3>
<section id="id6">
<h4><span class="section-number">6.2.3.1.1.4.1. </span>Synopsis<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">VIDEO_SOURCE_DEMUX</span><span class="p">,</span>
<span class="w">    </span><span class="n">VIDEO_SOURCE_MEMORY</span>
<span class="p">}</span><span class="w"> </span><span class="n">video_stream_source_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id7">
<h4><span class="section-number">6.2.3.1.1.4.2. </span>Constants<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_SOURCE_DEMUX</span></code></p></td>
<td colspan="2"><p> Select the demux as the main source.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_SOURCE_MEMORY</span></code></p></td>
<td colspan="2"><p>If this source is selected, the stream
comes from the user through the write
system call.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id8">
<h4><span class="section-number">6.2.3.1.1.4.3. </span>Description<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h4>
<p>The video stream source is set through the <a class="reference internal" href="#video-select-source">VIDEO_SELECT_SOURCE</a> call
and can take the following values, depending on whether we are replaying
from an internal (demuxer) or external (user write) source.
VIDEO_SOURCE_DEMUX selects the demultiplexer (fed either by the
frontend or the DVR device) as the source of the video stream. If
VIDEO_SOURCE_MEMORY is selected the stream comes from the application
through the <a class="reference internal" href="#write">write()</a> system call.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-play-state-t">
<h3><span class="section-number">6.2.3.1.1.5. </span>video_play_state_t<a class="headerlink" href="#video-play-state-t" title="Link to this heading">¶</a></h3>
<section id="id9">
<h4><span class="section-number">6.2.3.1.1.5.1. </span>Synopsis<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="k">enum</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">VIDEO_STOPPED</span><span class="p">,</span>
<span class="w">    </span><span class="n">VIDEO_PLAYING</span><span class="p">,</span>
<span class="w">    </span><span class="n">VIDEO_FREEZED</span>
<span class="p">}</span><span class="w"> </span><span class="n">video_play_state_t</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id10">
<h4><span class="section-number">6.2.3.1.1.5.2. </span>Constants<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_STOPPED</span></code></p></td>
<td><p>Video is stopped.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_PLAYING</span></code></p></td>
<td><p>Video is currently playing.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_FREEZED</span></code></p></td>
<td><p>Video is frozen.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id11">
<h4><span class="section-number">6.2.3.1.1.5.3. </span>Description<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h4>
<p>This values can be returned by the <a class="reference internal" href="#video-get-status">VIDEO_GET_STATUS</a> call
representing the state of video playback.</p>
</section>
</section>
<hr class="docutils" />
<section id="struct-video-command">
<h3><span class="section-number">6.2.3.1.1.6. </span>struct video_command<a class="headerlink" href="#struct-video-command" title="Link to this heading">¶</a></h3>
<section id="id12">
<h4><span class="section-number">6.2.3.1.1.6.1. </span>Synopsis<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">video_command</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">__u32</span><span class="w"> </span><span class="n">cmd</span><span class="p">;</span>
<span class="w">    </span><span class="n">__u32</span><span class="w"> </span><span class="n">flags</span><span class="p">;</span>
<span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">__u64</span><span class="w"> </span><span class="n">pts</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="n">stop</span><span class="p">;</span>

<span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">__s32</span><span class="w"> </span><span class="n">speed</span><span class="p">;</span>
<span class="w">            </span><span class="n">__u32</span><span class="w"> </span><span class="n">format</span><span class="p">;</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="n">play</span><span class="p">;</span>

<span class="w">        </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">__u32</span><span class="w"> </span><span class="n">data</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span><span class="n">raw</span><span class="p">;</span>
<span class="w">    </span><span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id13">
<h4><span class="section-number">6.2.3.1.1.6.2. </span>Variables<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__u32</span> <span class="pre">cmd</span></code></p></td>
<td colspan="2"><p><a class="reference internal" href="#decoder-command">Decoder command</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__u32</span> <span class="pre">flags</span></code></p></td>
<td colspan="2"><p>Flags for the <a class="reference internal" href="#decoder-command">Decoder command</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">stop</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">__u64</span> <span class="pre">pts</span></code></p></td>
<td><p>MPEG PTS</p></td>
</tr>
<tr class="row-even"><td rowspan="6"><p> <code class="docutils literal notranslate"><span class="pre">stuct</span> <span class="pre">play</span></code></p></td>
<td rowspan="5"><p> <code class="docutils literal notranslate"><span class="pre">__s32</span> <span class="pre">speed</span></code></p></td>
<td><p>0 or 1000 specifies normal speed,</p></td>
</tr>
<tr class="row-odd"><td><p>1:  specifies forward single stepping,</p></td>
</tr>
<tr class="row-even"><td><p>-1: specifies backward single stepping,</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;1: playback at speed / 1000 of the normal speed</p></td>
</tr>
<tr class="row-even"><td><p>&lt;-1: reverse playback at ( -speed / 1000 ) of the normal speed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__u32</span> <span class="pre">format</span></code></p></td>
<td><p><a class="reference internal" href="#play-input-formats">Play input formats</a></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">__u32</span> <span class="pre">data[16]</span></code></p></td>
<td colspan="2"><p>Reserved</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id14">
<h4><span class="section-number">6.2.3.1.1.6.3. </span>Description<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h4>
<p>The structure must be zeroed before use by the application. This ensures
it can be extended safely in the future.</p>
</section>
</section>
<hr class="docutils" />
<section id="predefined-decoder-commands-and-flags">
<h3><span class="section-number">6.2.3.1.1.7. </span>Predefined decoder commands and flags<a class="headerlink" href="#predefined-decoder-commands-and-flags" title="Link to this heading">¶</a></h3>
<section id="id15">
<h4><span class="section-number">6.2.3.1.1.7.1. </span>Synopsis<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define VIDEO_CMD_PLAY                      (0)</span>
<span class="cp">#define VIDEO_CMD_STOP                      (1)</span>
<span class="cp">#define VIDEO_CMD_FREEZE                    (2)</span>
<span class="cp">#define VIDEO_CMD_CONTINUE                  (3)</span>

<span class="cp">#define VIDEO_CMD_FREEZE_TO_BLACK      (1 &lt;&lt; 0)</span>

<span class="cp">#define VIDEO_CMD_STOP_TO_BLACK        (1 &lt;&lt; 0)</span>
<span class="cp">#define VIDEO_CMD_STOP_IMMEDIATELY     (1 &lt;&lt; 1)</span>

<span class="cp">#define VIDEO_PLAY_FMT_NONE                 (0)</span>
<span class="cp">#define VIDEO_PLAY_FMT_GOP                  (1)</span>

<span class="cp">#define VIDEO_VSYNC_FIELD_UNKNOWN           (0)</span>
<span class="cp">#define VIDEO_VSYNC_FIELD_ODD               (1)</span>
<span class="cp">#define VIDEO_VSYNC_FIELD_EVEN              (2)</span>
<span class="cp">#define VIDEO_VSYNC_FIELD_PROGRESSIVE       (3)</span>
</pre></div>
</div>
</section>
<section id="id16">
<h4><span class="section-number">6.2.3.1.1.7.2. </span>Constants<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td rowspan="4"><p> <span class="target" id="decoder-command">Decoder command</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_PLAY</span></code></p></td>
<td><p>Start playback.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_STOP</span></code></p></td>
<td><p>Stop playback.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_FREEZE</span></code></p></td>
<td><p>Freeze playback.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_CONTINUE</span></code></p></td>
<td><p>Continue playback after freeze.</p></td>
</tr>
<tr class="row-odd"><td><p>Flags for <code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_FREEZE</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_FREEZE_TO_BLACK</span></code></p></td>
<td><p>Show black picture on freeze.</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p> Flags for <code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_STOP</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_STOP_TO_BLACK</span></code></p></td>
<td><p>Show black picture on stop.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CMD_STOP_IMMEDIATELY</span></code></p></td>
<td><p>Stop immediately, without emptying buffers.</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p> <span class="target" id="play-input-formats">Play input formats</span></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_PLAY_FMT_NONE</span></code></p></td>
<td><p>The decoder has no special format requirements</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_PLAY_FMT_GOP</span></code></p></td>
<td><p>The decoder requires full GOPs</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p> Field order</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_VSYNC_FIELD_UNKNOWN</span></code></p></td>
<td><p>FIELD_UNKNOWN can be used if the hardware does not know
whether the Vsync is for an odd, even or progressive
(i.e. non-interlaced) field.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_VSYNC_FIELD_ODD</span></code></p></td>
<td><p>Vsync is for an odd field.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_VSYNC_FIELD_EVEN</span></code></p></td>
<td><p>Vsync is for an even field.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_VSYNC_FIELD_PROGRESSIVE</span></code></p></td>
<td><p>progressive (i.e. non-interlaced)</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="video-event">
<h3><span class="section-number">6.2.3.1.1.8. </span>video_event<a class="headerlink" href="#video-event" title="Link to this heading">¶</a></h3>
<section id="id17">
<h4><span class="section-number">6.2.3.1.1.8.1. </span>Synopsis<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">video_event</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">__s32</span><span class="w"> </span><span class="n">type</span><span class="p">;</span>
<span class="cp">#define VIDEO_EVENT_SIZE_CHANGED        1</span>
<span class="cp">#define VIDEO_EVENT_FRAME_RATE_CHANGED  2</span>
<span class="cp">#define VIDEO_EVENT_DECODER_STOPPED     3</span>
<span class="cp">#define VIDEO_EVENT_VSYNC               4</span>
<span class="w">    </span><span class="kt">long</span><span class="w"> </span><span class="n">timestamp</span><span class="p">;</span>
<span class="w">    </span><span class="k">union</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">video_size_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="w">        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">frame_rate</span><span class="p">;</span>
<span class="w">        </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">vsync_field</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="n">u</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id18">
<h4><span class="section-number">6.2.3.1.1.8.2. </span>Variables<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td rowspan="5"><p> <code class="docutils literal notranslate"><span class="pre">__s32</span> <span class="pre">type</span></code></p></td>
<td colspan="2"><p> Event type.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_EVENT_SIZE_CHANGED</span></code></p></td>
<td><p>Size changed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_EVENT_FRAME_RATE_CHANGED</span></code></p></td>
<td><p>Framerate changed.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_EVENT_DECODER_STOPPED</span></code></p></td>
<td><p>Decoder stopped.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_EVENT_VSYNC</span></code></p></td>
<td><p>Vsync occurred.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">timestamp</span></code></p></td>
<td colspan="2"><p> MPEG PTS at occurrence.</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p> <code class="docutils literal notranslate"><span class="pre">union</span> <span class="pre">u</span></code></p></td>
<td><p><a class="reference internal" href="#video-size-t">video_size_t</a> size</p></td>
<td><p>Resolution and aspect ratio of the video.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">frame_rate</span></code></p></td>
<td><p>in frames per 1000sec</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">char</span> <span class="pre">vsync_field</span></code></p></td>
<td><div class="line-block">
<div class="line">unknown / odd / even / progressive</div>
<div class="line">See: <a class="reference internal" href="#predefined-decoder-commands-and-flags">Predefined decoder commands and flags</a></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id19">
<h4><span class="section-number">6.2.3.1.1.8.3. </span>Description<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h4>
<p>This is the structure of a video event as it is returned by the
<a class="reference internal" href="#video-get-event">VIDEO_GET_EVENT</a> call. See there for more details.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-status">
<h3><span class="section-number">6.2.3.1.1.9. </span>video_status<a class="headerlink" href="#video-status" title="Link to this heading">¶</a></h3>
<section id="id20">
<h4><span class="section-number">6.2.3.1.1.9.1. </span>Synopsis<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h4>
<p>The <a class="reference internal" href="#video-get-status">VIDEO_GET_STATUS</a> call returns the following structure informing
about various states of the playback operation.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">video_status</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w">                    </span><span class="n">video_blank</span><span class="p">;</span>
<span class="w">    </span><span class="n">video_play_state_t</span><span class="w">     </span><span class="n">play_state</span><span class="p">;</span>
<span class="w">    </span><span class="n">video_stream_source_t</span><span class="w">  </span><span class="n">stream_source</span><span class="p">;</span>
<span class="w">    </span><span class="n">video_format_t</span><span class="w">         </span><span class="n">video_format</span><span class="p">;</span>
<span class="w">    </span><span class="n">video_displayformat_t</span><span class="w">  </span><span class="n">display_format</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id21">
<h4><span class="section-number">6.2.3.1.1.9.2. </span>Variables<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td rowspan="3"><p> <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">video_blank</span></code></p></td>
<td colspan="2"><p> Show blank video on freeze?</p></td>
</tr>
<tr class="row-even"><td><p>TRUE  ( != 0 )</p></td>
<td><p>Blank screen when freeze.</p></td>
</tr>
<tr class="row-odd"><td><p>FALSE ( == 0 )</p></td>
<td><p>Show last decoded frame.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#video-play-state-t">video_play_state_t</a> <code class="docutils literal notranslate"><span class="pre">play_state</span></code></p></td>
<td colspan="2"><p>Current state of playback.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#video-stream-source-t">video_stream_source_t</a> <code class="docutils literal notranslate"><span class="pre">stream_source</span></code></p></td>
<td colspan="2"><p>Current source (demux/memory).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#video-format-t">video_format_t</a> <code class="docutils literal notranslate"><span class="pre">video_format</span></code></p></td>
<td colspan="2"><p>Current aspect ratio of stream.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#video-displayformat-t">video_displayformat_t</a> <code class="docutils literal notranslate"><span class="pre">display_format</span></code></p></td>
<td colspan="2"><p>Applied cropping mode.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id22">
<h4><span class="section-number">6.2.3.1.1.9.3. </span>Description<a class="headerlink" href="#id22" title="Link to this heading">¶</a></h4>
<p>If <code class="docutils literal notranslate"><span class="pre">video_blank</span></code> is set <code class="docutils literal notranslate"><span class="pre">TRUE</span></code> video will be blanked out if the
channel is changed or if playback is stopped. Otherwise, the last picture
will be displayed. <code class="docutils literal notranslate"><span class="pre">play_state</span></code> indicates if the video is currently
frozen, stopped, or being played back. The <code class="docutils literal notranslate"><span class="pre">stream_source</span></code> corresponds
to the selected source for the video stream. It can come either from the
demultiplexer or from memory. The <code class="docutils literal notranslate"><span class="pre">video_format</span></code> indicates the aspect
ratio (one of 4:3 or 16:9) of the currently played video stream.
Finally, <code class="docutils literal notranslate"><span class="pre">display_format</span></code> corresponds to the applied cropping mode in
case the source video format is not the same as the format of the output
device.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-still-picture">
<h3><span class="section-number">6.2.3.1.1.10. </span>video_still_picture<a class="headerlink" href="#video-still-picture" title="Link to this heading">¶</a></h3>
<section id="id23">
<h4><span class="section-number">6.2.3.1.1.10.1. </span>Synopsis<a class="headerlink" href="#id23" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">video_still_picture</span><span class="w"> </span><span class="p">{</span>
<span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">iFrame</span><span class="p">;</span>
<span class="kt">int32_t</span><span class="w"> </span><span class="n">size</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id24">
<h4><span class="section-number">6.2.3.1.1.10.2. </span>Variables<a class="headerlink" href="#id24" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">char</span> <span class="pre">*iFrame</span></code></p></td>
<td><p>Pointer to a single iframe in memory.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int32_t</span> <span class="pre">size</span></code></p></td>
<td><p>Size of the iframe.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id25">
<h4><span class="section-number">6.2.3.1.1.10.3. </span>Description<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h4>
<p>An I-frame displayed via the <a class="reference internal" href="#video-stillpicture">VIDEO_STILLPICTURE</a> call is passed on
within this structure.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-capabilities">
<h3><span class="section-number">6.2.3.1.1.11. </span>video capabilities<a class="headerlink" href="#video-capabilities" title="Link to this heading">¶</a></h3>
<section id="id26">
<h4><span class="section-number">6.2.3.1.1.11.1. </span>Synopsis<a class="headerlink" href="#id26" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#define VIDEO_CAP_MPEG1   1</span>
<span class="cp">#define VIDEO_CAP_MPEG2   2</span>
<span class="cp">#define VIDEO_CAP_SYS     4</span>
<span class="cp">#define VIDEO_CAP_PROG    8</span>
</pre></div>
</div>
</section>
<section id="id27">
<h4><span class="section-number">6.2.3.1.1.11.2. </span>Constants<a class="headerlink" href="#id27" title="Link to this heading">¶</a></h4>
<p>Bit definitions for capabilities:</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CAP_MPEG1</span></code></p></td>
<td colspan="2"><p> The hardware can decode MPEG1.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CAP_MPEG2</span></code></p></td>
<td colspan="2"><p>The hardware can decode MPEG2.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CAP_SYS</span></code></p></td>
<td colspan="2"><p>The video device accepts system stream.</p>
<p>You still have to open the video and the audio device
but only send the stream to the video device.</p>
</td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">VIDEO_CAP_PROG</span></code></p></td>
<td colspan="2"><p>The video device accepts program stream.</p>
<p>You still have to open the video and the audio device
but only send the stream to the video device.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id28">
<h4><span class="section-number">6.2.3.1.1.11.3. </span>Description<a class="headerlink" href="#id28" title="Link to this heading">¶</a></h4>
<p>A call to <a class="reference internal" href="#video-get-capabilities">VIDEO_GET_CAPABILITIES</a> returns an unsigned integer with the
following bits set according to the hardware’s capabilities.</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="video-function-calls">
<h2><span class="section-number">6.2.3.1.2. </span>Video Function Calls<a class="headerlink" href="#video-function-calls" title="Link to this heading">¶</a></h2>
<section id="video-stop">
<h3><span class="section-number">6.2.3.1.2.1. </span>VIDEO_STOP<a class="headerlink" href="#video-stop" title="Link to this heading">¶</a></h3>
<section id="id29">
<h4><span class="section-number">6.2.3.1.2.1.1. </span>Synopsis<a class="headerlink" href="#id29" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_STOP">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_STOP</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_STOP" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_STOP</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="arguments">
<h4><span class="section-number">6.2.3.1.2.1.2. </span>Arguments<a class="headerlink" href="#arguments" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p> Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_STOP</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p> <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mode</span></code></p></td>
<td colspan="2"><p> Indicates how the screen shall be handled.</p></td>
</tr>
<tr class="row-even"><td><p>TRUE  ( != 0 )</p></td>
<td><p>Blank screen when stop.</p></td>
</tr>
<tr class="row-odd"><td><p>FALSE ( == 0 )</p></td>
<td><p>Show last decoded frame.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id30">
<h4><span class="section-number">6.2.3.1.2.1.3. </span>Description<a class="headerlink" href="#id30" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl is for Digital TV devices only. To control a V4L2 decoder use
the V4L2 <a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">ioctl VIDIOC_DECODER_CMD, VIDIOC_TRY_DECODER_CMD</span></a> instead.</p>
<p>This ioctl call asks the Video Device to stop playing the current
stream. Depending on the input parameter, the screen can be blanked out
or displaying the last decoded frame.</p>
</section>
<section id="return-value">
<h4><span class="section-number">6.2.3.1.2.1.4. </span>Return Value<a class="headerlink" href="#return-value" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-play">
<h3><span class="section-number">6.2.3.1.2.2. </span>VIDEO_PLAY<a class="headerlink" href="#video-play" title="Link to this heading">¶</a></h3>
<section id="id31">
<h4><span class="section-number">6.2.3.1.2.2.1. </span>Synopsis<a class="headerlink" href="#id31" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_PLAY">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_PLAY</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_PLAY" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_PLAY</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id32">
<h4><span class="section-number">6.2.3.1.2.2.2. </span>Arguments<a class="headerlink" href="#id32" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_PLAY</span></code> for this command.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id33">
<h4><span class="section-number">6.2.3.1.2.2.3. </span>Description<a class="headerlink" href="#id33" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl is for Digital TV devices only. To control a V4L2 decoder use
the V4L2 <a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">ioctl VIDIOC_DECODER_CMD, VIDIOC_TRY_DECODER_CMD</span></a> instead.</p>
<p>This ioctl call asks the Video Device to start playing a video stream
from the selected source.</p>
</section>
<section id="id34">
<h4><span class="section-number">6.2.3.1.2.2.4. </span>Return Value<a class="headerlink" href="#id34" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-freeze">
<h3><span class="section-number">6.2.3.1.2.3. </span>VIDEO_FREEZE<a class="headerlink" href="#video-freeze" title="Link to this heading">¶</a></h3>
<section id="id35">
<h4><span class="section-number">6.2.3.1.2.3.1. </span>Synopsis<a class="headerlink" href="#id35" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_FREEZE">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_FREEZE</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_FREEZE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_FREEZE</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id36">
<h4><span class="section-number">6.2.3.1.2.3.2. </span>Arguments<a class="headerlink" href="#id36" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_FREEZE</span></code> for this command.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id37">
<h4><span class="section-number">6.2.3.1.2.3.3. </span>Description<a class="headerlink" href="#id37" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl is for Digital TV devices only. To control a V4L2 decoder use
the V4L2 <a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">ioctl VIDIOC_DECODER_CMD, VIDIOC_TRY_DECODER_CMD</span></a> instead.</p>
<p>This ioctl call suspends the live video stream being played, if
VIDEO_SOURCE_DEMUX is selected. Decoding and playing are frozen.
It is then possible to restart the decoding and playing process of the
video stream using the <a class="reference internal" href="#video-continue">VIDEO_CONTINUE</a> command.
If VIDEO_SOURCE_MEMORY is selected in the ioctl call
<a class="reference internal" href="#video-select-source">VIDEO_SELECT_SOURCE</a>, the Digital TV subsystem will not decode any more
data until the ioctl call <a class="reference internal" href="#video-continue">VIDEO_CONTINUE</a> or <a class="reference internal" href="#video-play">VIDEO_PLAY</a> is performed.</p>
</section>
<section id="id38">
<h4><span class="section-number">6.2.3.1.2.3.4. </span>Return Value<a class="headerlink" href="#id38" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-continue">
<h3><span class="section-number">6.2.3.1.2.4. </span>VIDEO_CONTINUE<a class="headerlink" href="#video-continue" title="Link to this heading">¶</a></h3>
<section id="id39">
<h4><span class="section-number">6.2.3.1.2.4.1. </span>Synopsis<a class="headerlink" href="#id39" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_CONTINUE">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_CONTINUE</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_CONTINUE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_CONTINUE</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id40">
<h4><span class="section-number">6.2.3.1.2.4.2. </span>Arguments<a class="headerlink" href="#id40" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_CONTINUE</span></code> for this command.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id41">
<h4><span class="section-number">6.2.3.1.2.4.3. </span>Description<a class="headerlink" href="#id41" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl is for Digital TV devices only. To control a V4L2 decoder use
the V4L2 <a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">ioctl VIDIOC_DECODER_CMD, VIDIOC_TRY_DECODER_CMD</span></a> instead.</p>
<p>This ioctl call restarts decoding and playing processes of the video
stream which was played before a call to <a class="reference internal" href="#video-freeze">VIDEO_FREEZE</a> was made.</p>
</section>
<section id="id42">
<h4><span class="section-number">6.2.3.1.2.4.4. </span>Return Value<a class="headerlink" href="#id42" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-select-source">
<h3><span class="section-number">6.2.3.1.2.5. </span>VIDEO_SELECT_SOURCE<a class="headerlink" href="#video-select-source" title="Link to this heading">¶</a></h3>
<section id="id43">
<h4><span class="section-number">6.2.3.1.2.5.1. </span>Synopsis<a class="headerlink" href="#id43" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_SELECT_SOURCE">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_SELECT_SOURCE</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_SELECT_SOURCE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_SELECT_SOURCE</span><span class="p">,</span><span class="w"> </span><span class="n">video_stream_source_t</span><span class="w"> </span><span class="n">source</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id44">
<h4><span class="section-number">6.2.3.1.2.5.2. </span>Arguments<a class="headerlink" href="#id44" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_SELECT_SOURCE</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#video-stream-source-t">video_stream_source_t</a> <code class="docutils literal notranslate"><span class="pre">source</span></code></p></td>
<td colspan="2"><p>Indicates which source shall be used for the Video stream.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id45">
<h4><span class="section-number">6.2.3.1.2.5.3. </span>Description<a class="headerlink" href="#id45" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl is for Digital TV devices only. This ioctl was also supported
by the V4L2 ivtv driver, but that has been replaced by the ivtv-specific
<code class="docutils literal notranslate"><span class="pre">IVTV_IOC_PASSTHROUGH_MODE</span></code> ioctl.</p>
<p>This ioctl call informs the video device which source shall be used for
the input data. The possible sources are demux or memory. If memory is
selected, the data is fed to the video device through the write command
using the struct <a class="reference internal" href="#video-stream-source-t">video_stream_source_t</a>. If demux is selected, the data
is directly transferred from the onboard demux-device to the decoder.</p>
<p>The data fed to the decoder is also controlled by the PID-filter.
Output selection: <a class="reference internal" href="dmx_types.html#c.dmx_output" title="dmx_output"><code class="xref c c-type docutils literal notranslate"><span class="pre">dmx_output</span></code></a> <code class="docutils literal notranslate"><span class="pre">DMX_OUT_DECODER</span></code>.</p>
</section>
<section id="id46">
<h4><span class="section-number">6.2.3.1.2.5.4. </span>Return Value<a class="headerlink" href="#id46" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-set-blank">
<h3><span class="section-number">6.2.3.1.2.6. </span>VIDEO_SET_BLANK<a class="headerlink" href="#video-set-blank" title="Link to this heading">¶</a></h3>
<section id="id47">
<h4><span class="section-number">6.2.3.1.2.6.1. </span>Synopsis<a class="headerlink" href="#id47" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_SET_BLANK">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_SET_BLANK</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_SET_BLANK" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_SET_BLANK</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">mode</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id48">
<h4><span class="section-number">6.2.3.1.2.6.2. </span>Arguments<a class="headerlink" href="#id48" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p> Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_SET_BLANK</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p> <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">mode</span></code></p></td>
<td colspan="2"><p> Indicates if the screen shall be blanked.</p></td>
</tr>
<tr class="row-even"><td><p>TRUE  ( != 0 )</p></td>
<td><p>Blank screen when stop.</p></td>
</tr>
<tr class="row-odd"><td><p>FALSE ( == 0 )</p></td>
<td><p>Show last decoded frame.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id49">
<h4><span class="section-number">6.2.3.1.2.6.3. </span>Description<a class="headerlink" href="#id49" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call asks the Video Device to blank out the picture.</p>
</section>
<section id="id50">
<h4><span class="section-number">6.2.3.1.2.6.4. </span>Return Value<a class="headerlink" href="#id50" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-get-status">
<h3><span class="section-number">6.2.3.1.2.7. </span>VIDEO_GET_STATUS<a class="headerlink" href="#video-get-status" title="Link to this heading">¶</a></h3>
<section id="id51">
<h4><span class="section-number">6.2.3.1.2.7.1. </span>Synopsis<a class="headerlink" href="#id51" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_GET_STATUS">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_GET_STATUS</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_GET_STATUS" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_GET_STATUS</span><span class="p">,</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">video_status</span><span class="w"> </span><span class="o">*</span><span class="n">status</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id52">
<h4><span class="section-number">6.2.3.1.2.7.2. </span>Arguments<a class="headerlink" href="#id52" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_GET_STATUS</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">struct</span></code> <a class="reference internal" href="#video-status">video_status</a> <code class="docutils literal notranslate"><span class="pre">*status</span></code></p></td>
<td colspan="2"><p>Returns the current status of the Video Device.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id53">
<h4><span class="section-number">6.2.3.1.2.7.3. </span>Description<a class="headerlink" href="#id53" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call asks the Video Device to return the current status of
the device.</p>
</section>
<section id="id54">
<h4><span class="section-number">6.2.3.1.2.7.4. </span>Return Value<a class="headerlink" href="#id54" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-get-event">
<h3><span class="section-number">6.2.3.1.2.8. </span>VIDEO_GET_EVENT<a class="headerlink" href="#video-get-event" title="Link to this heading">¶</a></h3>
<section id="id55">
<h4><span class="section-number">6.2.3.1.2.8.1. </span>Synopsis<a class="headerlink" href="#id55" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_GET_EVENT">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_GET_EVENT</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_GET_EVENT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_GET_EVENT</span><span class="p">,</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">video_event</span><span class="w"> </span><span class="o">*</span><span class="n">ev</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id56">
<h4><span class="section-number">6.2.3.1.2.8.2. </span>Arguments<a class="headerlink" href="#id56" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_GET_EVENT</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">struct</span></code> <a class="reference internal" href="#video-event">video_event</a> <code class="docutils literal notranslate"><span class="pre">*ev</span></code></p></td>
<td colspan="2"><p>Points to the location where the event, if any, is to be stored.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id57">
<h4><span class="section-number">6.2.3.1.2.8.3. </span>Description<a class="headerlink" href="#id57" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl is for DVB devices only. To get events from a V4L2 decoder
use the V4L2 <a class="reference internal" href="../v4l/vidioc-dqevent.html#vidioc-dqevent"><span class="std std-ref">ioctl VIDIOC_DQEVENT</span></a> ioctl instead.</p>
<p>This ioctl call returns an event of type <a class="reference internal" href="#video-event">video_event</a> if available. A
certain number of the latest events will be cued and returned in order of
occurrence. Older events may be discarded if not fetched in time. If
an event is not available, the behavior depends on whether the device is
in blocking or non-blocking mode. In the latter case, the call fails
immediately with errno set to <code class="docutils literal notranslate"><span class="pre">EWOULDBLOCK</span></code>. In the former case, the
call blocks until an event becomes available. The standard Linux poll()
and/or select() system calls can be used with the device file descriptor
to watch for new events. For select(), the file descriptor should be
included in the exceptfds argument, and for poll(), POLLPRI should be
specified as the wake-up condition. Read-only permissions are sufficient
for this ioctl call.</p>
</section>
<section id="id58">
<h4><span class="section-number">6.2.3.1.2.8.4. </span>Return Value<a class="headerlink" href="#id58" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EWOULDBLOCK</span></code></p></td>
<td colspan="2"><p> There is no event pending, and the device is in
non-blocking mode.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EOVERFLOW</span></code></p></td>
<td colspan="2"><p>Overflow in event queue - one or more events were lost.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="video-set-display-format">
<h3><span class="section-number">6.2.3.1.2.9. </span>VIDEO_SET_DISPLAY_FORMAT<a class="headerlink" href="#video-set-display-format" title="Link to this heading">¶</a></h3>
<section id="id59">
<h4><span class="section-number">6.2.3.1.2.9.1. </span>Synopsis<a class="headerlink" href="#id59" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_SET_DISPLAY_FORMAT">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_SET_DISPLAY_FORMAT</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_SET_DISPLAY_FORMAT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_SET_DISPLAY_FORMAT</span><span class="p">,</span>
<span class="n">video_display_format_t</span><span class="w"> </span><span class="n">format</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id60">
<h4><span class="section-number">6.2.3.1.2.9.2. </span>Arguments<a class="headerlink" href="#id60" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_SET_DISPLAY_FORMAT</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#video-displayformat-t">video_displayformat_t</a> <code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td colspan="2"><p>Selects the video format to be used.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id61">
<h4><span class="section-number">6.2.3.1.2.9.3. </span>Description<a class="headerlink" href="#id61" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call asks the Video Device to select the video format to be
applied by the MPEG chip on the video.</p>
</section>
<section id="id62">
<h4><span class="section-number">6.2.3.1.2.9.4. </span>Return Value<a class="headerlink" href="#id62" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-stillpicture">
<h3><span class="section-number">6.2.3.1.2.10. </span>VIDEO_STILLPICTURE<a class="headerlink" href="#video-stillpicture" title="Link to this heading">¶</a></h3>
<section id="id63">
<h4><span class="section-number">6.2.3.1.2.10.1. </span>Synopsis<a class="headerlink" href="#id63" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_STILLPICTURE">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_STILLPICTURE</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_STILLPICTURE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_STILLPICTURE</span><span class="p">,</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">video_still_picture</span><span class="w"> </span><span class="o">*</span><span class="n">sp</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id64">
<h4><span class="section-number">6.2.3.1.2.10.2. </span>Arguments<a class="headerlink" href="#id64" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_STILLPICTURE</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">struct</span></code> <a class="reference internal" href="#video-still-picture">video_still_picture</a> <code class="docutils literal notranslate"><span class="pre">*sp</span></code></p></td>
<td colspan="2"><p>Pointer to the location where the struct with the I-frame
and size is stored.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id65">
<h4><span class="section-number">6.2.3.1.2.10.3. </span>Description<a class="headerlink" href="#id65" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call asks the Video Device to display a still picture
(I-frame). The input data shall be the section of an elementary video
stream containing an I-frame. Typically this section is extracted from a
TS or PES recording. Resolution and codec (see <a class="reference internal" href="#video-capabilities">video capabilities</a>) must
be supported by the device. If the pointer is NULL, then the current
displayed still picture is blanked.</p>
<p>e.g. The AV7110 supports MPEG1 and MPEG2 with the common PAL-SD
resolutions.</p>
</section>
<section id="id66">
<h4><span class="section-number">6.2.3.1.2.10.4. </span>Return Value<a class="headerlink" href="#id66" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-fast-forward">
<h3><span class="section-number">6.2.3.1.2.11. </span>VIDEO_FAST_FORWARD<a class="headerlink" href="#video-fast-forward" title="Link to this heading">¶</a></h3>
<section id="id67">
<h4><span class="section-number">6.2.3.1.2.11.1. </span>Synopsis<a class="headerlink" href="#id67" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_FAST_FORWARD">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_FAST_FORWARD</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_FAST_FORWARD" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_FAST_FORWARD</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nFrames</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id68">
<h4><span class="section-number">6.2.3.1.2.11.2. </span>Arguments<a class="headerlink" href="#id68" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_FAST_FORWARD</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">nFrames</span></code></p></td>
<td colspan="2"><p>The number of frames to skip.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id69">
<h4><span class="section-number">6.2.3.1.2.11.3. </span>Description<a class="headerlink" href="#id69" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call asks the Video Device to skip decoding of N number of
I-frames. This call can only be used if <code class="docutils literal notranslate"><span class="pre">VIDEO_SOURCE_MEMORY</span></code> is
selected.</p>
</section>
<section id="id70">
<h4><span class="section-number">6.2.3.1.2.11.4. </span>Return Value<a class="headerlink" href="#id70" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EPERM</span></code></p></td>
<td><p>Mode <code class="docutils literal notranslate"><span class="pre">VIDEO_SOURCE_MEMORY</span></code> not selected.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="video-slowmotion">
<h3><span class="section-number">6.2.3.1.2.12. </span>VIDEO_SLOWMOTION<a class="headerlink" href="#video-slowmotion" title="Link to this heading">¶</a></h3>
<section id="id71">
<h4><span class="section-number">6.2.3.1.2.12.1. </span>Synopsis<a class="headerlink" href="#id71" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_SLOWMOTION">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_SLOWMOTION</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_SLOWMOTION" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_SLOWMOTION</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">nFrames</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id72">
<h4><span class="section-number">6.2.3.1.2.12.2. </span>Arguments<a class="headerlink" href="#id72" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_SLOWMOTION</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">nFrames</span></code></p></td>
<td colspan="2"><p>The number of times to repeat each frame.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id73">
<h4><span class="section-number">6.2.3.1.2.12.3. </span>Description<a class="headerlink" href="#id73" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call asks the video device to repeat decoding frames N number
of times. This call can only be used if <code class="docutils literal notranslate"><span class="pre">VIDEO_SOURCE_MEMORY</span></code> is
selected.</p>
</section>
<section id="id74">
<h4><span class="section-number">6.2.3.1.2.12.4. </span>Return Value<a class="headerlink" href="#id74" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EPERM</span></code></p></td>
<td><p>Mode <code class="docutils literal notranslate"><span class="pre">VIDEO_SOURCE_MEMORY</span></code> not selected.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="video-get-capabilities">
<h3><span class="section-number">6.2.3.1.2.13. </span>VIDEO_GET_CAPABILITIES<a class="headerlink" href="#video-get-capabilities" title="Link to this heading">¶</a></h3>
<section id="id75">
<h4><span class="section-number">6.2.3.1.2.13.1. </span>Synopsis<a class="headerlink" href="#id75" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_GET_CAPABILITIES">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_GET_CAPABILITIES</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_GET_CAPABILITIES" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_GET_CAPABILITIES</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">*</span><span class="n">cap</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id76">
<h4><span class="section-number">6.2.3.1.2.13.2. </span>Arguments<a class="headerlink" href="#id76" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_GET_CAPABILITIES</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">*cap</span></code></p></td>
<td colspan="2"><p>Pointer to a location where to store the capability information.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id77">
<h4><span class="section-number">6.2.3.1.2.13.3. </span>Description<a class="headerlink" href="#id77" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call asks the video device about its decoding capabilities.
On success it returns an integer which has bits set according to the
defines in <a class="reference internal" href="#video-capabilities">video capabilities</a>.</p>
</section>
<section id="id78">
<h4><span class="section-number">6.2.3.1.2.13.4. </span>Return Value<a class="headerlink" href="#id78" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-clear-buffer">
<h3><span class="section-number">6.2.3.1.2.14. </span>VIDEO_CLEAR_BUFFER<a class="headerlink" href="#video-clear-buffer" title="Link to this heading">¶</a></h3>
<section id="id79">
<h4><span class="section-number">6.2.3.1.2.14.1. </span>Synopsis<a class="headerlink" href="#id79" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_CLEAR_BUFFER">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_CLEAR_BUFFER</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_CLEAR_BUFFER" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_CLEAR_BUFFER</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id80">
<h4><span class="section-number">6.2.3.1.2.14.2. </span>Arguments<a class="headerlink" href="#id80" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_CLEAR_BUFFER</span></code> for this command.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id81">
<h4><span class="section-number">6.2.3.1.2.14.3. </span>Description<a class="headerlink" href="#id81" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl call clears all video buffers in the driver and in the
decoder hardware.</p>
</section>
<section id="id82">
<h4><span class="section-number">6.2.3.1.2.14.4. </span>Return Value<a class="headerlink" href="#id82" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-set-streamtype">
<h3><span class="section-number">6.2.3.1.2.15. </span>VIDEO_SET_STREAMTYPE<a class="headerlink" href="#video-set-streamtype" title="Link to this heading">¶</a></h3>
<section id="id83">
<h4><span class="section-number">6.2.3.1.2.15.1. </span>Synopsis<a class="headerlink" href="#id83" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_SET_STREAMTYPE">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_SET_STREAMTYPE</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_SET_STREAMTYPE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_SET_STREAMTYPE</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">type</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id84">
<h4><span class="section-number">6.2.3.1.2.15.2. </span>Arguments<a class="headerlink" href="#id84" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_SET_STREAMTYPE</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">type</span></code></p></td>
<td colspan="2"><p>Stream type.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id85">
<h4><span class="section-number">6.2.3.1.2.15.3. </span>Description<a class="headerlink" href="#id85" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl tells the driver which kind of stream to expect being written
to it.
Intelligent decoder might also not support or ignore (like the AV7110)
this call and determine the stream type themselves.</p>
<p>Currently used stream types:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Codec</p></th>
<th class="head"><p>Stream type</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>MPEG2</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>MPEG4 h.264</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>VC1</p></td>
<td><p>3</p></td>
</tr>
<tr class="row-odd"><td><p>MPEG4 Part2</p></td>
<td><p>4</p></td>
</tr>
<tr class="row-even"><td><p>VC1 SM</p></td>
<td><p>5</p></td>
</tr>
<tr class="row-odd"><td><p>MPEG1</p></td>
<td><p>6</p></td>
</tr>
<tr class="row-even"><td><p>HEVC h.265</p></td>
<td><div class="line-block">
<div class="line">7</div>
<div class="line">DREAMBOX: 22</div>
</div>
</td>
</tr>
<tr class="row-odd"><td><p>AVS</p></td>
<td><p>16</p></td>
</tr>
<tr class="row-even"><td><p>AVS2</p></td>
<td><p>40</p></td>
</tr>
</tbody>
</table>
<p>Not every decoder supports all stream types.</p>
</section>
<section id="id86">
<h4><span class="section-number">6.2.3.1.2.15.4. </span>Return Value<a class="headerlink" href="#id86" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-set-format">
<h3><span class="section-number">6.2.3.1.2.16. </span>VIDEO_SET_FORMAT<a class="headerlink" href="#video-set-format" title="Link to this heading">¶</a></h3>
<section id="id87">
<h4><span class="section-number">6.2.3.1.2.16.1. </span>Synopsis<a class="headerlink" href="#id87" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_SET_FORMAT">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_SET_FORMAT</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_SET_FORMAT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_SET_FORMAT</span><span class="p">,</span><span class="w"> </span><span class="n">video_format_t</span><span class="w"> </span><span class="n">format</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id88">
<h4><span class="section-number">6.2.3.1.2.16.2. </span>Arguments<a class="headerlink" href="#id88" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_SET_FORMAT</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#video-format-t">video_format_t</a> <code class="docutils literal notranslate"><span class="pre">format</span></code></p></td>
<td colspan="2"><p>Video format of TV as defined in section <a class="reference internal" href="#video-format-t">video_format_t</a>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id89">
<h4><span class="section-number">6.2.3.1.2.16.3. </span>Description<a class="headerlink" href="#id89" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl sets the screen format (aspect ratio) of the connected output
device (TV) so that the output of the decoder can be adjusted
accordingly.</p>
</section>
<section id="id90">
<h4><span class="section-number">6.2.3.1.2.16.4. </span>Return Value<a class="headerlink" href="#id90" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-get-size">
<h3><span class="section-number">6.2.3.1.2.17. </span>VIDEO_GET_SIZE<a class="headerlink" href="#video-get-size" title="Link to this heading">¶</a></h3>
<section id="id91">
<h4><span class="section-number">6.2.3.1.2.17.1. </span>Synopsis<a class="headerlink" href="#id91" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_GET_SIZE">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_GET_SIZE</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_GET_SIZE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_GET_SIZE</span><span class="p">,</span><span class="w"> </span><span class="n">video_size_t</span><span class="w"> </span><span class="o">*</span><span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id92">
<h4><span class="section-number">6.2.3.1.2.17.2. </span>Arguments<a class="headerlink" href="#id92" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call,
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_GET_SIZE</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#video-size-t">video_size_t</a> <code class="docutils literal notranslate"><span class="pre">*size</span></code></p></td>
<td colspan="2"><p>Returns the size and aspect ratio.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id93">
<h4><span class="section-number">6.2.3.1.2.17.3. </span>Description<a class="headerlink" href="#id93" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>This ioctl returns the size and aspect ratio.</p>
</section>
<section id="id94">
<h4><span class="section-number">6.2.3.1.2.17.4. </span>Return Value<a class="headerlink" href="#id94" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-get-pts">
<h3><span class="section-number">6.2.3.1.2.18. </span>VIDEO_GET_PTS<a class="headerlink" href="#video-get-pts" title="Link to this heading">¶</a></h3>
<section id="id95">
<h4><span class="section-number">6.2.3.1.2.18.1. </span>Synopsis<a class="headerlink" href="#id95" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_GET_PTS">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_GET_PTS</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_GET_PTS" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_GET_PTS</span><span class="p">,</span><span class="w"> </span><span class="n">__u64</span><span class="w"> </span><span class="o">*</span><span class="n">pts</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id96">
<h4><span class="section-number">6.2.3.1.2.18.2. </span>Arguments<a class="headerlink" href="#id96" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_GET_PTS</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__u64</span> <span class="pre">*pts</span></code></p></td>
<td colspan="2"><p>Returns the 33-bit timestamp as defined in ITU T-REC-H.222.0 /
ISO/IEC 13818-1.</p>
<p>The PTS should belong to the currently played frame if possible,
but may also be a value close to it like the PTS of the last
decoded frame or the last PTS extracted by the PES parser.</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id97">
<h4><span class="section-number">6.2.3.1.2.18.3. </span>Description<a class="headerlink" href="#id97" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>For V4L2 decoders this ioctl has been replaced by the
<code class="docutils literal notranslate"><span class="pre">V4L2_CID_MPEG_VIDEO_DEC_PTS</span></code> control.</p>
<p>This ioctl call asks the Video Device to return the current PTS
timestamp.</p>
</section>
<section id="id98">
<h4><span class="section-number">6.2.3.1.2.18.4. </span>Return Value<a class="headerlink" href="#id98" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-get-frame-count">
<h3><span class="section-number">6.2.3.1.2.19. </span>VIDEO_GET_FRAME_COUNT<a class="headerlink" href="#video-get-frame-count" title="Link to this heading">¶</a></h3>
<section id="id99">
<h4><span class="section-number">6.2.3.1.2.19.1. </span>Synopsis<a class="headerlink" href="#id99" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_GET_FRAME_COUNT">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_GET_FRAME_COUNT</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_GET_FRAME_COUNT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="n">VIDEO_GET_FRAME_COUNT</span><span class="p">,</span><span class="w"> </span><span class="n">__u64</span><span class="w"> </span><span class="o">*</span><span class="n">pts</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id100">
<h4><span class="section-number">6.2.3.1.2.19.2. </span>Arguments<a class="headerlink" href="#id100" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_GET_FRAME_COUNT</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">__u64</span> <span class="pre">*pts</span></code></p></td>
<td colspan="2"><p>Returns the number of frames displayed since the decoder was
started.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id101">
<h4><span class="section-number">6.2.3.1.2.19.3. </span>Description<a class="headerlink" href="#id101" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>For V4L2 decoders this ioctl has been replaced by the
<code class="docutils literal notranslate"><span class="pre">V4L2_CID_MPEG_VIDEO_DEC_FRAME</span></code> control.</p>
<p>This ioctl call asks the Video Device to return the number of displayed
frames since the decoder was started.</p>
</section>
<section id="id102">
<h4><span class="section-number">6.2.3.1.2.19.4. </span>Return Value<a class="headerlink" href="#id102" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-command">
<h3><span class="section-number">6.2.3.1.2.20. </span>VIDEO_COMMAND<a class="headerlink" href="#video-command" title="Link to this heading">¶</a></h3>
<section id="id103">
<h4><span class="section-number">6.2.3.1.2.20.1. </span>Synopsis<a class="headerlink" href="#id103" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_COMMAND">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_COMMAND</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_COMMAND" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_COMMAND</span><span class="p">,</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">video_command</span><span class="w"> </span><span class="o">*</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id104">
<h4><span class="section-number">6.2.3.1.2.20.2. </span>Arguments<a class="headerlink" href="#id104" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_COMMAND</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#struct-video-command">struct video_command</a> <code class="docutils literal notranslate"><span class="pre">*cmd</span></code></p></td>
<td colspan="2"><p>Commands the decoder.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id105">
<h4><span class="section-number">6.2.3.1.2.20.3. </span>Description<a class="headerlink" href="#id105" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>For V4L2 decoders this ioctl has been replaced by the
<a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">ioctl VIDIOC_DECODER_CMD, VIDIOC_TRY_DECODER_CMD</span></a> ioctl.</p>
<p>This ioctl commands the decoder. The <a class="reference internal" href="#struct-video-command">struct video_command</a> is a
subset of the <code class="docutils literal notranslate"><span class="pre">v4l2_decoder_cmd</span></code> struct, so refer to the
<a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">ioctl VIDIOC_DECODER_CMD, VIDIOC_TRY_DECODER_CMD</span></a> documentation for
more information.</p>
</section>
<section id="id106">
<h4><span class="section-number">6.2.3.1.2.20.4. </span>Return Value<a class="headerlink" href="#id106" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="video-try-command">
<h3><span class="section-number">6.2.3.1.2.21. </span>VIDEO_TRY_COMMAND<a class="headerlink" href="#video-try-command" title="Link to this heading">¶</a></h3>
<section id="id107">
<h4><span class="section-number">6.2.3.1.2.21.1. </span>Synopsis<a class="headerlink" href="#id107" title="Link to this heading">¶</a></h4>
<dl class="c macro">
<dt class="sig sig-object c" id="c.dtv.legacy.video.VIDEO_TRY_COMMAND">
<span class="sig-name descname"><span class="n"><span class="pre">VIDEO_TRY_COMMAND</span></span></span><a class="headerlink" href="#c.dtv.legacy.video.VIDEO_TRY_COMMAND" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">ioctl</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">fd</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">VIDEO_TRY_COMMAND</span><span class="p">,</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">video_command</span><span class="w"> </span><span class="o">*</span><span class="n">cmd</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="id108">
<h4><span class="section-number">6.2.3.1.2.21.2. </span>Arguments<a class="headerlink" href="#id108" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">request</span></code></p></td>
<td colspan="2"><p>Equals <code class="docutils literal notranslate"><span class="pre">VIDEO_TRY_COMMAND</span></code> for this command.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#struct-video-command">struct video_command</a> <code class="docutils literal notranslate"><span class="pre">*cmd</span></code></p></td>
<td colspan="2"><p>Try a decoder command.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id109">
<h4><span class="section-number">6.2.3.1.2.21.3. </span>Description<a class="headerlink" href="#id109" title="Link to this heading">¶</a></h4>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>Do <strong>not</strong> use in new drivers!
See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-notes"><span class="std std-ref">General Notes</span></a></p>
</div>
<p>For V4L2 decoders this ioctl has been replaced by the
<a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">VIDIOC_TRY_DECODER_CMD</span></a> ioctl.</p>
<p>This ioctl tries a decoder command. The <a class="reference internal" href="#struct-video-command">struct video_command</a> is a
subset of the <code class="docutils literal notranslate"><span class="pre">v4l2_decoder_cmd</span></code> struct, so refer to the
<a class="reference internal" href="../v4l/vidioc-decoder-cmd.html#vidioc-decoder-cmd"><span class="std std-ref">VIDIOC_TRY_DECODER_CMD</span></a> documentation
for more information.</p>
</section>
<section id="id110">
<h4><span class="section-number">6.2.3.1.2.21.4. </span>Return Value<a class="headerlink" href="#id110" title="Link to this heading">¶</a></h4>
<p>On success 0 is returned, on error -1 and the <code class="docutils literal notranslate"><span class="pre">errno</span></code> variable is set
appropriately. The generic error codes are described at the
<a class="reference internal" href="../gen-errors.html#id1"><span class="std std-ref">Generic Error Codes</span></a> chapter.</p>
</section>
</section>
<hr class="docutils" />
<section id="open">
<h3><span class="section-number">6.2.3.1.2.22. </span>open()<a class="headerlink" href="#open" title="Link to this heading">¶</a></h3>
<section id="id111">
<h4><span class="section-number">6.2.3.1.2.22.1. </span>Synopsis<a class="headerlink" href="#id111" title="Link to this heading">¶</a></h4>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fcntl.h&gt;</span>
</pre></div>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.dtv.legacy.video.open">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">open</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">char</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">deviceName</span></span>, <span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">flags</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dtv.legacy.video.open" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="id112">
<h4><span class="section-number">6.2.3.1.2.22.2. </span>Arguments<a class="headerlink" href="#id112" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">char</span> <span class="pre">*deviceName</span></code></p></td>
<td colspan="2"><p>Name of specific video device.</p></td>
</tr>
<tr class="row-even"><td rowspan="4"><p> <code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">flags</span></code></p></td>
<td colspan="2"><p> A bit-wise OR of the following flags:</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">O_RDONLY</span></code></p></td>
<td><p>read-only access</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">O_RDWR</span></code></p></td>
<td><p>read/write access</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">O_NONBLOCK</span></code></p></td>
<td><div class="line-block">
<div class="line">Open in non-blocking mode</div>
<div class="line">(blocking mode is the default)</div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="id113">
<h4><span class="section-number">6.2.3.1.2.22.3. </span>Description<a class="headerlink" href="#id113" title="Link to this heading">¶</a></h4>
<p>This system call opens a named video device (e.g.
/dev/dvb/adapter?/video?) for subsequent use.</p>
<p>When an <a class="reference internal" href="#c.dtv.legacy.video.open" title="dtv.legacy.video.open"><code class="xref c c-func docutils literal notranslate"><span class="pre">open()</span></code></a> call has succeeded, the device will be ready for use. The
significance of blocking or non-blocking mode is described in the
documentation for functions where there is a difference. It does not
affect the semantics of the <a class="reference internal" href="#c.dtv.legacy.video.open" title="dtv.legacy.video.open"><code class="xref c c-func docutils literal notranslate"><span class="pre">open()</span></code></a> call itself. A device opened in
blocking mode can later be put into non-blocking mode (and vice versa)
using the F_SETFL command of the fcntl system call. This is a standard
system call, documented in the Linux manual page for fcntl. Only one
user can open the Video Device in O_RDWR mode. All other attempts to
open the device in this mode will fail, and an error-code will be
returned. If the Video Device is opened in O_RDONLY mode, the only
ioctl call that can be used is <a class="reference internal" href="#video-get-status">VIDEO_GET_STATUS</a>. All other call will
return an error code.</p>
</section>
<section id="id114">
<h4><span class="section-number">6.2.3.1.2.22.4. </span>Return Value<a class="headerlink" href="#id114" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ENODEV</span></code></p></td>
<td colspan="2"><p> Device driver not loaded/available.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EINTERNAL</span></code></p></td>
<td colspan="2"><p>Internal error.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EBUSY</span></code></p></td>
<td colspan="2"><p>Device or resource busy.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EINVAL</span></code></p></td>
<td colspan="2"><p>Invalid argument.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="close">
<h3><span class="section-number">6.2.3.1.2.23. </span>close()<a class="headerlink" href="#close" title="Link to this heading">¶</a></h3>
<section id="id115">
<h4><span class="section-number">6.2.3.1.2.23.1. </span>Synopsis<a class="headerlink" href="#id115" title="Link to this heading">¶</a></h4>
<dl class="c function">
<dt class="sig sig-object c" id="c.dtv.legacy.video.close">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">close</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">fd</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dtv.legacy.video.close" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="id116">
<h4><span class="section-number">6.2.3.1.2.23.2. </span>Arguments<a class="headerlink" href="#id116" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id117">
<h4><span class="section-number">6.2.3.1.2.23.3. </span>Description<a class="headerlink" href="#id117" title="Link to this heading">¶</a></h4>
<p>This system call closes a previously opened video device.</p>
</section>
<section id="id118">
<h4><span class="section-number">6.2.3.1.2.23.4. </span>Return Value<a class="headerlink" href="#id118" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EBADF</span></code></p></td>
<td><p>fd is not a valid open file descriptor.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<hr class="docutils" />
<section id="write">
<h3><span class="section-number">6.2.3.1.2.24. </span>write()<a class="headerlink" href="#write" title="Link to this heading">¶</a></h3>
<section id="id119">
<h4><span class="section-number">6.2.3.1.2.24.1. </span>Synopsis<a class="headerlink" href="#id119" title="Link to this heading">¶</a></h4>
<dl class="c function">
<dt class="sig sig-object c" id="c.dtv.legacy.video.write">
<span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">write</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">fd</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">buf</span></span>, <span class="n"><span class="pre">size_t</span></span><span class="w"> </span><span class="n"><span class="pre">count</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.dtv.legacy.video.write" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="id120">
<h4><span class="section-number">6.2.3.1.2.24.2. </span>Arguments<a class="headerlink" href="#id120" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">fd</span></code></p></td>
<td colspan="2"><p> File descriptor returned by a previous call
to <a class="reference internal" href="#open">open()</a>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*buf</span></code></p></td>
<td colspan="2"><p>Pointer to the buffer containing the PES data.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">count</span></code></p></td>
<td colspan="2"><p>Size of buf.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id121">
<h4><span class="section-number">6.2.3.1.2.24.3. </span>Description<a class="headerlink" href="#id121" title="Link to this heading">¶</a></h4>
<p>This system call can only be used if VIDEO_SOURCE_MEMORY is selected
in the ioctl call <a class="reference internal" href="#video-select-source">VIDEO_SELECT_SOURCE</a>. The data provided shall be in
PES format, unless the capability allows other formats. TS is the
most common format for storing DVB-data, it is usually supported too.
If O_NONBLOCK is not specified the function will block until buffer space
is available. The amount of data to be transferred is implied by count.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See: <a class="reference internal" href="legacy_dvb_decoder_api.html#legacy-dvb-decoder-formats"><span class="std std-ref">DVB Data Formats</span></a></p>
</div>
</section>
<section id="id122">
<h4><span class="section-number">6.2.3.1.2.24.4. </span>Return Value<a class="headerlink" href="#id122" title="Link to this heading">¶</a></h4>
<table class="docutils align-default">
<tbody>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EPERM</span></code></p></td>
<td colspan="2"><p> Mode <code class="docutils literal notranslate"><span class="pre">VIDEO_SOURCE_MEMORY</span></code> not selected.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ENOMEM</span></code></p></td>
<td colspan="2"><p>Attempted to write more data than the internal buffer can hold.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">EBADF</span></code></p></td>
<td colspan="2"><p>fd is not a valid open file descriptor.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/userspace-api/media/dvb/legacy_dvb_video.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>