
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>La guida a PGP per manutentori del kernel &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Informazioni sui programmi di posta elettronica per Linux" href="email-clients.html" />
    <link rel="prev" title="Stile del codice per il kernel Linux" href="coding-style.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.7.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../driver-api/index.html">Driver implementer's API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../subsystem-apis.html">Kernel subsystem documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../locking/index.html">Locking in the kernel</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../process/license-rules.html">Linux kernel licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../dev-tools/testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../livepatch/index.html">Kernel Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/index.html">The Linux kernel user's and administrator's guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../kbuild/index.html">The kernel build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../tools/index.html">User-space tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../arch/index.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../staging/index.html">Unsorted Documentation</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Translations</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../zh_CN/index.html">中文翻译</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../zh_TW/index.html">繁體中文翻譯</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">La documentazione del kernel Linux</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#avvertenze">Avvertenze</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#lavorare-con-la-comunita-di-sviluppo">Lavorare con la comunità di sviluppo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#manuali-sull-api-interna">Manuali sull'API interna</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#strumenti-e-processi-per-lo-sviluppo">Strumenti e processi per lo sviluppo</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#documentazione-per-gli-utenti">Documentazione per gli utenti</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#documentazione-relativa-ai-firmware">Documentazione relativa ai firmware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#documentazione-specifica-per-architettura">Documentazione specifica per architettura</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#documentazione-varia">Documentazione varia</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../ko_KR/index.html">한국어 번역</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ja_JP/index.html">日本語訳</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sp_SP/index.html">Traducción al español</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#disclaimer">Disclaimer</a></li>
</ul>
</li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  sbar.scrollTop = currents[currents.length - 1].offsetTop;
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../_sources/translations/it_IT/process/maintainer-pgp-guide.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>In caso di dubbi sulla correttezza del contenuto di questa traduzione,
l'unico riferimento valido è la documentazione ufficiale in inglese.
Per maggiori informazioni consultate le <a class="reference internal" href="../index.html#it-disclaimer"><span class="std std-ref">avvertenze</span></a>.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Original<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../../../process/maintainer-pgp-guide.html#pgpguide"><span class="std std-ref">Documentation/process/maintainer-pgp-guide.rst</span></a></p>
</dd>
<dt class="field-even">Translator<span class="colon">:</span></dt>
<dd class="field-even"><p>Alessia Mantegazza &lt;<a class="reference external" href="mailto:amantegazza&#37;&#52;&#48;vaga&#46;pv&#46;it">amantegazza<span>&#64;</span>vaga<span>&#46;</span>pv<span>&#46;</span>it</a>&gt;</p>
</dd>
</dl>
<section id="la-guida-a-pgp-per-manutentori-del-kernel">
<span id="it-pgpguide"></span><h1>La guida a PGP per manutentori del kernel<a class="headerlink" href="#la-guida-a-pgp-per-manutentori-del-kernel" title="Permalink to this heading">¶</a></h1>
<dl class="field-list simple">
<dt class="field-odd">Author<span class="colon">:</span></dt>
<dd class="field-odd"><p>Konstantin Ryabitsev &lt;<a class="reference external" href="mailto:konstantin&#37;&#52;&#48;linuxfoundation&#46;org">konstantin<span>&#64;</span>linuxfoundation<span>&#46;</span>org</a>&gt;</p>
</dd>
</dl>
<p>Questo documento è destinato agli sviluppatori del kernel Linux, in particolar
modo ai manutentori. Contiene degli approfondimenti riguardo informazioni che
sono state affrontate in maniera più generale nella sezione
&quot;<a class="reference external" href="https://github.com/lfit/itpol/blob/master/protecting-code-integrity.md">Protecting Code Integrity</a>&quot; pubblicata dalla Linux Foundation.
Per approfondire alcuni argomenti trattati in questo documento è consigliato
leggere il documento sopraindicato</p>
<section id="il-ruolo-di-pgp-nello-sviluppo-del-kernel-linux">
<h2>Il ruolo di PGP nello sviluppo del kernel Linux<a class="headerlink" href="#il-ruolo-di-pgp-nello-sviluppo-del-kernel-linux" title="Permalink to this heading">¶</a></h2>
<p>PGP aiuta ad assicurare l'integrità del codice prodotto dalla comunità
di sviluppo del kernel e, in secondo luogo, stabilisce canali di comunicazione
affidabili tra sviluppatori attraverso lo scambio di email firmate con PGP.</p>
<p>Il codice sorgente del kernel Linux è disponibile principalmente in due
formati:</p>
<ul class="simple">
<li><p>repositori distribuiti di sorgenti (git)</p></li>
<li><p>rilasci periodici di istantanee (archivi tar)</p></li>
</ul>
<p>Sia i repositori git che gli archivi tar portano le firme PGP degli
sviluppatori che hanno creato i rilasci ufficiali del kernel. Queste firme
offrono una garanzia crittografica che le versioni scaricabili rese disponibili
via kernel.org, o altri portali, siano identiche a quelle che gli sviluppatori
hanno sul loro posto di lavoro. A tal scopo:</p>
<ul class="simple">
<li><p>i repositori git forniscono firme PGP per ogni tag</p></li>
<li><p>gli archivi tar hanno firme separate per ogni archivio</p></li>
</ul>
<section id="fidatevi-degli-sviluppatori-e-non-dell-infrastruttura">
<span id="it-devs-not-infra"></span><h3>Fidatevi degli sviluppatori e non dell'infrastruttura<a class="headerlink" href="#fidatevi-degli-sviluppatori-e-non-dell-infrastruttura" title="Permalink to this heading">¶</a></h3>
<p>Fin dal 2011, quando i sistemi di kernel.org furono compromessi, il principio
generale del progetto Kernel Archives è stato quello di assumere che qualsiasi
parte dell'infrastruttura possa essere compromessa in ogni momento. Per questa
ragione, gli amministratori hanno intrapreso deliberatemene dei passi per
enfatizzare che la fiducia debba risiedere sempre negli sviluppatori e mai nel
codice che gestisce l'infrastruttura, indipendentemente da quali che siano le
pratiche di sicurezza messe in atto.</p>
<p>Il principio sopra indicato è la ragione per la quale è necessaria questa
guida. Vogliamo essere sicuri che il riporre la fiducia negli sviluppatori
non sia fatto semplicemente per incolpare qualcun'altro per future falle di
sicurezza. L'obiettivo è quello di fornire una serie di linee guida che gli
sviluppatori possano seguire per creare un ambiente di lavoro sicuro e
salvaguardare le chiavi PGP usate nello stabilire l'integrità del kernel Linux
stesso.</p>
</section>
</section>
<section id="strumenti-pgp">
<span id="it-pgp-tools"></span><h2>Strumenti PGP<a class="headerlink" href="#strumenti-pgp" title="Permalink to this heading">¶</a></h2>
<section id="usare-gnupg-2-2-o-successivo">
<h3>Usare GnuPG 2.2 o successivo<a class="headerlink" href="#usare-gnupg-2-2-o-successivo" title="Permalink to this heading">¶</a></h3>
<p>La vostra distribuzione potrebbe avere già installato GnuPG, dovete solo
verificare che stia utilizzando la versione abbastanza recente. Per controllate
usate:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --version | head -n1
</pre></div>
</div>
<p>Se state utilizzando la version 2.2 o successiva, allora siete pronti a partire.
Se invece state usando una versione precedente, allora alcuni comandi elencati
in questa guida potrebbero non funzionare.</p>
<section id="configurare-le-opzioni-di-gpg-agent">
<h4>Configurare le opzioni di gpg-agent<a class="headerlink" href="#configurare-le-opzioni-di-gpg-agent" title="Permalink to this heading">¶</a></h4>
<p>L'agente GnuPG è uno strumento di aiuto che partirà automaticamente ogni volta
che userete il comando <code class="docutils literal notranslate"><span class="pre">gpg</span></code> e funzionerà in <em>background</em> con l'obiettivo di
individuare la passphrase. Ci sono due opzioni che dovreste conoscere
per personalizzare la scadenza della passphrase nella cache:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default-cache-ttl</span></code> (secondi): Se usate ancora la stessa chiave prima
che il time-to-live termini, il conto alla rovescia si resetterà per un
altro periodo. Di base è di 600 (10 minuti).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max-cache-ttl</span></code> (secondi): indipendentemente da quanto sia recente l'ultimo
uso della chiave da quando avete inserito la passphrase, se il massimo
time-to-live è scaduto, dovrete reinserire nuovamente la passphrase.
Di base è di 30 minuti.</p></li>
</ul>
<p>Se ritenete entrambe questi valori di base troppo corti (o troppo lunghi),
potete creare il vostro file <code class="docutils literal notranslate"><span class="pre">~/.gnupg/gpg-agent.conf</span></code> ed impostare i vostri
valori:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># set to 30 minutes for regular ttl, and 2 hours for max ttl
default-cache-ttl 1800
max-cache-ttl 7200
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Non è più necessario far partire l'agente gpg manualmente all'inizio della
vostra sessione. Dovreste controllare i file rc per rimuovere tutto ciò che
riguarda vecchie le versioni di GnuPG, poiché potrebbero non svolgere più
bene il loro compito.</p>
</div>
</section>
</section>
</section>
<section id="proteggere-la-vostra-chiave-pgp-primaria">
<span id="it-protect-your-key"></span><h2>Proteggere la vostra chiave PGP primaria<a class="headerlink" href="#proteggere-la-vostra-chiave-pgp-primaria" title="Permalink to this heading">¶</a></h2>
<p>Questa guida parte dal presupposto che abbiate già una chiave PGP che usate
per lo sviluppo del kernel Linux. Se non ne avete ancora una, date uno sguardo
al documento &quot;<a class="reference external" href="https://github.com/lfit/itpol/blob/master/protecting-code-integrity.md">Protecting Code Integrity</a>&quot; che abbiamo menzionato prima.</p>
<p>Dovreste inoltre creare una nuova chiave se quella attuale è inferiore a 2048
bit (RSA).</p>
<section id="le-sottochiavi-pgp">
<h3>Le sottochiavi PGP<a class="headerlink" href="#le-sottochiavi-pgp" title="Permalink to this heading">¶</a></h3>
<p>Raramente le chiavi PGP sono composte da una singola coppia -- solitamente, sono
una collezione di sottochiavi indipendenti usate per diversi scopi in funzione
delle capacità assegnate al momento della creazione. Una chiave PGP può avere
quattro capacità:</p>
<ul class="simple">
<li><p><strong>[S]</strong> può essere usata per firmare</p></li>
<li><p><strong>[E]</strong> può essere usata per criptare</p></li>
<li><p><strong>[A]</strong> può essere usata per autenticare</p></li>
<li><p><strong>[C]</strong> può essere usata per certificare altre chiavi</p></li>
</ul>
<p>La chiave con la capacità <strong>[C]</strong> viene spesso chiamata chiave &quot;passepartout&quot;
(<em>master key</em>), ma è una terminologia fuorviante perché lascia intendere che la
chiave di certificato possa essere usate in sostituzione delle altre (proprio
come le vere chiavi passpartout in grado di aprire diverse serrature). Dato che
questo non è il caso, per evitare fraintendimenti, in questa guida ci riferiremo
a questa chiave chiamandola &quot;La chiave di certificazione&quot;.</p>
<p>I seguenti punti sono molto importanti:</p>
<ol class="arabic simple">
<li><p>Tutte le sottochiavi sono indipendenti. Se perdete una sottochiave privata
non potrete recuperarla usando le altre.</p></li>
<li><p>Ad eccezione della chiave di certificazione, ci possono essere più
sottochiavi con le stesse capacità (per esempio, potete avere 2 sottochiavi
per criptare, 3 per firmare, ma solo una per una sola per certificare). Tutte
le sottochiavi sono indipendenti -- un messaggio criptato usando una chiave
<strong>[E]</strong> non può essere decriptato usano altre sottochiavi <strong>[E]</strong>.</p></li>
<li><p>Una sottochiave può avere più capacità (per esempio, la chiave <strong>[C]</strong> può
anche essere una chiave <strong>[S]</strong>).</p></li>
</ol>
<p>La chiave con capacità <strong>[C]</strong> (certificazione) è la sola che può essere usata
per indicare relazioni fra chiavi. Solo la chiave <strong>[C]</strong> può essere usata per:</p>
<ul class="simple">
<li><p>aggiungere o revocare altre chiavi (sottochiavi) che hanno capacità S/E/A;</p></li>
<li><p>aggiungere, modificare o eliminare le identità (unids) associate alla chiave;</p></li>
<li><p>aggiungere o modificare la propria data di scadenza o delle sottochiavi;</p></li>
<li><p>firmare le chiavi di altre persone a scopo di creare una rete di fiducia.</p></li>
</ul>
<p>Di base, alla creazione di nuove chiavi, GnuPG genera quanto segue:</p>
<ul class="simple">
<li><p>Una chiave la capacità di certificazione che quella di firma (<strong>[SC]</strong>)</p></li>
<li><p>Una sottochiave separata con capacità di criptare (<strong>[E]</strong>)</p></li>
</ul>
<p>Se avete usato i parametri predefiniti per generare la vostra chiave, quello
sarà il risultato. Potete verificarlo utilizzando <code class="docutils literal notranslate"><span class="pre">gpg</span> <span class="pre">--list-secret-keys</span></code>,
per esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>sec   ed25519 2022-12-20 [SC] [expires: 2024-12-19]
      000000000000000000000000AAAABBBBCCCCDDDD
uid           [ultimate] Alice Dev &lt;adev@kernel.org&gt;
ssb   cv25519 2022-12-20 [E] [expires: 2024-12-19]
</pre></div>
</div>
<p>La lunga riga sotto la voce <code class="docutils literal notranslate"><span class="pre">sec</span></code> è la vostra impronta digitale --
negli esempi che seguono, quando vedere <code class="docutils literal notranslate"><span class="pre">[fpr]</span></code> ci si riferisce a questa
stringa di 40 caratteri.</p>
</section>
<section id="assicuratevi-che-la-vostra-passphrase-sia-forte">
<h3>Assicuratevi che la vostra passphrase sia forte<a class="headerlink" href="#assicuratevi-che-la-vostra-passphrase-sia-forte" title="Permalink to this heading">¶</a></h3>
<p>GnuPG utilizza le passphrases per criptare la vostra chiave privata prima
di salvarla sul disco. In questo modo, anche se il contenuto della vostra
cartella <code class="docutils literal notranslate"><span class="pre">.gnupg</span></code> venisse letto o trafugato nella sia interezza, gli
attaccanti non potrebbero comunque utilizzare le vostre chiavi private senza
aver prima ottenuto la passphrase per decriptarle.</p>
<p>È assolutamente essenziale che le vostre chiavi private siano protette da
una passphrase forte. Per impostarla o cambiarla, usate:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --change-passphrase [fpr]
</pre></div>
</div>
</section>
<section id="create-una-sottochiave-di-firma-separata">
<h3>Create una sottochiave di firma separata<a class="headerlink" href="#create-una-sottochiave-di-firma-separata" title="Permalink to this heading">¶</a></h3>
<p>Il nostro obiettivo è di proteggere la chiave primaria spostandola su un
dispositivo sconnesso dalla rete, dunque se avete solo una chiave combinata
<strong>[SC]</strong> allora dovreste creare una sottochiave di firma separata:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --quick-add-key [fpr] ed25519 sign
</pre></div>
</div>
<p>Ricordate di informare il keyserver del vostro cambiamento, cosicché altri
possano ricevere la vostra nuova sottochiave:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --send-key [fpr]
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Supporto ECC in GnuPG</p>
<p>Tenete presente che se avete intenzione di usare un dispositivo che non
supporta chiavi ED25519 ECC, allora dovreste usare &quot;nistp256&quot; al posto di
&quot;ed25519&quot;. Più avanti ci sono alcune raccomandazioni per i dispositivi.</p>
</div>
</section>
<section id="copia-di-riserva-della-chiave-primaria-per-gestire-il-recupero-da-disastro">
<h3>Copia di riserva della chiave primaria per gestire il recupero da disastro<a class="headerlink" href="#copia-di-riserva-della-chiave-primaria-per-gestire-il-recupero-da-disastro" title="Permalink to this heading">¶</a></h3>
<p>Maggiori sono le firme di altri sviluppatori che vengono applicate alla vostra,
maggiori saranno i motivi per avere una copia di riserva che non sia digitale,
al fine di effettuare un recupero da disastro.</p>
<p>Il modo migliore per creare una copia fisica della vostra chiave privata è
l'uso del programma <code class="docutils literal notranslate"><span class="pre">paperkey</span></code>. Consultate <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">paperkey</span></code> per maggiori
dettagli sul formato dell'output ed i suoi punti di forza rispetto ad altre
soluzioni. Paperkey dovrebbe essere già pacchettizzato per la maggior parte
delle distribuzioni.</p>
<p>Eseguite il seguente comando per creare una copia fisica di riserva della
vostra chiave privata:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --export-secret-key [fpr] | paperkey -o /tmp/key-backup.txt
</pre></div>
</div>
<p>Stampate il file (o fate un pipe direttamente verso lpr), poi prendete
una penna e scrivete la passphare sul margine del foglio.  <strong>Questo è
caldamente consigliato</strong> perché la copia cartacea è comunque criptata con
la passphrase, e se mai doveste cambiarla non vi ricorderete qual'era al
momento della creazione di quella copia -- <em>garantito</em>.</p>
<p>Mettete la copia cartacea e la passphrase scritta a mano in una busta e
mettetela in un posto sicuro e ben protetto, preferibilmente fuori casa,
magari in una cassetta di sicurezza in banca.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Probabilmente la vostra stampante non è più quello stupido dispositivo
connesso alla porta parallela, ma dato che il suo output è comunque
criptato con la passphrase, eseguire la stampa in un sistema &quot;cloud&quot;
moderno dovrebbe essere comunque relativamente sicuro.</p>
</div>
</section>
<section id="copia-di-riserva-di-tutta-la-cartella-gnupg">
<h3>Copia di riserva di tutta la cartella GnuPG<a class="headerlink" href="#copia-di-riserva-di-tutta-la-cartella-gnupg" title="Permalink to this heading">¶</a></h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p><strong>!!!Non saltate questo passo!!!</strong></p>
</div>
<p>Quando avete bisogno di recuperare le vostre chiavi PGP è importante avere
una copia di riserva pronta all'uso. Questo sta su un diverso piano di
prontezza rispetto al recupero da disastro che abbiamo risolto con
<code class="docutils literal notranslate"><span class="pre">paperkey</span></code>. Vi affiderete a queste copie esterne quando dovreste usare la
vostra chiave Certify -- ovvero quando fate modifiche alle vostre chiavi o
firmate le chiavi di altre persone ad una conferenza o ad un gruppo d'incontro.</p>
<p>Incominciate con una piccola chiavetta di memoria USB (preferibilmente due)
che userete per le copie di riserva. Dovrete criptarle usando LUKS -- fate
riferimento alla documentazione della vostra distribuzione per capire come
fare.</p>
<p>Per la passphrase di criptazione, potete usare la stessa della vostra chiave
primaria.</p>
<p>Una volta che il processo di criptazione è finito, reinserite il disco USB ed
assicurativi che venga montato correttamente. Copiate interamente la cartella
<code class="docutils literal notranslate"><span class="pre">.gnugp</span></code> nel disco criptato:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cp -a ~/.gnupg /media/disk/foo/gnupg-backup
</pre></div>
</div>
<p>Ora dovreste verificare che tutto continui a funzionare:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --homedir=/media/disk/foo/gnupg-backup --list-key [fpr]
</pre></div>
</div>
<p>Se non vedete errori, allora dovreste avere fatto tutto con successo.
Smontate il disco USB, etichettatelo per bene di modo da evitare di
distruggerne il contenuto non appena vi serve una chiavetta USB a caso, ed
infine mettetelo in un posto sicuro -- ma non troppo lontano, perché vi servirà
di tanto in tanto per modificare le identità, aggiungere o revocare
sottochiavi, o firmare le chiavi di altre persone.</p>
</section>
<section id="togliete-la-chiave-primaria-dalla-vostra-home">
<h3>Togliete la chiave primaria dalla vostra home<a class="headerlink" href="#togliete-la-chiave-primaria-dalla-vostra-home" title="Permalink to this heading">¶</a></h3>
<p>I file che si trovano nella vostra cartella home non sono poi così ben protetti
come potreste pensare. Potrebbero essere letti o trafugati in diversi modi:</p>
<ul class="simple">
<li><p>accidentalmente quando fate una rapida copia della cartella home per
configurare una nuova postazione</p></li>
<li><p>da un amministratore di sistema negligente o malintenzionato</p></li>
<li><p>attraverso copie di riserva insicure</p></li>
<li><p>attraverso malware installato in alcune applicazioni (browser, lettori PDF,
eccetera)</p></li>
<li><p>attraverso coercizione quando attraversate confini internazionali</p></li>
</ul>
<p>Proteggere la vostra chiave con una buona passphare aiuta notevolmente a
ridurre i rischi elencati qui sopra, ma le passphrase possono essere scoperte
attraverso i keylogger, il shoulder-surfing, o altri modi. Per questi motivi,
nella configurazione si raccomanda di rimuove la chiave primaria dalla vostra
cartella home e la si archivia su un dispositivo disconnesso.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Per favore, fate riferimento alla sezione precedente e assicuratevi
di aver fatto una copia di riserva totale della cartella GnuPG. Quello
che stiamo per fare renderà la vostra chiave inutile se non avete delle
copie di riserva utilizzabili!</p>
</div>
<p>Per prima cosa, identificate il keygrip della vostra chiave primaria:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --with-keygrip --list-key [fpr]
</pre></div>
</div>
<p>L'output assomiglierà a questo:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>pub   ed25519 2022-12-20 [SC] [expires: 2022-12-19]
      000000000000000000000000AAAABBBBCCCCDDDD
      Keygrip = 1111000000000000000000000000000000000000
uid           [ultimate] Alice Dev &lt;adev@kernel.org&gt;
sub   cv25519 2022-12-20 [E] [expires: 2022-12-19]
      Keygrip = 2222000000000000000000000000000000000000
sub   ed25519 2022-12-20 [S]
      Keygrip = 3333000000000000000000000000000000000000
</pre></div>
</div>
<p>Trovate la voce keygrid che si trova sotto alla riga <code class="docutils literal notranslate"><span class="pre">pub</span></code> (appena sotto
all'impronta digitale della chiave primaria). Questo corrisponderà direttamente
ad un file nella cartella <code class="docutils literal notranslate"><span class="pre">~/.gnupg</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd ~/.gnupg/private-keys-v1.d
$ ls
1111000000000000000000000000000000000000.key
2222000000000000000000000000000000000000.key
3333000000000000000000000000000000000000.key
</pre></div>
</div>
<p>Quello che dovrete fare è rimuovere il file .key che corrisponde al keygrip
della chiave primaria:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd ~/.gnupg/private-keys-v1.d
$ rm 1111000000000000000000000000000000000000.key
</pre></div>
</div>
<p>Ora, se eseguite il comando <code class="docutils literal notranslate"><span class="pre">--list-secret-keys</span></code>, vedrete che la chiave
primaria non compare più (il simbolo <code class="docutils literal notranslate"><span class="pre">#</span></code> indica che non è disponibile):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --list-secret-keys
sec#  ed25519 2022-12-20 [SC] [expires: 2024-12-19]
      000000000000000000000000AAAABBBBCCCCDDDD
uid           [ultimate] Alice Dev &lt;adev@kernel.org&gt;
ssb   cv25519 2022-12-20 [E] [expires: 2024-12-19]
ssb   ed25519 2022-12-20 [S]
</pre></div>
</div>
<p>Dovreste rimuovere anche i file <code class="docutils literal notranslate"><span class="pre">secring.gpg</span></code> che si trovano nella cartella
<code class="docutils literal notranslate"><span class="pre">~/.gnupg</span></code>, in quanto rimasugli delle versioni precedenti di GnuPG.</p>
<section id="se-non-avete-la-cartella-private-keys-v1-d">
<h4>Se non avete la cartella &quot;private-keys-v1.d&quot;<a class="headerlink" href="#se-non-avete-la-cartella-private-keys-v1-d" title="Permalink to this heading">¶</a></h4>
<p>Se non avete la cartella <code class="docutils literal notranslate"><span class="pre">~/.gnupg/private-keys-v1.d</span></code>, allora le vostre
chiavi segrete sono ancora salvate nel vecchio file <code class="docutils literal notranslate"><span class="pre">secring.gpg</span></code> usato
da GnuPG v1. Effettuare una qualsiasi modifica alla vostra chiave, come
cambiare la passphare o aggiungere una sottochiave, dovrebbe convertire
automaticamente il vecchio formato <code class="docutils literal notranslate"><span class="pre">secring.gpg``nel</span> <span class="pre">nuovo</span>
<span class="pre">``private-keys-v1.d</span></code>.</p>
<p>Una volta che l'avete fatto, assicuratevi di rimuovere il file <code class="docutils literal notranslate"><span class="pre">secring.gpg</span></code>,
che continua a contenere la vostra chiave privata.</p>
</section>
</section>
</section>
<section id="spostare-le-sottochiavi-in-un-apposito-dispositivo-criptato">
<span id="it-smartcards"></span><h2>Spostare le sottochiavi in un apposito dispositivo criptato<a class="headerlink" href="#spostare-le-sottochiavi-in-un-apposito-dispositivo-criptato" title="Permalink to this heading">¶</a></h2>
<p>Nonostante la chiave primaria sia ora al riparo da occhi e mani indiscrete,
le sottochiavi si trovano ancora nella vostra cartella home. Chiunque riesca
a mettere le sue mani su quelle chiavi riuscirà a decriptare le vostre
comunicazioni o a falsificare le vostre firme (se conoscono la passphrase).
Inoltre, ogni volta che viene fatta un'operazione con GnuPG, le chiavi vengono
caricate nella memoria di sistema e potrebbero essere rubate con l'uso di
malware sofisticati (pensate a Meltdown e a Spectre).</p>
<p>Il miglior modo per proteggere le proprie chiave è di spostarle su un
dispositivo specializzato in grado di effettuare operazioni smartcard.</p>
<section id="i-benefici-di-una-smartcard">
<h3>I benefici di una smartcard<a class="headerlink" href="#i-benefici-di-una-smartcard" title="Permalink to this heading">¶</a></h3>
<p>Una smartcard contiene un chip crittografico che è capace di immagazzinare
le chiavi private ed effettuare operazioni crittografiche direttamente sulla
carta stessa. Dato che la chiave non lascia mai la smartcard, il sistema
operativo usato sul computer non sarà in grado di accedere alle chiavi.
Questo è molto diverso dai dischi USB criptati che abbiamo usato allo scopo di
avere una copia di riserva sicura -- quando il dispositivo USB è connesso e
montato, il sistema operativo potrà accedere al contenuto delle chiavi private.</p>
<p>L'uso di un disco USB criptato non può sostituire le funzioni di un dispositivo
capace di operazioni di tipo smartcard.</p>
</section>
<section id="dispositivi-smartcard-disponibili">
<h3>Dispositivi smartcard disponibili<a class="headerlink" href="#dispositivi-smartcard-disponibili" title="Permalink to this heading">¶</a></h3>
<p>A meno che tutti i vostri computer dispongano di lettori smartcard, il modo
più semplice è equipaggiarsi di un dispositivo USB specializzato che
implementi le funzionalità delle smartcard.  Sul mercato ci sono diverse
soluzioni disponibili:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://shop.nitrokey.com/shop/product/nitrokey-start-6">Nitrokey Start</a>: è Open hardware e Free Software, è basata sul progetto
<a class="reference external" href="https://www.fsij.org/doc-gnuk/">GnuK</a> della FSIJ. Questo è uno dei pochi dispositivi a supportare le chiavi
ECC ED25519, ma offre meno funzionalità di sicurezza (come la resistenza
alla manomissione o alcuni attacchi ad un canale laterale).</p></li>
<li><p><a class="reference external" href="https://shop.nitrokey.com/shop/product/nitrokey-pro-2-3">Nitrokey Pro 2</a>: è simile alla Nitrokey Start, ma è più resistente alla
manomissione e offre più funzionalità di sicurezza. La Pro 2 supporta la
crittografia ECC (NISTP).</p></li>
<li><p><a class="reference external" href="https://www.yubico.com/product/yubikey-5-overview/">Yubikey 5</a>: l'hardware e il software sono proprietari, ma è più economica
della  Nitrokey Pro ed è venduta anche con porta USB-C il che è utile con i
computer portatili più recenti. In aggiunta, offre altre funzionalità di
sicurezza come FIDO, U2F, e ora supporta anche le chiavi ECC (NISTP)</p></li>
</ul>
<p>La vostra scelta dipenderà dal costo, la disponibilità nella vostra regione, e
sulla scelta fra dispositivi aperti e proprietari.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Se siete nella lista MAINTAINERS o avete un profilo su kernel.org, allora
<a class="reference external" href="https://www.kernel.org/nitrokey-digital-tokens-for-kernel-developers.html">potrete avere gratuitamente una Nitrokey Start</a> grazie alla fondazione
Linux.</p>
</div>
</section>
<section id="configurare-il-vostro-dispositivo-smartcard">
<h3>Configurare il vostro dispositivo smartcard<a class="headerlink" href="#configurare-il-vostro-dispositivo-smartcard" title="Permalink to this heading">¶</a></h3>
<p>Il vostro dispositivo smartcard dovrebbe iniziare a funzionare non appena
lo collegate ad un qualsiasi computer Linux moderno. Potete verificarlo
eseguendo:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --card-status
</pre></div>
</div>
<p>Se vedete tutti i dettagli della smartcard, allora ci siamo. Sfortunatamente,
affrontare tutti i possibili motivi per cui le cose potrebbero non funzionare
non è lo scopo di questa guida. Se avete problemi nel far funzionare la carta
con GnuPG, cercate aiuto attraverso i soliti canali di supporto.</p>
<p>Per configurare la vostra smartcard, dato che non c'è una via facile dalla
riga di comando, dovrete usate il menu di GnuPG:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --card-edit
[...omitted...]
gpg/card&gt; admin
Admin commands are allowed
gpg/card&gt; passwd
</pre></div>
</div>
<p>Dovreste impostare il PIN dell'utente (1), quello dell'amministratore (3) e il
codice di reset (4). Assicuratevi di annotare e salvare questi codici in un
posto sicuro -- specialmente il PIN dell'amministratore e il codice di reset
(che vi permetterà di azzerare completamente la smartcard).  Il PIN
dell'amministratore viene usato così raramente che è inevitabile dimenticarselo
se non lo si annota.</p>
<p>Tornando al nostro menu, potete impostare anche altri valori (come il nome,
il sesso, informazioni d'accesso, eccetera), ma non sono necessari e aggiunge
altre informazioni sulla carta che potrebbero trapelare in caso di smarrimento.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A dispetto del nome &quot;PIN&quot;, né il PIN utente né quello dell'amministratore
devono essere esclusivamente numerici.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Alcuni dispositivi richiedono la presenza delle sottochiavi nel dispositivo
stesso prima che possiate cambiare la passphare. Verificate la
documentazione del produttore.</p>
</div>
</section>
<section id="spostare-le-sottochiavi-sulla-smartcard">
<h3>Spostare le sottochiavi sulla smartcard<a class="headerlink" href="#spostare-le-sottochiavi-sulla-smartcard" title="Permalink to this heading">¶</a></h3>
<p>Uscite dal menu (usando &quot;q&quot;) e salverete tutte le modifiche. Poi, spostiamo
tutte le sottochiavi sulla smartcard. Per la maggior parte delle operazioni
vi serviranno sia la passphrase della chiave PGP che il PIN
dell'amministratore:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --edit-key [fpr]

Secret subkeys are available.

pub  ed25519/AAAABBBBCCCCDDDD
     created: 2022-12-20  expires: 2024-12-19  usage: SC
     trust: ultimate      validity: ultimate
ssb  cv25519/1111222233334444
     created: 2022-12-20  expires: never       usage: E
ssb  ed25519/5555666677778888
     created: 2017-12-07  expires: never       usage: S
[ultimate] (1). Alice Dev &lt;adev@kernel.org&gt;

gpg&gt;
</pre></div>
</div>
<p>Usando <code class="docutils literal notranslate"><span class="pre">--edit-key</span></code> si tornerà alla modalità menu e noterete che
la lista delle chiavi è leggermente diversa. Da questo momento in poi,
tutti i comandi saranno eseguiti nella modalità menu, come indicato
da <code class="docutils literal notranslate"><span class="pre">gpg&gt;</span></code>.</p>
<p>Per prima cosa, selezioniamo la chiave che verrà messa sulla carta --
potete farlo digitando <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">1</span></code> (è la prima della lista, la sottochiave
<strong>[E]</strong>):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gpg&gt; key 1
</pre></div>
</div>
<p>Nel'output dovreste vedere <code class="docutils literal notranslate"><span class="pre">ssb*</span></code> associato alla chiave <strong>[E]</strong>. Il simbolo
<code class="docutils literal notranslate"><span class="pre">*</span></code> indica che la chiave è stata &quot;selezionata&quot;. Funziona come un
interruttore, ovvero se scrivete nuovamente <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">1</span></code>, il simbolo <code class="docutils literal notranslate"><span class="pre">*</span></code> sparirà
e la chiave non sarà più selezionata.</p>
<p>Ora, spostiamo la chiave sulla smartcard:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gpg&gt; keytocard
Please select where to store the key:
   (2) Encryption key
Your selection? 2
</pre></div>
</div>
<p>Dato che è la nostra chiave  <strong>[E]</strong>, ha senso metterla nella sezione criptata.
Quando confermerete la selezione, vi verrà chiesta la passphrase della vostra
chiave PGP, e poi il PIN dell'amministratore. Se il comando ritorna senza
errori, allora la vostra chiave è stata spostata con successo.</p>
<p><strong>Importante</strong>: digitate nuovamente <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">1</span></code> per deselezionare la prima chiave
e selezionate la seconda chiave <strong>[S]</strong> con <code class="docutils literal notranslate"><span class="pre">key</span> <span class="pre">2</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gpg&gt; key 1
gpg&gt; key 2
gpg&gt; keytocard
Please select where to store the key:
   (1) Signature key
   (3) Authentication key
Your selection? 1
</pre></div>
</div>
<p>Potete usare la chiave <strong>[S]</strong> sia per firmare che per autenticare, ma vogliamo
che sia nella sezione di firma, quindi scegliete (1). Ancora una volta, se il
comando ritorna senza errori, allora l'operazione è avvenuta con successo:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gpg&gt; q
Save changes? (y/N) y
</pre></div>
</div>
<p>Salvando le modifiche cancellerete dalla vostra cartella home tutte le chiavi
che avete spostato sulla carta (ma questo non è un problema, perché abbiamo
fatto delle copie di sicurezza nel caso in cui dovessimo configurare una
nuova smartcard).</p>
<section id="verificare-che-le-chiavi-siano-state-spostate">
<h4>Verificare che le chiavi siano state spostate<a class="headerlink" href="#verificare-che-le-chiavi-siano-state-spostate" title="Permalink to this heading">¶</a></h4>
<p>Ora, se doveste usare l'opzione <code class="docutils literal notranslate"><span class="pre">--list-secret-keys</span></code>, vedrete una
sottile differenza nell'output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --list-secret-keys
sec#  ed25519 2022-12-20 [SC] [expires: 2024-12-19]
      000000000000000000000000AAAABBBBCCCCDDDD
uid           [ultimate] Alice Dev &lt;adev@kernel.org&gt;
ssb&gt;  cv25519 2022-12-20 [E] [expires: 2024-12-19]
ssb&gt;  ed25519 2022-12-20 [S]
</pre></div>
</div>
<p>Il simbolo <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> in <code class="docutils literal notranslate"><span class="pre">ssb&gt;</span></code> indica che la sottochiave è disponibile solo
nella smartcard. Se tornate nella vostra cartella delle chiavi segrete e
guardate al suo contenuto, noterete che i file <code class="docutils literal notranslate"><span class="pre">.key</span></code> sono stati sostituiti
con degli stub:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd ~/.gnupg/private-keys-v1.d
$ strings *.key | grep &#39;private-key&#39;
</pre></div>
</div>
<p>Per indicare che i file sono solo degli stub e che in realtà il contenuto è
sulla smartcard, l'output dovrebbe mostrarvi <code class="docutils literal notranslate"><span class="pre">shadowed-private-key</span></code>.</p>
</section>
<section id="verificare-che-la-smartcard-funzioni">
<h4>Verificare che la smartcard funzioni<a class="headerlink" href="#verificare-che-la-smartcard-funzioni" title="Permalink to this heading">¶</a></h4>
<p>Per verificare che la smartcard funzioni come dovuto, potete creare
una firma:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ echo &quot;Hello world&quot; | gpg --clearsign &gt; /tmp/test.asc
$ gpg --verify /tmp/test.asc
</pre></div>
</div>
<p>Col primo comando dovrebbe chiedervi il PIN della smartcard, e poi dovrebbe
mostrare &quot;Good signature&quot; dopo l'esecuzione di <code class="docutils literal notranslate"><span class="pre">gpg</span> <span class="pre">--verify</span></code>.</p>
<p>Complimenti, siete riusciti a rendere estremamente difficile il furto della
vostra identità digitale di sviluppatore.</p>
</section>
</section>
<section id="altre-operazioni-possibili-con-gnupg">
<h3>Altre operazioni possibili con GnuPG<a class="headerlink" href="#altre-operazioni-possibili-con-gnupg" title="Permalink to this heading">¶</a></h3>
<p>Segue un breve accenno ad alcune delle operazioni più comuni che dovrete
fare con le vostre chiavi PGP.</p>
<section id="montare-il-disco-con-la-chiave-primaria">
<h4>Montare il disco con la chiave primaria<a class="headerlink" href="#montare-il-disco-con-la-chiave-primaria" title="Permalink to this heading">¶</a></h4>
<p>Vi servirà la vostra chiave principale per tutte le operazioni che seguiranno,
per cui per prima cosa dovrete accedere ai vostri backup e dire a GnuPG di
usarli:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export GNUPGHOME=/media/disk/foo/gnupg-backup
$ gpg --list-secret-keys
</pre></div>
</div>
<p>Dovete assicurarvi di vedere <code class="docutils literal notranslate"><span class="pre">sec</span></code> e non <code class="docutils literal notranslate"><span class="pre">sec#</span></code> nell'output del programma
(il simbolo <code class="docutils literal notranslate"><span class="pre">#</span></code> significa che la chiave non è disponibile e che state ancora
utilizzando la vostra solita cartella di lavoro).</p>
</section>
<section id="estendere-la-data-di-scadenza-di-una-chiave">
<h4>Estendere la data di scadenza di una chiave<a class="headerlink" href="#estendere-la-data-di-scadenza-di-una-chiave" title="Permalink to this heading">¶</a></h4>
<p>La chiave principale ha una data di scadenza di 2 anni dal momento della sua
creazione. Questo per motivi di sicurezza e per rendere obsolete le chiavi
che, eventualmente, dovessero sparire dai keyserver.</p>
<p>Per estendere di un anno, dalla data odierna, la scadenza di una vostra chiave,
eseguite:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --quick-set-expire [fpr] 1y
</pre></div>
</div>
<p>Se per voi è più facile da memorizzare, potete anche utilizzare una data
specifica (per esempio, il vostro compleanno o capodanno):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --quick-set-expire [fpr] 2025-07-01
</pre></div>
</div>
<p>Ricordatevi di inviare l'aggiornamento ai keyserver:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --send-key [fpr]
</pre></div>
</div>
</section>
<section id="aggiornare-la-vostra-cartella-di-lavoro-dopo-ogni-modifica">
<h4>Aggiornare la vostra cartella di lavoro dopo ogni modifica<a class="headerlink" href="#aggiornare-la-vostra-cartella-di-lavoro-dopo-ogni-modifica" title="Permalink to this heading">¶</a></h4>
<p>Dopo aver fatto delle modifiche alle vostre chiavi usando uno spazio a parte,
dovreste importarle nella vostra cartella di lavoro abituale:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --export | gpg --homedir ~/.gnupg --import
$ unset GNUPGHOME
</pre></div>
</div>
</section>
<section id="usare-gpg-agent-con-ssh">
<h4>Usare gpg-agent con ssh<a class="headerlink" href="#usare-gpg-agent-con-ssh" title="Permalink to this heading">¶</a></h4>
<p>Se dovete firmare tag o commit su un sistema remoto, potete ridirezionare il
vostro gpg-agent attraverso ssh. Consultate le istruzioni disponibili nella wiki
GnuPG:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://wiki.gnupg.org/AgentForwarding">Agent Forwarding over SSH</a></p></li>
</ul>
<p>Funziona senza troppi intoppi se avete la possibilità di modificare le
impostazioni di sshd sul sistema remoto.</p>
</section>
</section>
</section>
<section id="usare-pgp-con-git">
<span id="it-pgp-with-git"></span><h2>Usare PGP con Git<a class="headerlink" href="#usare-pgp-con-git" title="Permalink to this heading">¶</a></h2>
<p>Una delle caratteristiche fondanti di Git è la sua natura decentralizzata --
una volta che il repositorio è stato clonato sul vostro sistema, avete la
storia completa del progetto, inclusi i suoi tag, i commit ed i rami. Tuttavia,
con i centinaia di repositori clonati che ci sono in giro, come si fa a
verificare che la loro copia di linux.git non è stata manomessa da qualcuno?</p>
<p>Oppure, cosa succede se viene scoperta una backdoor nel codice e la riga
&quot;Autore&quot; dice che sei stato tu, mentre tu sei abbastanza sicuro di
<a class="reference external" href="https://github.com/jayphelps/git-blame-someone-else">non averci niente a che fare</a>?</p>
<p>Per risolvere entrambi i problemi, Git ha introdotto l'integrazione con PGP.
I tag firmati dimostrano che il repositorio è integro assicurando che il suo
contenuto è lo stesso che si trova sulle macchine degli sviluppatori che hanno
creato il tag; mentre i commit firmati rendono praticamente impossibile
ad un malintenzionato di impersonarvi senza avere accesso alle vostre chiavi
PGP.</p>
<section id="configurare-git-per-usare-la-vostra-chiave-pgp">
<h3>Configurare git per usare la vostra chiave PGP<a class="headerlink" href="#configurare-git-per-usare-la-vostra-chiave-pgp" title="Permalink to this heading">¶</a></h3>
<p>Se avete solo una chiave segreta nel vostro portachiavi, allora non avete nulla
da fare in più dato che sarà la vostra chiave di base. Tuttavia, se doveste
avere più chiavi segrete, potete dire a git quale dovrebbe usare (<code class="docutils literal notranslate"><span class="pre">[fpg]</span></code>
è la vostra impronta digitale):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git config --global user.signingKey [fpr]
</pre></div>
</div>
</section>
<section id="come-firmare-i-tag">
<h3>Come firmare i tag<a class="headerlink" href="#come-firmare-i-tag" title="Permalink to this heading">¶</a></h3>
<p>Per creare un tag firmato, passate l'opzione <code class="docutils literal notranslate"><span class="pre">-s</span></code> al comando tag:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git tag -s [tagname]
</pre></div>
</div>
<p>La nostra raccomandazione è quella di firmare sempre i tag git, perché
questo permette agli altri sviluppatori di verificare che il repositorio
git dal quale stanno prendendo il codice non è stato alterato intenzionalmente.</p>
<section id="come-verificare-i-tag-firmati">
<h4>Come verificare i tag firmati<a class="headerlink" href="#come-verificare-i-tag-firmati" title="Permalink to this heading">¶</a></h4>
<p>Per verificare un tag firmato, potete usare il comando <code class="docutils literal notranslate"><span class="pre">verify-tag</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git verify-tag [tagname]
</pre></div>
</div>
<p>Se state prendendo un tag da un fork del repositorio del progetto, git
dovrebbe verificare automaticamente la firma di quello che state prendendo
e vi mostrerà il risultato durante l'operazione di merge:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git pull [url] tags/sometag
</pre></div>
</div>
<p>Il merge conterrà qualcosa di simile:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Merge tag &#39;sometag&#39; of [url]

[Tag message]

# gpg: Signature made [...]
# gpg: Good signature from [...]
</pre></div>
</div>
<p>Se state verificando il tag di qualcun altro, allora dovrete importare
la loro chiave PGP. Fate riferimento alla sezione &quot;<a class="reference internal" href="#it-verify-identities"><span class="std std-ref">Come lavorare con patch firmate</span></a>&quot;
che troverete più avanti.</p>
</section>
<section id="configurare-git-per-firmare-sempre-i-tag-con-annotazione">
<h4>Configurare git per firmare sempre i tag con annotazione<a class="headerlink" href="#configurare-git-per-firmare-sempre-i-tag-con-annotazione" title="Permalink to this heading">¶</a></h4>
<p>Se state creando un tag con annotazione è molto probabile che vogliate
firmarlo. Per imporre a git di firmare sempre un tag con annotazione,
dovete impostare la seguente opzione globale:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git config --global tag.forceSignAnnotated true
</pre></div>
</div>
</section>
</section>
<section id="come-usare-commit-firmati">
<h3>Come usare commit firmati<a class="headerlink" href="#come-usare-commit-firmati" title="Permalink to this heading">¶</a></h3>
<p>Creare dei commit firmati è facile, ma è molto più difficile utilizzarli
nello sviluppo del kernel linux per via del fatto che ci si affida alle
liste di discussione e questo modo di procedere non mantiene le firme PGP
nei commit. In aggiunta, quando si usa <em>rebase</em> nel proprio repositorio
locale per allinearsi al kernel anche le proprie firme PGP verranno scartate.
Per questo motivo, la maggior parte degli sviluppatori del kernel non si
preoccupano troppo di firmare i propri commit ed ignoreranno quelli firmati
che si trovano in altri repositori usati per il proprio lavoro.</p>
<p>Tuttavia, se avete il vostro repositorio di lavoro disponibile al pubblico
su un qualche servizio di hosting git (kernel.org, infradead.org, ozlabs.org,
o altri), allora la raccomandazione è di firmare tutti i vostri commit
anche se gli sviluppatori non ne beneficeranno direttamente.</p>
<p>Vi raccomandiamo di farlo per i seguenti motivi:</p>
<ol class="arabic simple">
<li><p>Se dovesse mai esserci la necessità di fare delle analisi forensi o
tracciare la provenienza di un codice, anche sorgenti mantenuti
esternamente che hanno firme PGP sui commit avranno un certo valore a
questo scopo.</p></li>
<li><p>Se dovesse mai capitarvi di clonare il vostro repositorio locale (per
esempio dopo un danneggiamento del disco), la firma vi permetterà di
verificare l'integrità del repositorio prima di riprendere il lavoro.</p></li>
<li><p>Se qualcuno volesse usare <em>cherry-pick</em> sui vostri commit, allora la firma
permetterà di verificare l'integrità dei commit prima di applicarli.</p></li>
</ol>
<section id="creare-commit-firmati">
<h4>Creare commit firmati<a class="headerlink" href="#creare-commit-firmati" title="Permalink to this heading">¶</a></h4>
<p>Per creare un commit firmato, dovete solamente aggiungere l'opzione <code class="docutils literal notranslate"><span class="pre">-S</span></code>
al comando <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span></code> (si usa la lettera maiuscola per evitare
conflitti con un'altra opzione):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ git commit -S
</pre></div>
</div>
</section>
<section id="configurare-git-per-firmare-sempre-i-commit">
<h4>Configurare git per firmare sempre i commit<a class="headerlink" href="#configurare-git-per-firmare-sempre-i-commit" title="Permalink to this heading">¶</a></h4>
<p>Potete dire a git di firmare sempre i commit:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git config --global commit.gpgSign true
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Assicuratevi di aver configurato <code class="docutils literal notranslate"><span class="pre">gpg-agent</span></code> prima di abilitare
questa opzione.</p>
</div>
</section>
</section>
<section id="come-lavorare-con-patch-firmate">
<span id="it-verify-identities"></span><h3>Come lavorare con patch firmate<a class="headerlink" href="#come-lavorare-con-patch-firmate" title="Permalink to this heading">¶</a></h3>
<p>Esiste la possibilità di usare la vostra chiave PGP per firmare le patch che
invierete alla liste di discussione del kernel. I meccanismi esistenti per la
firma delle email (PGP-Mime o PGP-inline) tendono a causare problemi
nell'attività di revisione del codice. Si suggerisce, invece, di utilizare lo
strumento sviluppato da kernel.org che mette nell'intestazione del messaggio
un'attestazione delle firme crittografiche (tipo DKIM):</p>
<ul class="simple">
<li><p><a class="reference external" href="https://pypi.org/project/patatt/">Patatt Patch Attestation</a></p></li>
</ul>
<section id="installare-e-configurate-patatt">
<h4>Installare e configurate patatt<a class="headerlink" href="#installare-e-configurate-patatt" title="Permalink to this heading">¶</a></h4>
<p>Lo strumento patatt è disponibile per diverse distribuzioni, dunque cercatelo
prima lì. Oppure potete installarlo usano pypi &quot;<code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">patatt</span></code>&quot;</p>
<p>Se avete già configurato git con la vostra chiave PGP (usando
<code class="docutils literal notranslate"><span class="pre">user.signingKey</span></code>), allora patatt non ha bisogno di alcuna configurazione
aggiuntiva. Potete iniziare a firmare le vostre patch aggiungendo un aggancio a
git-send-email nel vostro repositorio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>patatt install-hook
</pre></div>
</div>
<p>Ora, qualsiasi patch che invierete con <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">send-email</span></code> verrà automaticamente
firmata usando la vostra firma crittografica.</p>
</section>
<section id="verificare-le-firme-di-patatt">
<h4>Verificare le firme di patatt<a class="headerlink" href="#verificare-le-firme-di-patatt" title="Permalink to this heading">¶</a></h4>
<p>Se usate <code class="docutils literal notranslate"><span class="pre">b4</span></code> per verificare ed applicare le patch, allora tenterà
automaticamente di verificare tutte le firme DKIM e patatt disponibili. Per
esempio:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ b4 am 20220720205013.890942-1-broonie@kernel.org
[...]
Checking attestation on all messages, may take a moment...
---
  ✓ [PATCH v1 1/3] kselftest/arm64: Correct buffer allocation for SVE Z registers
  ✓ [PATCH v1 2/3] arm64/sve: Document our actual ABI for clearing registers on syscall
  ✓ [PATCH v1 3/3] kselftest/arm64: Enforce actual ABI for SVE syscalls
  ---
  ✓ Signed: openpgp/broonie@kernel.org
  ✓ Signed: DKIM/kernel.org
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lo sviluppo di patatt e b4 è piuttosto attivo. Si consiglia di verificare la
documentazione più recente.</p>
</div>
</section>
</section>
</section>
<section id="come-verificare-l-identita-degli-sviluppatori-del-kernel">
<span id="it-kernel-identities"></span><h2>Come verificare l'identità degli sviluppatori del kernel<a class="headerlink" href="#come-verificare-l-identita-degli-sviluppatori-del-kernel" title="Permalink to this heading">¶</a></h2>
<p>Firmare i tag e i commit è facile, ma come si fa a verificare che la chiave
usata per firmare qualcosa appartenga davvero allo sviluppatore e non ad un
impostore?</p>
<section id="configurare-l-auto-key-retrieval-usando-wkd-e-dane">
<h3>Configurare l'auto-key-retrieval usando WKD e DANE<a class="headerlink" href="#configurare-l-auto-key-retrieval-usando-wkd-e-dane" title="Permalink to this heading">¶</a></h3>
<p>Se non siete ancora in possesso di una vasta collezione di chiavi pubbliche
di altri sviluppatori, allora potreste iniziare il vostro portachiavi
affidandovi ai servizi di auto-scoperta e auto-recupero. GnuPG può affidarsi
ad altre tecnologie di delega della fiducia, come DNSSEC e TLS, per sostenervi
nel caso in cui iniziare una propria rete di fiducia da zero sia troppo
scoraggiante.</p>
<p>Aggiungete il seguente testo al vostro file <code class="docutils literal notranslate"><span class="pre">~/.gnupg/gpg.conf</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>auto-key-locate wkd,dane,local
auto-key-retrieve
</pre></div>
</div>
<p>La <em>DNS-Based Authentication of Named Entities</em> (&quot;DANE&quot;) è un metodo
per la pubblicazione di chiavi pubbliche su DNS e per renderle sicure usando
zone firmate con DNSSEC. Il <em>Web Key Directory</em> (&quot;WKD&quot;) è un metodo
alternativo che usa https a scopo di ricerca. Quando si usano DANE o WKD
per la ricerca di chiavi pubbliche, GnuPG validerà i certificati DNSSEC o TLS
prima di aggiungere al vostro portachiavi locale le eventuali chiavi trovate.</p>
<p>Kernel.org pubblica la WKD per tutti gli sviluppatori che hanno un account
kernel.org. Una volta che avete applicato le modifiche al file <code class="docutils literal notranslate"><span class="pre">gpg.conf</span></code>,
potrete auto-recuperare le chiavi di Linus Torvalds e Greg Kroah-Hartman
(se non le avete già):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ gpg --locate-keys torvalds@kernel.org gregkh@kernel.org
</pre></div>
</div>
<p>Se avete un account kernel.org, al fine di rendere più utile l'uso di WKD
da parte di altri sviluppatori del kernel, dovreste <a class="reference external" href="https://korg.wiki.kernel.org/userdoc/mail#adding_a_kernelorg_uid_to_your_pgp_key">aggiungere alla vostra
chiave lo UID di kernel.org</a>.</p>
</section>
<section id="web-of-trust-wot-o-trust-on-first-use-tofu">
<h3>Web of Trust (WOT) o Trust on First Use (TOFU)<a class="headerlink" href="#web-of-trust-wot-o-trust-on-first-use-tofu" title="Permalink to this heading">¶</a></h3>
<p>PGP incorpora un meccanismo di delega della fiducia conosciuto come
&quot;Web of Trust&quot;. Di base, questo è un tentativo di sostituire la necessità
di un'autorità certificativa centralizzata tipica del mondo HTTPS/TLS.
Invece di avere svariati produttori software che decidono chi dovrebbero
essere le entità di certificazione di cui dovreste fidarvi, PGP lascia
la responsabilità ad ogni singolo utente.</p>
<p>Sfortunatamente, solo poche persone capiscono come funziona la rete di fiducia.
Nonostante sia un importante aspetto della specifica OpenPGP, recentemente
le versioni di GnuPG (2.2 e successive) hanno implementato un meccanisco
alternativo chiamato &quot;Trust on First Use&quot; (TOFU). Potete pensare a TOFU come
&quot;ad un approccio all fidicia simile ad SSH&quot;. In SSH, la prima volta che vi
connettete ad un sistema remoto, l'impronta digitale della chiave viene
registrata e ricordata. Se la chiave dovesse cambiare in futuro, il programma
SSH vi avviserà e si rifiuterà di connettersi, obbligandovi a prendere una
decisione circa la fiducia che riponete nella nuova chiave. In modo simile,
la prima volta che importate la chiave PGP di qualcuno, si assume sia valida.
Se ad un certo punto GnuPG trova un'altra chiave con la stessa identità,
entrambe, la vecchia e la nuova, verranno segnate come invalide e dovrete
verificare manualmente quale tenere.</p>
<p>Vi raccomandiamo di usare il meccanisco TOFU+PGP (che è la nuova configurazione
di base di GnuPG v2). Per farlo, aggiungete (o modificate) l'impostazione
<code class="docutils literal notranslate"><span class="pre">trust-model</span></code> in <code class="docutils literal notranslate"><span class="pre">~/.gnupg/gpg.conf</span></code>:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>trust-model tofu+pgp
</pre></div>
</div>
</section>
<section id="usare-il-repositorio-kernel-org-per-il-web-of-trust">
<h3>Usare il repositorio kernel.org per il web of trust<a class="headerlink" href="#usare-il-repositorio-kernel-org-per-il-web-of-trust" title="Permalink to this heading">¶</a></h3>
<p>Il progetto kernel.org mantiene un repositorio git con le chiavi pubbliche degli sviluppatori in alternativa alla replica dei server di chiavi che negli ultimi anni sono spariti. La documentazione completa su come impostare il repositorio come vostra sorgente di chiavi pubbliche può essere trovato qui:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://korg.docs.kernel.org/pgpkeys.html">Kernel developer PGP Keyring</a></p></li>
</ul>
<p>Se siete uno sviluppatore del kernel, per favore valutate l'idea di inviare la
vostra chiave per l'inclusione in quel portachiavi.</p>
<p>If you are a kernel developer, please consider submitting your key for
inclusion into that keyring.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../_sources/translations/it_IT/process/maintainer-pgp-guide.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>