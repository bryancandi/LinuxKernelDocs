
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>idpf Linux* Base Driver for the Intel(R) Infrastructure Data Path Function &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../_static/alabaster.css" />
    <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
    <script src="../../../../_static/jquery.js"></script>
    <script src="../../../../_static/underscore.js"></script>
    <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../../../_static/doctools.js"></script>
    <script src="../../../../_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Linux Base Driver for Intel(R) Ethernet Network Connection" href="igb.html" />
    <link rel="prev" title="Linux Base Driver for Intel(R) Ethernet Multi-host Controller" href="fm10k.html" />
   
  <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../../index.html">
              <img class="logo" src="../../../../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../../../../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.8.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../process/development-process.html">A guide to the Kernel Development Process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../process/submitting-patches.html">Submitting patches: the essential guide to getting your code into the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../maintainer/index.html">Kernel Maintainer Handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../process/index.html">All development-process docs</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../driver-api/index.html">Driver implementer's API guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../../subsystem-apis.html">Kernel subsystem documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../../../subsystem-apis.html#core-subsystems">Core subsystems</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../subsystem-apis.html#human-interfaces">Human interfaces</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../../../subsystem-apis.html#networking-interfaces">Networking interfaces</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../../../index.html">Networking</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../netlabel/index.html">NetLabel</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../infiniband/index.html">InfiniBand</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../isdn/index.html">ISDN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../mhi/index.html">MHI</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../subsystem-apis.html#storage-interfaces">Storage interfaces</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../locking/index.html">Locking in the kernel</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../process/license-rules.html">Linux kernel licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../dev-tools/testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../fault-injection/index.html">fault-injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../livepatch/index.html">Kernel Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../admin-guide/index.html">The Linux kernel user's and administrator's guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../kbuild/index.html">The kernel build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../tools/index.html">User-space tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../devicetree/index.html">Open Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../arch/index.html">CPU Architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../staging/index.html">Unsorted Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../RAS/ras.html">Reliability, Availability and Serviceability features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../../../../_sources/networking/device_drivers/ethernet/intel/idpf.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="idpf-linux-base-driver-for-the-intel-r-infrastructure-data-path-function">
<h1><a class="toc-backref" href="#id1" role="doc-backlink">idpf Linux* Base Driver for the Intel(R) Infrastructure Data Path Function</a><a class="headerlink" href="#idpf-linux-base-driver-for-the-intel-r-infrastructure-data-path-function" title="Permalink to this heading">¶</a></h1>
<p>Intel idpf Linux driver.
Copyright(C) 2023 Intel Corporation.</p>
<nav class="contents" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#idpf-linux-base-driver-for-the-intel-r-infrastructure-data-path-function" id="id1">idpf Linux* Base Driver for the Intel(R) Infrastructure Data Path Function</a></p>
<ul>
<li><p><a class="reference internal" href="#identifying-your-adapter" id="id2">Identifying Your Adapter</a></p></li>
<li><p><a class="reference internal" href="#additional-features-and-configurations" id="id3">Additional Features and Configurations</a></p>
<ul>
<li><p><a class="reference internal" href="#ethtool" id="id4">ethtool</a></p></li>
<li><p><a class="reference internal" href="#viewing-link-messages" id="id5">Viewing Link Messages</a></p></li>
<li><p><a class="reference internal" href="#jumbo-frames" id="id6">Jumbo Frames</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#performance-optimization" id="id7">Performance Optimization</a></p>
<ul>
<li><p><a class="reference internal" href="#interrupt-rate-limiting" id="id8">Interrupt Rate Limiting</a></p></li>
<li><p><a class="reference internal" href="#virtualized-environments" id="id9">Virtualized Environments</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#support" id="id10">Support</a></p></li>
<li><p><a class="reference internal" href="#trademarks" id="id11">Trademarks</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>The idpf driver serves as both the Physical Function (PF) and Virtual Function
(VF) driver for the Intel(R) Infrastructure Data Path Function.</p>
<p>Driver information can be obtained using ethtool, lspci, and ip.</p>
<p>For questions related to hardware requirements, refer to the documentation
supplied with your Intel adapter. All hardware requirements listed apply to use
with Linux.</p>
<section id="identifying-your-adapter">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Identifying Your Adapter</a><a class="headerlink" href="#identifying-your-adapter" title="Permalink to this heading">¶</a></h2>
<p>For information on how to identify your adapter, and for the latest Intel
network drivers, refer to the Intel Support website:
<a class="reference external" href="http://www.intel.com/support">http://www.intel.com/support</a></p>
</section>
<section id="additional-features-and-configurations">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Additional Features and Configurations</a><a class="headerlink" href="#additional-features-and-configurations" title="Permalink to this heading">¶</a></h2>
<section id="ethtool">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">ethtool</a><a class="headerlink" href="#ethtool" title="Permalink to this heading">¶</a></h3>
<p>The driver utilizes the ethtool interface for driver configuration and
diagnostics, as well as displaying statistical information. The latest ethtool
version is required for this functionality. If you don't have one yet, you can
obtain it at:
<a class="reference external" href="https://kernel.org/pub/software/network/ethtool/">https://kernel.org/pub/software/network/ethtool/</a></p>
</section>
<section id="viewing-link-messages">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Viewing Link Messages</a><a class="headerlink" href="#viewing-link-messages" title="Permalink to this heading">¶</a></h3>
<p>Link messages will not be displayed to the console if the distribution is
restricting system messages. In order to see network driver link messages on
your console, set dmesg to eight by entering the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># dmesg -n 8
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This setting is not saved across reboots.</p>
</div>
</section>
<section id="jumbo-frames">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Jumbo Frames</a><a class="headerlink" href="#jumbo-frames" title="Permalink to this heading">¶</a></h3>
<p>Jumbo Frames support is enabled by changing the Maximum Transmission Unit (MTU)
to a value larger than the default value of 1500.</p>
<p>Use the ip command to increase the MTU size. For example, enter the following
where &lt;ethX&gt; is the interface number:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ip link set mtu 9000 dev &lt;ethX&gt;
# ip link set up dev &lt;ethX&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The maximum MTU setting for jumbo frames is 9706. This corresponds to the
maximum jumbo frame size of 9728 bytes.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This driver will attempt to use multiple page sized buffers to receive
each jumbo packet. This should help to avoid buffer starvation issues when
allocating receive packets.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Packet loss may have a greater impact on throughput when you use jumbo
frames. If you observe a drop in performance after enabling jumbo frames,
enabling flow control may mitigate the issue.</p>
</div>
</section>
</section>
<section id="performance-optimization">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">Performance Optimization</a><a class="headerlink" href="#performance-optimization" title="Permalink to this heading">¶</a></h2>
<p>Driver defaults are meant to fit a wide variety of workloads, but if further
optimization is required, we recommend experimenting with the following
settings.</p>
<section id="interrupt-rate-limiting">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Interrupt Rate Limiting</a><a class="headerlink" href="#interrupt-rate-limiting" title="Permalink to this heading">¶</a></h3>
<p>This driver supports an adaptive interrupt throttle rate (ITR) mechanism that
is tuned for general workloads. The user can customize the interrupt rate
control for specific workloads, via ethtool, adjusting the number of
microseconds between interrupts.</p>
<p>To set the interrupt rate manually, you must disable adaptive mode:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C &lt;ethX&gt; adaptive-rx off adaptive-tx off
</pre></div>
</div>
<dl>
<dt>For lower CPU utilization:</dt><dd><ul>
<li><p>Disable adaptive ITR and lower Rx and Tx interrupts. The examples below
affect every queue of the specified interface.</p></li>
<li><p>Setting rx-usecs and tx-usecs to 80 will limit interrupts to about
12,500 interrupts per second per queue:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C &lt;ethX&gt; adaptive-rx off adaptive-tx off rx-usecs 80
tx-usecs 80
</pre></div>
</div>
</li>
</ul>
</dd>
<dt>For reduced latency:</dt><dd><ul>
<li><p>Disable adaptive ITR and ITR by setting rx-usecs and tx-usecs to 0
using ethtool:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -C &lt;ethX&gt; adaptive-rx off adaptive-tx off rx-usecs 0
tx-usecs 0
</pre></div>
</div>
</li>
</ul>
</dd>
<dt>Per-queue interrupt rate settings:</dt><dd><ul>
<li><p>The following examples are for queues 1 and 3, but you can adjust other
queues.</p></li>
<li><p>To disable Rx adaptive ITR and set static Rx ITR to 10 microseconds or
about 100,000 interrupts/second, for queues 1 and 3:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool --per-queue &lt;ethX&gt; queue_mask 0xa --coalesce adaptive-rx off
rx-usecs 10
</pre></div>
</div>
</li>
<li><p>To show the current coalesce settings for queues 1 and 3:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool --per-queue &lt;ethX&gt; queue_mask 0xa --show-coalesce
</pre></div>
</div>
</li>
</ul>
</dd>
</dl>
</section>
<section id="virtualized-environments">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Virtualized Environments</a><a class="headerlink" href="#virtualized-environments" title="Permalink to this heading">¶</a></h3>
<p>In addition to the other suggestions in this section, the following may be
helpful to optimize performance in VMs.</p>
<blockquote>
<div><ul>
<li><p>Using the appropriate mechanism (vcpupin) in the VM, pin the CPUs to
individual LCPUs, making sure to use a set of CPUs included in the
device's local_cpulist: /sys/class/net/&lt;ethX&gt;/device/local_cpulist.</p></li>
<li><p>Configure as many Rx/Tx queues in the VM as available. (See the idpf driver
documentation for the number of queues supported.) For example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># ethtool -L &lt;virt_interface&gt; rx &lt;max&gt; tx &lt;max&gt;
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</section>
</section>
<section id="support">
<h2><a class="toc-backref" href="#id10" role="doc-backlink">Support</a><a class="headerlink" href="#support" title="Permalink to this heading">¶</a></h2>
<p>For general information, go to the Intel support website at:
<a class="reference external" href="http://www.intel.com/support/">http://www.intel.com/support/</a></p>
<p>If an issue is identified with the released source code on a supported kernel
with a supported adapter, email the specific information related to the issue
to <a class="reference external" href="mailto:intel-wired-lan&#37;&#52;&#48;lists&#46;osuosl&#46;org">intel-wired-lan<span>&#64;</span>lists<span>&#46;</span>osuosl<span>&#46;</span>org</a>.</p>
</section>
<section id="trademarks">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Trademarks</a><a class="headerlink" href="#trademarks" title="Permalink to this heading">¶</a></h2>
<p>Intel is a trademark or registered trademark of Intel Corporation or its
subsidiaries in the United States and/or other countries.</p>
<ul class="simple">
<li><p>Other names and brands may be claimed as the property of others.</p></li>
</ul>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.3.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../../../../_sources/networking/device_drivers/ethernet/intel/idpf.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>