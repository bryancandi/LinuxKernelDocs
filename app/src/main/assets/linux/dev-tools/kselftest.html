<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Linux Kernel Selftests &#8212; The Linux Kernel  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=a152c8ac" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="KUnit - Linux Kernel Unit Testing" href="kunit/index.html" />
    <link rel="prev" title="Using kgdb, kdb and the kernel debugger internals" href="kgdb.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/logo.svg" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">The Linux Kernel</a></h1>



<p class="blurb">6.11.0</p>







<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script><!-- SPDX-License-Identifier: GPL-2.0 -->

<p>
<h3 class="kernel-toc-contents">Contents</h3>
<input type="checkbox" class="kernel-toc-toggle" id = "kernel-toc-toggle" checked>
<label class="kernel-toc-title" for="kernel-toc-toggle"></label>

<div class="kerneltoc" id="kerneltoc">
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/development-process.html">Development process</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/submitting-patches.html">Submitting patches</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/code-of-conduct.html">Code of conduct</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Maintainer handbook</a></li>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">All development-process docs</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">Driver APIs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../subsystem-apis.html">Subsystems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locking/index.html">Locking</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../process/license-rules.html">Licensing rules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">Writing documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Development tools</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="testing-overview.html">Kernel Testing Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="checkpatch.html">Checkpatch</a></li>
<li class="toctree-l2"><a class="reference internal" href="clang-format.html">clang-format</a></li>
<li class="toctree-l2"><a class="reference internal" href="coccinelle.html">Coccinelle</a></li>
<li class="toctree-l2"><a class="reference internal" href="sparse.html">Sparse</a></li>
<li class="toctree-l2"><a class="reference internal" href="kcov.html">KCOV: code coverage for fuzzing</a></li>
<li class="toctree-l2"><a class="reference internal" href="gcov.html">Using gcov with the Linux kernel</a></li>
<li class="toctree-l2"><a class="reference internal" href="kasan.html">Kernel Address Sanitizer (KASAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="kmsan.html">Kernel Memory Sanitizer (KMSAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="ubsan.html">Undefined Behavior Sanitizer - UBSAN</a></li>
<li class="toctree-l2"><a class="reference internal" href="kmemleak.html">Kernel Memory Leak Detector</a></li>
<li class="toctree-l2"><a class="reference internal" href="kcsan.html">Kernel Concurrency Sanitizer (KCSAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="kfence.html">Kernel Electric-Fence (KFENCE)</a></li>
<li class="toctree-l2"><a class="reference internal" href="gdb-kernel-debugging.html">Debugging kernel and modules via gdb</a></li>
<li class="toctree-l2"><a class="reference internal" href="kgdb.html">Using kgdb, kdb and the kernel debugger internals</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Linux Kernel Selftests</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#running-the-selftests-hotplug-tests-are-run-in-limited-mode">Running the selftests (hotplug tests are run in limited mode)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-a-subset-of-selftests">Running a subset of selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-the-full-range-hotplug-selftests">Running the full range hotplug selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#install-selftests">Install selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-installed-selftests">Running installed selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timeout-for-selftests">Timeout for selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packaging-selftests">Packaging selftests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contributing-new-tests">Contributing new tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#contributing-new-tests-details">Contributing new tests (details)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-module">Test Module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-harness">Test Harness</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="kunit/index.html">KUnit - Linux Kernel Unit Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="ktap.html">The Kernel Test Anything Protocol (KTAP), version 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="checkuapi.html">UAPI Checker</a></li>
<li class="toctree-l2"><a class="reference internal" href="gpio-sloppy-logic-analyzer.html">Linux Kernel GPIO based sloppy logic analyzer</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing-overview.html">Testing guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Hacking guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Tracing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fault-injection/index.html">Fault injection</a></li>
<li class="toctree-l1"><a class="reference internal" href="../livepatch/index.html">Livepatching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rust/index.html">Rust</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kbuild/index.html">Build system</a></li>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/reporting-issues.html">Reporting issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/index.html">Userspace tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">Userspace API</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">Firmware</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devicetree/index.html">Firmware and Devicetree</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../arch/index.html">CPU architectures</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../staging/index.html">Unsorted documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

</div>

<script type="text/javascript"> <!--
  var sbar = document.getElementsByClassName("sphinxsidebar")[0];
  let currents = document.getElementsByClassName("current")
  if (currents.length) {
    sbar.scrollTop = currents[currents.length - 1].offsetTop;
  }
  --> </script>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/dev-tools/kselftest.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <!-- SPDX-License-Identifier: GPL-2.0 -->
<!-- Copyright © 2023, Oracle and/or its affiliates. -->


<section id="linux-kernel-selftests">
<h1>Linux Kernel Selftests<a class="headerlink" href="#linux-kernel-selftests" title="Link to this heading">¶</a></h1>
<p>The kernel contains a set of “self tests” under the tools/testing/selftests/
directory. These are intended to be small tests to exercise individual code
paths in the kernel. Tests are intended to be run after building, installing
and booting a kernel.</p>
<p>Kselftest from mainline can be run on older stable kernels. Running tests
from mainline offers the best coverage. Several test rings run mainline
kselftest suite on stable releases. The reason is that when a new test
gets added to test existing code to regression test a bug, we should be
able to run that test on an older kernel. Hence, it is important to keep
code that can still test an older kernel and make sure it skips the test
gracefully on newer releases.</p>
<p>You can find additional information on Kselftest framework, how to
write new tests using the framework on Kselftest wiki:</p>
<p><a class="reference external" href="https://kselftest.wiki.kernel.org/">https://kselftest.wiki.kernel.org/</a></p>
<p>On some systems, hot-plug tests could hang forever waiting for cpu and
memory to be ready to be offlined. A special hot-plug target is created
to run the full range of hot-plug tests. In default mode, hot-plug tests run
in safe mode with a limited scope. In limited mode, cpu-hotplug test is
run on a single cpu as opposed to all hotplug capable cpus, and memory
hotplug test is run on 2% of hotplug capable memory instead of 10%.</p>
<p>kselftest runs as a userspace process.  Tests that can be written/run in
userspace may wish to use the <a class="reference internal" href="#test-harness">Test Harness</a>.  Tests that need to be
run in kernel space may wish to use a <a class="reference internal" href="#test-module">Test Module</a>.</p>
<section id="running-the-selftests-hotplug-tests-are-run-in-limited-mode">
<h2>Running the selftests (hotplug tests are run in limited mode)<a class="headerlink" href="#running-the-selftests-hotplug-tests-are-run-in-limited-mode" title="Link to this heading">¶</a></h2>
<p>To build the tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make headers
$ make -C tools/testing/selftests
</pre></div>
</div>
<p>To run the tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests run_tests
</pre></div>
</div>
<p>To build and run the tests with a single command, use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make kselftest
</pre></div>
</div>
<p>Note that some tests will require root privileges.</p>
<p>Kselftest supports saving output files in a separate directory and then
running tests. To locate output files in a separate directory two syntaxes
are supported. In both cases the working directory must be the root of the
kernel src. This is applicable to “Running a subset of selftests” section
below.</p>
<p>To build, save output files in a separate directory with O=</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make O=/tmp/kselftest kselftest
</pre></div>
</div>
<p>To build, save output files in a separate directory with KBUILD_OUTPUT</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export KBUILD_OUTPUT=/tmp/kselftest; make kselftest
</pre></div>
</div>
<p>The O= assignment takes precedence over the KBUILD_OUTPUT environment
variable.</p>
<p>The above commands by default run the tests and print full pass/fail report.
Kselftest supports “summary” option to make it easier to understand the test
results. Please find the detailed individual test results for each test in
/tmp/testname file(s) when summary option is specified. This is applicable
to “Running a subset of selftests” section below.</p>
<p>To run kselftest with summary option enabled</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make summary=1 kselftest
</pre></div>
</div>
</section>
<section id="running-a-subset-of-selftests">
<h2>Running a subset of selftests<a class="headerlink" href="#running-a-subset-of-selftests" title="Link to this heading">¶</a></h2>
<p>You can use the “TARGETS” variable on the make command line to specify
single test to run, or a list of tests to run.</p>
<p>To run only tests targeted for a single subsystem:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests TARGETS=ptrace run_tests
</pre></div>
</div>
<p>You can specify multiple tests to build and run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$  make TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>To build, save output files in a separate directory with O=</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make O=/tmp/kselftest TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>To build, save output files in a separate directory with KBUILD_OUTPUT</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ export KBUILD_OUTPUT=/tmp/kselftest; make TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>Additionally you can use the “SKIP_TARGETS” variable on the make command
line to specify one or more targets to exclude from the TARGETS list.</p>
<p>To run all tests but a single subsystem:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests SKIP_TARGETS=ptrace run_tests
</pre></div>
</div>
<p>You can specify multiple tests to skip:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$  make SKIP_TARGETS=&quot;size timers&quot; kselftest
</pre></div>
</div>
<p>You can also specify a restricted list of tests to run together with a
dedicated skiplist:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$  make TARGETS=&quot;breakpoints size timers&quot; SKIP_TARGETS=size kselftest
</pre></div>
</div>
<p>See the top-level tools/testing/selftests/Makefile for the list of all
possible targets.</p>
</section>
<section id="running-the-full-range-hotplug-selftests">
<h2>Running the full range hotplug selftests<a class="headerlink" href="#running-the-full-range-hotplug-selftests" title="Link to this heading">¶</a></h2>
<p>To build the hotplug tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests hotplug
</pre></div>
</div>
<p>To run the hotplug tests:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests run_hotplug
</pre></div>
</div>
<p>Note that some tests will require root privileges.</p>
</section>
<section id="install-selftests">
<h2>Install selftests<a class="headerlink" href="#install-selftests" title="Link to this heading">¶</a></h2>
<p>You can use the “install” target of “make” (which calls the <cite>kselftest_install.sh</cite>
tool) to install selftests in the default location (<cite>tools/testing/selftests/kselftest_install</cite>),
or in a user specified location via the <cite>INSTALL_PATH</cite> “make” variable.</p>
<p>To install selftests in default location:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests install
</pre></div>
</div>
<p>To install selftests in a user specified location:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests install INSTALL_PATH=/some/other/path
</pre></div>
</div>
</section>
<section id="running-installed-selftests">
<h2>Running installed selftests<a class="headerlink" href="#running-installed-selftests" title="Link to this heading">¶</a></h2>
<p>Found in the install directory, as well as in the Kselftest tarball,
is a script named <cite>run_kselftest.sh</cite> to run the tests.</p>
<p>You can simply do the following to run the installed Kselftests. Please
note some tests will require root privileges:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ cd kselftest_install
$ ./run_kselftest.sh
</pre></div>
</div>
<p>To see the list of available tests, the <cite>-l</cite> option can be used:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./run_kselftest.sh -l
</pre></div>
</div>
<p>The <cite>-c</cite> option can be used to run all the tests from a test collection, or
the <cite>-t</cite> option for specific single tests. Either can be used multiple times:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./run_kselftest.sh -c size -c seccomp -t timers:posix_timers -t timer:nanosleep
</pre></div>
</div>
<p>For other features see the script usage output, seen with the <cite>-h</cite> option.</p>
</section>
<section id="timeout-for-selftests">
<h2>Timeout for selftests<a class="headerlink" href="#timeout-for-selftests" title="Link to this heading">¶</a></h2>
<p>Selftests are designed to be quick and so a default timeout is used of 45
seconds for each test. Tests can override the default timeout by adding
a settings file in their directory and set a timeout variable there to the
configured a desired upper timeout for the test. Only a few tests override
the timeout with a value higher than 45 seconds, selftests strives to keep
it that way. Timeouts in selftests are not considered fatal because the
system under which a test runs may change and this can also modify the
expected time it takes to run a test. If you have control over the systems
which will run the tests you can configure a test runner on those systems to
use a greater or lower timeout on the command line as with the <cite>-o</cite> or
the <cite>--override-timeout</cite> argument. For example to use 165 seconds instead
one would use:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ ./run_kselftest.sh --override-timeout 165
</pre></div>
</div>
<p>You can look at the TAP output to see if you ran into the timeout. Test
runners which know a test must run under a specific time can then optionally
treat these timeouts then as fatal.</p>
</section>
<section id="packaging-selftests">
<h2>Packaging selftests<a class="headerlink" href="#packaging-selftests" title="Link to this heading">¶</a></h2>
<p>In some cases packaging is desired, such as when tests need to run on a
different system. To package selftests, run:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests gen_tar
</pre></div>
</div>
<p>This generates a tarball in the <cite>INSTALL_PATH/kselftest-packages</cite> directory. By
default, <cite>.gz</cite> format is used. The tar compression format can be overridden by
specifying a <cite>FORMAT</cite> make variable. Any value recognized by <a class="reference external" href="https://www.gnu.org/software/tar/manual/html_node/gzip.html#auto_002dcompress">tar’s auto-compress</a>
option is supported, such as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests gen_tar FORMAT=.xz
</pre></div>
</div>
<p><cite>make gen_tar</cite> invokes <cite>make install</cite> so you can use it to package a subset of
tests by using variables specified in <a class="reference internal" href="#running-a-subset-of-selftests">Running a subset of selftests</a>
section:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ make -C tools/testing/selftests gen_tar TARGETS=&quot;size&quot; FORMAT=.xz
</pre></div>
</div>
</section>
<section id="contributing-new-tests">
<h2>Contributing new tests<a class="headerlink" href="#contributing-new-tests" title="Link to this heading">¶</a></h2>
<p>In general, the rules for selftests are</p>
<blockquote>
<div><ul class="simple">
<li><p>Do as much as you can if you’re not root;</p></li>
<li><p>Don’t take too long;</p></li>
<li><p>Don’t break the build on any architecture, and</p></li>
<li><p>Don’t cause the top-level “make run_tests” to fail if your feature is
unconfigured.</p></li>
<li><p>The output of tests must conform to the TAP standard to ensure high
testing quality and to capture failures/errors with specific details.
The kselftest.h and kselftest_harness.h headers provide wrappers for
outputting test results. These wrappers should be used for pass,
fail, exit, and skip messages. CI systems can easily parse TAP output
messages to detect test results.</p></li>
</ul>
</div></blockquote>
</section>
<section id="contributing-new-tests-details">
<h2>Contributing new tests (details)<a class="headerlink" href="#contributing-new-tests-details" title="Link to this heading">¶</a></h2>
<blockquote>
<div><ul>
<li><p>In your Makefile, use facilities from lib.mk by including it instead of
reinventing the wheel. Specify flags and binaries generation flags on
need basis before including lib.mk.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CFLAGS = $(KHDR_INCLUDES)
TEST_GEN_PROGS := close_range_test
include ../lib.mk
</pre></div>
</div>
</li>
<li><p>Use TEST_GEN_XXX if such binaries or files are generated during
compiling.</p>
<p>TEST_PROGS, TEST_GEN_PROGS mean it is the executable tested by
default.</p>
<p>TEST_GEN_MODS_DIR should be used by tests that require modules to be built
before the test starts. The variable will contain the name of the directory
containing the modules.</p>
<p>TEST_CUSTOM_PROGS should be used by tests that require custom build
rules and prevent common build rule use.</p>
<p>TEST_PROGS are for test shell scripts. Please ensure shell script has
its exec bit set. Otherwise, lib.mk run_tests will generate a warning.</p>
<p>TEST_CUSTOM_PROGS and TEST_PROGS will be run by common run_tests.</p>
<p>TEST_PROGS_EXTENDED, TEST_GEN_PROGS_EXTENDED mean it is the
executable which is not tested by default.</p>
<p>TEST_FILES, TEST_GEN_FILES mean it is the file which is used by
test.</p>
<p>TEST_INCLUDES is similar to TEST_FILES, it lists files which should be
included when exporting or installing the tests, with the following
differences:</p>
<blockquote>
<div><ul class="simple">
<li><p>symlinks to files in other directories are preserved</p></li>
<li><p>the part of paths below tools/testing/selftests/ is preserved when
copying the files to the output directory</p></li>
</ul>
</div></blockquote>
<p>TEST_INCLUDES is meant to list dependencies located in other directories of
the selftests hierarchy.</p>
</li>
<li><p>First use the headers inside the kernel source and/or git repo, and then the
system headers.  Headers for the kernel release as opposed to headers
installed by the distro on the system should be the primary focus to be able
to find regressions. Use KHDR_INCLUDES in Makefile to include headers from
the kernel source.</p></li>
<li><p>If a test needs specific kernel config options enabled, add a config file in
the test directory to enable them.</p>
<p>e.g: tools/testing/selftests/android/config</p>
</li>
<li><p>Create a .gitignore file inside test directory and add all generated objects
in it.</p></li>
<li><p>Add new test name in TARGETS in selftests/Makefile:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>TARGETS += android
</pre></div>
</div>
</li>
<li><p>All changes should pass:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>kselftest-{all,install,clean,gen_tar}
kselftest-{all,install,clean,gen_tar} O=abo_path
kselftest-{all,install,clean,gen_tar} O=rel_path
make -C tools/testing/selftests {all,install,clean,gen_tar}
make -C tools/testing/selftests {all,install,clean,gen_tar} O=abs_path
make -C tools/testing/selftests {all,install,clean,gen_tar} O=rel_path
</pre></div>
</div>
</li>
</ul>
</div></blockquote>
</section>
<section id="test-module">
<h2>Test Module<a class="headerlink" href="#test-module" title="Link to this heading">¶</a></h2>
<p>Kselftest tests the kernel from userspace.  Sometimes things need
testing from within the kernel, one method of doing this is to create a
test module.  We can tie the module into the kselftest framework by
using a shell script test runner.  <code class="docutils literal notranslate"><span class="pre">kselftest/module.sh</span></code> is designed
to facilitate this process.  There is also a header file provided to
assist writing kernel modules that are for use with kselftest:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/kselftest_module.h</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/kselftest/module.sh</span></code></p></li>
</ul>
<p>Note that test modules should taint the kernel with TAINT_TEST. This will
happen automatically for modules which are in the <code class="docutils literal notranslate"><span class="pre">tools/testing/</span></code>
directory, or for modules which use the <code class="docutils literal notranslate"><span class="pre">kselftest_module.h</span></code> header above.
Otherwise, you’ll need to add <code class="docutils literal notranslate"><span class="pre">MODULE_INFO(test,</span> <span class="pre">&quot;Y&quot;)</span></code> to your module
source. selftests which do not load modules typically should not taint the
kernel, but in cases where a non-test module is loaded, TEST_TAINT can be
applied from userspace by writing to <code class="docutils literal notranslate"><span class="pre">/proc/sys/kernel/tainted</span></code>.</p>
<section id="how-to-use">
<h3>How to use<a class="headerlink" href="#how-to-use" title="Link to this heading">¶</a></h3>
<p>Here we show the typical steps to create a test module and tie it into
kselftest.  We use kselftests for lib/ as an example.</p>
<ol class="arabic simple">
<li><p>Create the test module</p></li>
<li><p>Create the test script that will run (load/unload) the module
e.g. <code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/lib/printf.sh</span></code></p></li>
<li><p>Add line to config file e.g. <code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/lib/config</span></code></p></li>
<li><p>Add test script to makefile  e.g. <code class="docutils literal notranslate"><span class="pre">tools/testing/selftests/lib/Makefile</span></code></p></li>
<li><p>Verify it works:</p></li>
</ol>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="c1"># Assumes you have booted a fresh build of this kernel tree</span>
<span class="nb">cd</span><span class="w"> </span>/path/to/linux/tree
make<span class="w"> </span>kselftest-merge
make<span class="w"> </span>modules
sudo<span class="w"> </span>make<span class="w"> </span>modules_install
make<span class="w"> </span><span class="nv">TARGETS</span><span class="o">=</span>lib<span class="w"> </span>kselftest
</pre></div>
</div>
</section>
<section id="example-module">
<h3>Example Module<a class="headerlink" href="#example-module" title="Link to this heading">¶</a></h3>
<p>A bare bones test module might look like this:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// SPDX-License-Identifier: GPL-2.0+</span>

<span class="cp">#define pr_fmt(fmt) KBUILD_MODNAME &quot;: &quot; fmt</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../tools/testing/selftests/kselftest_module.h&quot;</span>

<span class="n">KSTM_MODULE_GLOBALS</span><span class="p">();</span>

<span class="cm">/*</span>
<span class="cm"> * Kernel module for testing the foobinator</span>
<span class="cm"> */</span>

<span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">test_function</span><span class="p">()</span>
<span class="p">{</span>
<span class="w">        </span><span class="p">...</span>
<span class="p">}</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">__init</span><span class="w"> </span><span class="nf">selftest</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">        </span><span class="n">KSTM_CHECK_ZERO</span><span class="p">(</span><span class="n">do_test_case</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">KSTM_MODULE_LOADERS</span><span class="p">(</span><span class="n">test_foo</span><span class="p">);</span>
<span class="n">MODULE_AUTHOR</span><span class="p">(</span><span class="s">&quot;John Developer &lt;jd@fooman.org&gt;&quot;</span><span class="p">);</span>
<span class="n">MODULE_LICENSE</span><span class="p">(</span><span class="s">&quot;GPL&quot;</span><span class="p">);</span>
<span class="n">MODULE_INFO</span><span class="p">(</span><span class="n">test</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Y&quot;</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="example-test-script">
<h3>Example test script<a class="headerlink" href="#example-test-script" title="Link to this heading">¶</a></h3>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1"># SPDX-License-Identifier: GPL-2.0+</span>
<span class="k">$(</span>dirname<span class="w"> </span><span class="nv">$0</span><span class="k">)</span>/../kselftest/module.sh<span class="w"> </span><span class="s2">&quot;foo&quot;</span><span class="w"> </span>test_foo
</pre></div>
</div>
</section>
</section>
<section id="test-harness">
<h2>Test Harness<a class="headerlink" href="#test-harness" title="Link to this heading">¶</a></h2>
<p>The kselftest_harness.h file contains useful helpers to build tests.  The
test harness is for userspace testing, for kernel space testing see <a class="reference internal" href="#test-module">Test
Module</a> above.</p>
<p>The tests from tools/testing/selftests/seccomp/seccomp_bpf.c can be used as
example.</p>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h3>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../kselftest_harness.h&quot;</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">standalone_test</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">do_some_stuff</span><span class="p">;</span>
<span class="w">  </span><span class="n">EXPECT_GT</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="n">stuff</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="n">stuff_state_t</span><span class="w"> </span><span class="n">state</span><span class="p">;</span>
<span class="w">     </span><span class="n">enumerate_stuff_state</span><span class="p">(</span><span class="o">&amp;</span><span class="n">state</span><span class="p">);</span>
<span class="w">     </span><span class="n">TH_LOG</span><span class="p">(</span><span class="s">&quot;expectation failed with state: %s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="n">msg</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">more_stuff</span><span class="p">;</span>
<span class="w">  </span><span class="n">ASSERT_NE</span><span class="p">(</span><span class="n">some_stuff</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="n">TH_LOG</span><span class="p">(</span><span class="s">&quot;how did it happen?!&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">last_stuff</span><span class="p">;</span>
<span class="w">  </span><span class="n">EXPECT_EQ</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">last_stuff</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">FIXTURE</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">mytype_t</span><span class="w"> </span><span class="o">*</span><span class="n">data</span><span class="p">;</span>
<span class="w">  </span><span class="kt">int</span><span class="w"> </span><span class="n">awesomeness_level</span><span class="p">;</span>
<span class="p">};</span>
<span class="n">FIXTURE_SETUP</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mytype_new</span><span class="p">();</span>
<span class="w">  </span><span class="n">ASSERT_NE</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">FIXTURE_TEARDOWN</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">mytype_free</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">TEST_F</span><span class="p">(</span><span class="n">my_fixture</span><span class="p">,</span><span class="w"> </span><span class="n">data_is_good</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">EXPECT_EQ</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">is_my_data_good</span><span class="p">(</span><span class="n">self</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_HARNESS_MAIN</span>
</pre></div>
</div>
</section>
<section id="helpers">
<h3>Helpers<a class="headerlink" href="#helpers" title="Link to this heading">¶</a></h3>
<dl class="c macro">
<dt class="sig sig-object c" id="c.TH_LOG">
<span class="sig-name descname"><span class="n"><span class="pre">TH_LOG</span></span></span><a class="headerlink" href="#c.TH_LOG" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">TH_LOG</span> <span class="pre">(fmt,</span> <span class="pre">...)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fmt</span></code></dt><dd><p>format string</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">...</span></code></dt><dd><p>optional arguments</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TH_LOG</span><span class="p">(</span><span class="n">format</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span>
</pre></div>
</div>
<p>Optional debug logging function available for use in tests.
Logging may be enabled or disabled by defining TH_LOG_ENABLED.
E.g., #define TH_LOG_ENABLED 1</p>
<p>If no definition is provided, logging is enabled by default.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.TEST">
<span class="sig-name descname"><span class="n"><span class="pre">TEST</span></span></span><a class="headerlink" href="#c.TEST" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">TEST</span> <span class="pre">(test_name)</span></code></p>
<blockquote>
<div><p>Defines the test function and creates the registration stub</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">test_name</span></code></dt><dd><p>test name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Defines a test by name.
Names must be unique and tests must not be run in parallel.  The
implementation containing block is a function and scoping should be treated
as such.  Returning early may be performed with a bare “return;” statement.</p>
<p>EXPECT_* and ASSERT_* are valid in a <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> { } context.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.TEST_SIGNAL">
<span class="sig-name descname"><span class="n"><span class="pre">TEST_SIGNAL</span></span></span><a class="headerlink" href="#c.TEST_SIGNAL" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">TEST_SIGNAL</span> <span class="pre">(test_name,</span> <span class="pre">signal)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">test_name</span></code></dt><dd><p>test name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">signal</span></code></dt><dd><p>signal number</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST_SIGNAL</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">signal</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Defines a test by name and the expected term signal.
Names must be unique and tests must not be run in parallel.  The
implementation containing block is a function and scoping should be treated
as such.  Returning early may be performed with a bare “return;” statement.</p>
<p>EXPECT_* and ASSERT_* are valid in a <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> { } context.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.FIXTURE_DATA">
<span class="sig-name descname"><span class="n"><span class="pre">FIXTURE_DATA</span></span></span><a class="headerlink" href="#c.FIXTURE_DATA" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">FIXTURE_DATA</span> <span class="pre">(datatype_name)</span></code></p>
<blockquote>
<div><p>Wraps the struct name so we have one less argument to pass around</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">datatype_name</span></code></dt><dd><p>datatype name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_DATA</span><span class="p">(</span><span class="n">datatype_name</span><span class="p">)</span>
</pre></div>
</div>
<p>Almost always, you want just <a class="reference internal" href="#c.FIXTURE" title="FIXTURE"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE()</span></code></a> instead (see below).
This call may be used when the type of the fixture data
is needed.  In general, this should not be needed unless
the <em>self</em> is being passed to a helper directly.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.FIXTURE">
<span class="sig-name descname"><span class="n"><span class="pre">FIXTURE</span></span></span><a class="headerlink" href="#c.FIXTURE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">FIXTURE</span> <span class="pre">(fixture_name)</span></code></p>
<blockquote>
<div><p>Called once per fixture to setup the data and register</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt><dd><p>fixture name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE</span><span class="p">(</span><span class="n">fixture_name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">type</span><span class="w"> </span><span class="n">property1</span><span class="p">;</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Defines the data provided to <a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST_F()</span></code></a>-defined tests as <em>self</em>.  It should be
populated and cleaned up using <a class="reference internal" href="#c.FIXTURE_SETUP" title="FIXTURE_SETUP"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_SETUP()</span></code></a> and <a class="reference internal" href="#c.FIXTURE_TEARDOWN" title="FIXTURE_TEARDOWN"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_TEARDOWN()</span></code></a>.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.FIXTURE_SETUP">
<span class="sig-name descname"><span class="n"><span class="pre">FIXTURE_SETUP</span></span></span><a class="headerlink" href="#c.FIXTURE_SETUP" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">FIXTURE_SETUP</span> <span class="pre">(fixture_name)</span></code></p>
<blockquote>
<div><p>Prepares the setup function for the fixture. <em>_metadata</em> is included so that EXPECT_*, ASSERT_* etc. work correctly.</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt><dd><p>fixture name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_SETUP</span><span class="p">(</span><span class="n">fixture_name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Populates the required “setup” function for a fixture.  An instance of the
datatype defined with <a class="reference internal" href="#c.FIXTURE_DATA" title="FIXTURE_DATA"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_DATA()</span></code></a> will be exposed as <em>self</em> for the
implementation.</p>
<p>ASSERT_* are valid for use in this context and will prempt the execution
of any dependent fixture tests.</p>
<p>A bare “return;” statement may be used to return early.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.FIXTURE_TEARDOWN">
<span class="sig-name descname"><span class="n"><span class="pre">FIXTURE_TEARDOWN</span></span></span><a class="headerlink" href="#c.FIXTURE_TEARDOWN" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">FIXTURE_TEARDOWN</span> <span class="pre">(fixture_name)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt><dd><p>fixture name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p><em>_metadata</em> is included so that EXPECT_*, ASSERT_* etc. work correctly.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_TEARDOWN</span><span class="p">(</span><span class="n">fixture_name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Populates the required “teardown” function for a fixture.  An instance of the
datatype defined with <a class="reference internal" href="#c.FIXTURE_DATA" title="FIXTURE_DATA"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_DATA()</span></code></a> will be exposed as <em>self</em> for the
implementation to clean up.</p>
<p>A bare “return;” statement may be used to return early.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.FIXTURE_VARIANT">
<span class="sig-name descname"><span class="n"><span class="pre">FIXTURE_VARIANT</span></span></span><a class="headerlink" href="#c.FIXTURE_VARIANT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">FIXTURE_VARIANT</span> <span class="pre">(fixture_name)</span></code></p>
<blockquote>
<div><p>Optionally called once per fixture to declare fixture variant</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt><dd><p>fixture name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_VARIANT</span><span class="p">(</span><span class="n">fixture_name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">type</span><span class="w"> </span><span class="n">property1</span><span class="p">;</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Defines type of constant parameters provided to <a class="reference internal" href="#c.FIXTURE_SETUP" title="FIXTURE_SETUP"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_SETUP()</span></code></a>, <a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST_F()</span></code></a> and
FIXTURE_TEARDOWN as <em>variant</em>. Variants allow the same tests to be run with
different arguments.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.FIXTURE_VARIANT_ADD">
<span class="sig-name descname"><span class="n"><span class="pre">FIXTURE_VARIANT_ADD</span></span></span><a class="headerlink" href="#c.FIXTURE_VARIANT_ADD" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">FIXTURE_VARIANT_ADD</span> <span class="pre">(fixture_name,</span> <span class="pre">variant_name)</span></code></p>
<blockquote>
<div><p>Called once per fixture variant to setup and register the data</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt><dd><p>fixture name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">variant_name</span></code></dt><dd><p>name of the parameter set</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">FIXTURE_VARIANT_ADD</span><span class="p">(</span><span class="n">fixture_name</span><span class="p">,</span><span class="w"> </span><span class="n">variant_name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="p">.</span><span class="n">property1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">val1</span><span class="p">,</span>
<span class="w">  </span><span class="p">...</span>
<span class="p">};</span>
</pre></div>
</div>
<p>Defines a variant of the test fixture, provided to <a class="reference internal" href="#c.FIXTURE_SETUP" title="FIXTURE_SETUP"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_SETUP()</span></code></a> and
<a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST_F()</span></code></a> as <em>variant</em>. Tests of each fixture will be run once for each
variant.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.TEST_F">
<span class="sig-name descname"><span class="n"><span class="pre">TEST_F</span></span></span><a class="headerlink" href="#c.TEST_F" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">TEST_F</span> <span class="pre">(fixture_name,</span> <span class="pre">test_name)</span></code></p>
<blockquote>
<div><p>Emits test registration and helpers for fixture-based test cases</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">fixture_name</span></code></dt><dd><p>fixture name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">test_name</span></code></dt><dd><p>test name</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST_F</span><span class="p">(</span><span class="n">fixture</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Defines a test that depends on a fixture (e.g., is part of a test case).
Very similar to <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> except that <em>self</em> is the setup instance of fixture’s
datatype exposed for use by the implementation.</p>
<p>The _metadata object is shared (MAP_SHARED) with all the potential forked
processes, which enables them to use EXCEPT_*() and ASSERT_*().</p>
<p>The <em>self</em> object is only shared with the potential forked processes if
FIXTURE_TEARDOWN_PARENT() is used instead of <a class="reference internal" href="#c.FIXTURE_TEARDOWN" title="FIXTURE_TEARDOWN"><code class="xref c c-func docutils literal notranslate"><span class="pre">FIXTURE_TEARDOWN()</span></code></a>.</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.TEST_HARNESS_MAIN">
<span class="sig-name descname"><span class="n"><span class="pre">TEST_HARNESS_MAIN</span></span></span><a class="headerlink" href="#c.TEST_HARNESS_MAIN" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">TEST_HARNESS_MAIN</span> <span class="pre">()</span></code></p>
<blockquote>
<div><p>Simple wrapper to run the test harness</p>
</div></blockquote>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<p><strong>Description</strong></p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">TEST_HARNESS_MAIN</span>
</pre></div>
</div>
<p>Use once to append a main() to the test file.</p>
</div>
</section>
<section id="operators">
<h3>Operators<a class="headerlink" href="#operators" title="Link to this heading">¶</a></h3>
<p>Operators for use in <a class="reference internal" href="#c.TEST" title="TEST"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST()</span></code></a> and <a class="reference internal" href="#c.TEST_F" title="TEST_F"><code class="xref c c-func docutils literal notranslate"><span class="pre">TEST_F()</span></code></a>.
ASSERT_* calls will stop test execution immediately.
EXPECT_* calls will emit a failure warning, note it, and continue.</p>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_EQ">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_EQ</span></span></span><a class="headerlink" href="#c.ASSERT_EQ" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_EQ</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_EQ(expected, measured): expected == measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_NE">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_NE</span></span></span><a class="headerlink" href="#c.ASSERT_NE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_NE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_NE(expected, measured): expected != measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_LT">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_LT</span></span></span><a class="headerlink" href="#c.ASSERT_LT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_LT</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_LT(expected, measured): expected &lt; measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_LE">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_LE</span></span></span><a class="headerlink" href="#c.ASSERT_LE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_LE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_LE(expected, measured): expected &lt;= measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_GT">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_GT</span></span></span><a class="headerlink" href="#c.ASSERT_GT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_GT</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_GT(expected, measured): expected &gt; measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_GE">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_GE</span></span></span><a class="headerlink" href="#c.ASSERT_GE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_GE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_GE(expected, measured): expected &gt;= measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_NULL">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_NULL</span></span></span><a class="headerlink" href="#c.ASSERT_NULL" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_NULL</span> <span class="pre">(seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_NULL(measured): NULL == measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_TRUE">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_TRUE</span></span></span><a class="headerlink" href="#c.ASSERT_TRUE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_TRUE</span> <span class="pre">(seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_TRUE(measured): measured != 0</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_FALSE">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_FALSE</span></span></span><a class="headerlink" href="#c.ASSERT_FALSE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_FALSE</span> <span class="pre">(seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_FALSE(measured): measured == 0</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_STREQ">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_STREQ</span></span></span><a class="headerlink" href="#c.ASSERT_STREQ" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_STREQ</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_STREQ(expected, measured): !strcmp(expected, measured)</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.ASSERT_STRNE">
<span class="sig-name descname"><span class="n"><span class="pre">ASSERT_STRNE</span></span></span><a class="headerlink" href="#c.ASSERT_STRNE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">ASSERT_STRNE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>ASSERT_STRNE(expected, measured): strcmp(expected, measured)</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_EQ">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_EQ</span></span></span><a class="headerlink" href="#c.EXPECT_EQ" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_EQ</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_EQ(expected, measured): expected == measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_NE">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_NE</span></span></span><a class="headerlink" href="#c.EXPECT_NE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_NE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_NE(expected, measured): expected != measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_LT">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_LT</span></span></span><a class="headerlink" href="#c.EXPECT_LT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_LT</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_LT(expected, measured): expected &lt; measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_LE">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_LE</span></span></span><a class="headerlink" href="#c.EXPECT_LE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_LE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_LE(expected, measured): expected &lt;= measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_GT">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_GT</span></span></span><a class="headerlink" href="#c.EXPECT_GT" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_GT</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_GT(expected, measured): expected &gt; measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_GE">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_GE</span></span></span><a class="headerlink" href="#c.EXPECT_GE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_GE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_GE(expected, measured): expected &gt;= measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_NULL">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_NULL</span></span></span><a class="headerlink" href="#c.EXPECT_NULL" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_NULL</span> <span class="pre">(seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_NULL(measured): NULL == measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_TRUE">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_TRUE</span></span></span><a class="headerlink" href="#c.EXPECT_TRUE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_TRUE</span> <span class="pre">(seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_TRUE(measured): 0 != measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_FALSE">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_FALSE</span></span></span><a class="headerlink" href="#c.EXPECT_FALSE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_FALSE</span> <span class="pre">(seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_FALSE(measured): 0 == measured</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_STREQ">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_STREQ</span></span></span><a class="headerlink" href="#c.EXPECT_STREQ" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_STREQ</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_STREQ(expected, measured): !strcmp(expected, measured)</p>
</div>
<dl class="c macro">
<dt class="sig sig-object c" id="c.EXPECT_STRNE">
<span class="sig-name descname"><span class="n"><span class="pre">EXPECT_STRNE</span></span></span><a class="headerlink" href="#c.EXPECT_STRNE" title="Link to this definition">¶</a><br /></dt>
<dd></dd></dl>

<p><code class="docutils literal notranslate"><span class="pre">EXPECT_STRNE</span> <span class="pre">(expected,</span> <span class="pre">seen)</span></code></p>
<div class="kernelindent docutils container">
<p><strong>Parameters</strong></p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">expected</span></code></dt><dd><p>expected value</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seen</span></code></dt><dd><p>measured value</p>
</dd>
</dl>
<p><strong>Description</strong></p>
<p>EXPECT_STRNE(expected, measured): strcmp(expected, measured)</p>
</div>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;The kernel development community.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/dev-tools/kselftest.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>